
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>IO Tools (Text, CSV, HDF5, ...) &mdash; pandas 0.12.0-746-g126c100 documentation</title>
    
    <link rel="stylesheet" href="_static/nature.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '0.12.0-746-g126c100',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="top" title="pandas 0.12.0-746-g126c100 documentation" href="index.html" />
    <link rel="next" title="Remote Data Access" href="remote_data.html" />
    <link rel="prev" title="Trellis plotting interface" href="rplot.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="np-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="remote_data.html" title="Remote Data Access"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="rplot.html" title="Trellis plotting interface"
             accesskey="P">previous</a> |</li>
        <li><a href="index.html">pandas 0.12.0-746-g126c100 documentation</a> &raquo;</li> 
      </ul>
    </div>
<div class="content-wrapper">
    <div class="content">
        <div class="document">
            <div class="sphinxsidebar">
                <h3>Table Of Contents</h3>
                <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="whatsnew.html">What&#8217;s New</a></li>
<li class="toctree-l1"><a class="reference internal" href="install.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="faq.html">Frequently Asked Questions (FAQ)</a></li>
<li class="toctree-l1"><a class="reference internal" href="overview.html">Package overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="10min.html">10 Minutes to Pandas</a></li>
<li class="toctree-l1"><a class="reference internal" href="cookbook.html">Cookbook</a></li>
<li class="toctree-l1"><a class="reference internal" href="dsintro.html">Intro to Data Structures</a></li>
<li class="toctree-l1"><a class="reference internal" href="basics.html">Essential Basic Functionality</a></li>
<li class="toctree-l1"><a class="reference internal" href="indexing.html">Indexing and Selecting Data</a></li>
<li class="toctree-l1"><a class="reference internal" href="computation.html">Computational tools</a></li>
<li class="toctree-l1"><a class="reference internal" href="missing_data.html">Working with missing data</a></li>
<li class="toctree-l1"><a class="reference internal" href="groupby.html">Group By: split-apply-combine</a></li>
<li class="toctree-l1"><a class="reference internal" href="merging.html">Merge, join, and concatenate</a></li>
<li class="toctree-l1"><a class="reference internal" href="reshaping.html">Reshaping and Pivot Tables</a></li>
<li class="toctree-l1"><a class="reference internal" href="timeseries.html">Time Series / Date functionality</a></li>
<li class="toctree-l1"><a class="reference internal" href="visualization.html">Plotting with matplotlib</a></li>
<li class="toctree-l1"><a class="reference internal" href="visualization.html#visualizing-your-data-in-qt-applications">Visualizing your data in Qt applications</a></li>
<li class="toctree-l1"><a class="reference internal" href="rplot.html">Trellis plotting interface</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="">IO Tools (Text, CSV, HDF5, ...)</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#csv-text-files">CSV &amp; Text files</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#specifying-column-data-types">Specifying column data types</a></li>
<li class="toctree-l3"><a class="reference internal" href="#handling-column-names">Handling column names</a></li>
<li class="toctree-l3"><a class="reference internal" href="#filtering-columns-usecols">Filtering columns (<tt class="docutils literal"><span class="pre">usecols</span></tt>)</a></li>
<li class="toctree-l3"><a class="reference internal" href="#dealing-with-unicode-data">Dealing with Unicode Data</a></li>
<li class="toctree-l3"><a class="reference internal" href="#index-columns-and-trailing-delimiters">Index columns and trailing delimiters</a></li>
<li class="toctree-l3"><a class="reference internal" href="#specifying-date-columns">Specifying Date Columns</a></li>
<li class="toctree-l3"><a class="reference internal" href="#date-parsing-functions">Date Parsing Functions</a></li>
<li class="toctree-l3"><a class="reference internal" href="#international-date-formats">International Date Formats</a></li>
<li class="toctree-l3"><a class="reference internal" href="#thousand-separators">Thousand Separators</a></li>
<li class="toctree-l3"><a class="reference internal" href="#na-values">NA Values</a></li>
<li class="toctree-l3"><a class="reference internal" href="#infinity">Infinity</a></li>
<li class="toctree-l3"><a class="reference internal" href="#comments">Comments</a></li>
<li class="toctree-l3"><a class="reference internal" href="#returning-series">Returning Series</a></li>
<li class="toctree-l3"><a class="reference internal" href="#boolean-values">Boolean values</a></li>
<li class="toctree-l3"><a class="reference internal" href="#handling-bad-lines">Handling &#8220;bad&#8221; lines</a></li>
<li class="toctree-l3"><a class="reference internal" href="#quoting-and-escape-characters">Quoting and Escape Characters</a></li>
<li class="toctree-l3"><a class="reference internal" href="#files-with-fixed-width-columns">Files with Fixed Width Columns</a></li>
<li class="toctree-l3"><a class="reference internal" href="#files-with-an-implicit-index-column">Files with an &#8220;implicit&#8221; index column</a></li>
<li class="toctree-l3"><a class="reference internal" href="#reading-an-index-with-a-multiindex">Reading an index with a <tt class="docutils literal"><span class="pre">MultiIndex</span></tt></a></li>
<li class="toctree-l3"><a class="reference internal" href="#reading-columns-with-a-multiindex">Reading columns with a <tt class="docutils literal"><span class="pre">MultiIndex</span></tt></a></li>
<li class="toctree-l3"><a class="reference internal" href="#automatically-sniffing-the-delimiter">Automatically &#8220;sniffing&#8221; the delimiter</a></li>
<li class="toctree-l3"><a class="reference internal" href="#iterating-through-files-chunk-by-chunk">Iterating through files chunk by chunk</a></li>
<li class="toctree-l3"><a class="reference internal" href="#writing-to-csv-format">Writing to CSV format</a></li>
<li class="toctree-l3"><a class="reference internal" href="#writing-a-formatted-string">Writing a formatted string</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#json">JSON</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#writing-json">Writing JSON</a></li>
<li class="toctree-l3"><a class="reference internal" href="#reading-json">Reading JSON</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#html">HTML</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#reading-html-content">Reading HTML Content</a></li>
<li class="toctree-l3"><a class="reference internal" href="#writing-to-html-files">Writing to HTML files</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#clipboard">Clipboard</a></li>
<li class="toctree-l2"><a class="reference internal" href="#pickling-and-serialization">Pickling and serialization</a></li>
<li class="toctree-l2"><a class="reference internal" href="#excel-files">Excel files</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#excel-writer-engines">Excel writer engines</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#serialization">Serialization</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#msgpack-experimental">msgpack (experimental)</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#hdf5-pytables">HDF5 (PyTables)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#read-write-api">Read/Write API</a></li>
<li class="toctree-l3"><a class="reference internal" href="#fixed-format">Fixed Format</a></li>
<li class="toctree-l3"><a class="reference internal" href="#table-format">Table Format</a></li>
<li class="toctree-l3"><a class="reference internal" href="#hierarchical-keys">Hierarchical Keys</a></li>
<li class="toctree-l3"><a class="reference internal" href="#storing-mixed-types-in-a-table">Storing Mixed Types in a Table</a></li>
<li class="toctree-l3"><a class="reference internal" href="#storing-multi-index-dataframes">Storing Multi-Index DataFrames</a></li>
<li class="toctree-l3"><a class="reference internal" href="#querying-a-table">Querying a Table</a></li>
<li class="toctree-l3"><a class="reference internal" href="#indexing">Indexing</a></li>
<li class="toctree-l3"><a class="reference internal" href="#query-via-data-columns">Query via Data Columns</a></li>
<li class="toctree-l3"><a class="reference internal" href="#iterator">Iterator</a></li>
<li class="toctree-l3"><a class="reference internal" href="#advanced-queries">Advanced Queries</a></li>
<li class="toctree-l3"><a class="reference internal" href="#multiple-table-queries">Multiple Table Queries</a></li>
<li class="toctree-l3"><a class="reference internal" href="#delete-from-a-table">Delete from a Table</a></li>
<li class="toctree-l3"><a class="reference internal" href="#compression">Compression</a></li>
<li class="toctree-l3"><a class="reference internal" href="#notes-caveats">Notes &amp; Caveats</a></li>
<li class="toctree-l3"><a class="reference internal" href="#datatypes">DataTypes</a></li>
<li class="toctree-l3"><a class="reference internal" href="#string-columns">String Columns</a></li>
<li class="toctree-l3"><a class="reference internal" href="#external-compatibility">External Compatibility</a></li>
<li class="toctree-l3"><a class="reference internal" href="#backwards-compatibility">Backwards Compatibility</a></li>
<li class="toctree-l3"><a class="reference internal" href="#performance">Performance</a></li>
<li class="toctree-l3"><a class="reference internal" href="#experimental">Experimental</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#sql-queries">SQL Queries</a></li>
<li class="toctree-l2"><a class="reference internal" href="#stata-format">STATA Format</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#writing-to-stata-format">Writing to STATA format</a></li>
<li class="toctree-l3"><a class="reference internal" href="#reading-from-stata-format">Reading from STATA format</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="remote_data.html">Remote Data Access</a></li>
<li class="toctree-l1"><a class="reference internal" href="enhancingperf.html">Enhancing Performance</a></li>
<li class="toctree-l1"><a class="reference internal" href="sparse.html">Sparse data structures</a></li>
<li class="toctree-l1"><a class="reference internal" href="gotchas.html">Caveats and Gotchas</a></li>
<li class="toctree-l1"><a class="reference internal" href="r_interface.html">rpy2 / R interface</a></li>
<li class="toctree-l1"><a class="reference internal" href="related.html">Related Python libraries</a></li>
<li class="toctree-l1"><a class="reference internal" href="comparison_with_r.html">Comparison with R / R libraries</a></li>
<li class="toctree-l1"><a class="reference internal" href="api.html">API Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="release.html">Release Notes</a></li>
</ul>

                <h3 style="margin-top: 1.5em;">Search</h3>

                <form class="search" action="search.html" method="get">
                    <input type="text" name="q" size="18"/>
                    <input type="submit" value="Go"/>
                    <input type="hidden" name="check_keywords" value="yes"/>
                    <input type="hidden" name="area" value="default"/>
                </form>
                <p class="searchtip" style="font-size: 90%">
                    Enter search terms or a module, class or function name.
                </p>

                <p>

                <p>
                    <script type="text/javascript"
                            src="http://www.ohloh.net/p/482908/widgets/project_partner_badge.js"></script>
                </p>
            </div>
             
            <div class="documentwrapper">
                <div class="bodywrapper">
                    <div class="body">
                        
  <div class="section" id="io-tools-text-csv-hdf5">
<span id="io"></span><h1>IO Tools (Text, CSV, HDF5, ...)<a class="headerlink" href="#io-tools-text-csv-hdf5" title="Permalink to this headline">¶</a></h1>
<p>The Pandas I/O api is a set of top level <tt class="docutils literal"><span class="pre">reader</span></tt> functions accessed like <tt class="docutils literal"><span class="pre">pd.read_csv()</span></tt> that generally return a <tt class="docutils literal"><span class="pre">pandas</span></tt>
object.</p>
<blockquote>
<div><ul class="simple">
<li><tt class="docutils literal"><span class="pre">read_csv</span></tt></li>
<li><tt class="docutils literal"><span class="pre">read_excel</span></tt></li>
<li><tt class="docutils literal"><span class="pre">read_hdf</span></tt></li>
<li><tt class="docutils literal"><span class="pre">read_sql</span></tt></li>
<li><tt class="docutils literal"><span class="pre">read_json</span></tt></li>
<li><tt class="docutils literal"><span class="pre">read_msgpack</span></tt> (experimental)</li>
<li><tt class="docutils literal"><span class="pre">read_html</span></tt></li>
<li><tt class="docutils literal"><span class="pre">read_stata</span></tt></li>
<li><tt class="docutils literal"><span class="pre">read_clipboard</span></tt></li>
<li><tt class="docutils literal"><span class="pre">read_pickle</span></tt></li>
</ul>
</div></blockquote>
<p>The corresponding <tt class="docutils literal"><span class="pre">writer</span></tt> functions are object methods that are accessed like <tt class="docutils literal"><span class="pre">df.to_csv()</span></tt></p>
<blockquote>
<div><ul class="simple">
<li><tt class="docutils literal"><span class="pre">to_csv</span></tt></li>
<li><tt class="docutils literal"><span class="pre">to_excel</span></tt></li>
<li><tt class="docutils literal"><span class="pre">to_hdf</span></tt></li>
<li><tt class="docutils literal"><span class="pre">to_sql</span></tt></li>
<li><tt class="docutils literal"><span class="pre">to_json</span></tt></li>
<li><tt class="docutils literal"><span class="pre">to_msgpack</span></tt> (experimental)</li>
<li><tt class="docutils literal"><span class="pre">to_html</span></tt></li>
<li><tt class="docutils literal"><span class="pre">to_stata</span></tt></li>
<li><tt class="docutils literal"><span class="pre">to_clipboard</span></tt></li>
<li><tt class="docutils literal"><span class="pre">to_pickle</span></tt></li>
</ul>
</div></blockquote>
<div class="section" id="csv-text-files">
<span id="io-read-csv-table"></span><h2>CSV &amp; Text files<a class="headerlink" href="#csv-text-files" title="Permalink to this headline">¶</a></h2>
<p>The two workhorse functions for reading text files (a.k.a. flat files) are
<a class="reference internal" href="generated/pandas.io.parsers.read_csv.html#pandas.io.parsers.read_csv" title="pandas.io.parsers.read_csv"><tt class="xref py py-func docutils literal"><span class="pre">read_csv()</span></tt></a> and <a class="reference internal" href="generated/pandas.io.parsers.read_table.html#pandas.io.parsers.read_table" title="pandas.io.parsers.read_table"><tt class="xref py py-func docutils literal"><span class="pre">read_table()</span></tt></a>.
They both use the same parsing code to intelligently convert tabular
data into a DataFrame object. See the <a class="reference internal" href="cookbook.html#cookbook-csv"><em>cookbook</em></a>
for some advanced strategies</p>
<p>They can take a number of arguments:</p>
<blockquote>
<div><ul class="simple">
<li><tt class="docutils literal"><span class="pre">filepath_or_buffer</span></tt>: Either a string path to a file, url
(including http, ftp, and s3 locations), or any object with a <tt class="docutils literal"><span class="pre">read</span></tt>
method (such as an open file or <tt class="docutils literal"><span class="pre">StringIO</span></tt>).</li>
<li><tt class="docutils literal"><span class="pre">sep</span></tt> or <tt class="docutils literal"><span class="pre">delimiter</span></tt>: A delimiter / separator to split fields
on. <cite>read_csv</cite> is capable of inferring the delimiter automatically in some
cases by &#8220;sniffing.&#8221; The separator may be specified as a regular
expression; for instance you may use &#8216;|\s*&#8217; to indicate a pipe plus
arbitrary whitespace.</li>
<li><tt class="docutils literal"><span class="pre">delim_whitespace</span></tt>: Parse whitespace-delimited (spaces or tabs) file
(much faster than using a regular expression)</li>
<li><tt class="docutils literal"><span class="pre">compression</span></tt>: decompress <tt class="docutils literal"><span class="pre">'gzip'</span></tt> and <tt class="docutils literal"><span class="pre">'bz2'</span></tt> formats on the fly.</li>
<li><tt class="docutils literal"><span class="pre">dialect</span></tt>: string or <a class="reference external" href="http://docs.python.org/library/csv.html#csv.Dialect" title="(in Python v2.7)"><tt class="docutils literal"><span class="pre">csv.Dialect</span></tt></a> instance to expose more
ways to specify the file format</li>
<li><tt class="docutils literal"><span class="pre">dtype</span></tt>: A data type name or a dict of column name to data type. If not
specified, data types will be inferred.</li>
<li><tt class="docutils literal"><span class="pre">header</span></tt>: row number to use as the column names, and the start of the
data.  Defaults to 0 if no <tt class="docutils literal"><span class="pre">names</span></tt> passed, otherwise <tt class="docutils literal"><span class="pre">None</span></tt>. Explicitly
pass <tt class="docutils literal"><span class="pre">header=0</span></tt> to be able to replace existing names. The header can be
a list of integers that specify row locations for a multi-index on the columns
E.g. [0,1,3]. Interveaning rows that are not specified will be skipped.
(E.g. 2 in this example are skipped)</li>
<li><tt class="docutils literal"><span class="pre">skiprows</span></tt>: A collection of numbers for rows in the file to skip. Can
also be an integer to skip the first <tt class="docutils literal"><span class="pre">n</span></tt> rows</li>
<li><tt class="docutils literal"><span class="pre">index_col</span></tt>: column number, column name, or list of column numbers/names,
to use as the <tt class="docutils literal"><span class="pre">index</span></tt> (row labels) of the resulting DataFrame. By default,
it will number the rows without using any column, unless there is one more
data column than there are headers, in which case the first column is taken
as the index.</li>
<li><tt class="docutils literal"><span class="pre">names</span></tt>: List of column names to use as column names. To replace header
existing in file, explicitly pass <tt class="docutils literal"><span class="pre">header=0</span></tt>.</li>
<li><tt class="docutils literal"><span class="pre">na_values</span></tt>: optional list of strings to recognize as NaN (missing
values), either in addition to or in lieu of the default set.</li>
<li><tt class="docutils literal"><span class="pre">true_values</span></tt>: list of strings to recognize as <tt class="docutils literal"><span class="pre">True</span></tt></li>
<li><tt class="docutils literal"><span class="pre">false_values</span></tt>: list of strings to recognize as <tt class="docutils literal"><span class="pre">False</span></tt></li>
<li><tt class="docutils literal"><span class="pre">keep_default_na</span></tt>: whether to include the default set of missing values
in addition to the ones specified in <tt class="docutils literal"><span class="pre">na_values</span></tt></li>
<li><tt class="docutils literal"><span class="pre">parse_dates</span></tt>: if True then index will be parsed as dates
(False by default). You can specify more complicated options to parse
a subset of columns or a combination of columns into a single date column
(list of ints or names, list of lists, or dict)
[1, 2, 3] -&gt; try parsing columns 1, 2, 3 each as a separate date column
[[1, 3]] -&gt; combine columns 1 and 3 and parse as a single date column
{&#8216;foo&#8217; : [1, 3]} -&gt; parse columns 1, 3 as date and call result &#8216;foo&#8217;</li>
<li><tt class="docutils literal"><span class="pre">keep_date_col</span></tt>: if True, then date component columns passed into
<tt class="docutils literal"><span class="pre">parse_dates</span></tt> will be retained in the output (False by default).</li>
<li><tt class="docutils literal"><span class="pre">date_parser</span></tt>: function to use to parse strings into datetime
objects. If <tt class="docutils literal"><span class="pre">parse_dates</span></tt> is True, it defaults to the very robust
<tt class="docutils literal"><span class="pre">dateutil.parser</span></tt>. Specifying this implicitly sets <tt class="docutils literal"><span class="pre">parse_dates</span></tt> as True.
You can also use functions from community supported date converters from
date_converters.py</li>
<li><tt class="docutils literal"><span class="pre">dayfirst</span></tt>: if True then uses the DD/MM international/European date format
(This is False by default)</li>
<li><tt class="docutils literal"><span class="pre">thousands</span></tt>: specifies the thousands separator. If not None, this character will
be stripped from numeric dtypes. However, if it is the first character in a field,
that column will be imported as a string. In the PythonParser, if not None,
then parser will try to look for it in the output and parse relevant data to numeric
dtypes. Because it has to essentially scan through the data again, this causes a
significant performance hit so only use if necessary.</li>
<li><tt class="docutils literal"><span class="pre">lineterminator</span></tt> : string (length 1), default <tt class="docutils literal"><span class="pre">None</span></tt>, Character to break file into lines. Only valid with C parser</li>
<li><tt class="docutils literal"><span class="pre">quotechar</span></tt> : string, The character to used to denote the start and end of a quoted item.
Quoted items can include the delimiter and it will be ignored.</li>
<li><tt class="docutils literal"><span class="pre">quoting</span></tt> : int,
Controls whether quotes should be recognized. Values are taken from <cite>csv.QUOTE_*</cite> values.
Acceptable values are 0, 1, 2, and 3 for QUOTE_MINIMAL, QUOTE_ALL, QUOTE_NONE, and QUOTE_NONNUMERIC, respectively.</li>
<li><tt class="docutils literal"><span class="pre">skipinitialspace</span></tt> : boolean, default <tt class="docutils literal"><span class="pre">False</span></tt>, Skip spaces after delimiter</li>
<li><tt class="docutils literal"><span class="pre">escapechar</span></tt> : string, to specify how to escape quoted data</li>
<li><tt class="docutils literal"><span class="pre">comment</span></tt>: denotes the start of a comment and ignores the rest of the line.
Currently line commenting is not supported.</li>
<li><tt class="docutils literal"><span class="pre">nrows</span></tt>: Number of rows to read out of the file. Useful to only read a
small portion of a large file</li>
<li><tt class="docutils literal"><span class="pre">iterator</span></tt>: If True, return a <tt class="docutils literal"><span class="pre">TextFileReader</span></tt> to enable reading a file
into memory piece by piece</li>
<li><tt class="docutils literal"><span class="pre">chunksize</span></tt>: An number of rows to be used to &#8220;chunk&#8221; a file into
pieces. Will cause an <tt class="docutils literal"><span class="pre">TextFileReader</span></tt> object to be returned. More on this
below in the section on <a class="reference internal" href="#io-chunking"><em>iterating and chunking</em></a></li>
<li><tt class="docutils literal"><span class="pre">skip_footer</span></tt>: number of lines to skip at bottom of file (default 0)</li>
<li><tt class="docutils literal"><span class="pre">converters</span></tt>: a dictionary of functions for converting values in certain
columns, where keys are either integers or column labels</li>
<li><tt class="docutils literal"><span class="pre">encoding</span></tt>: a string representing the encoding to use for decoding
unicode data, e.g. <tt class="docutils literal"><span class="pre">'utf-8`</span></tt> or <tt class="docutils literal"><span class="pre">'latin-1'</span></tt>.</li>
<li><tt class="docutils literal"><span class="pre">verbose</span></tt>: show number of NA values inserted in non-numeric columns</li>
<li><tt class="docutils literal"><span class="pre">squeeze</span></tt>: if True then output with only one column is turned into Series</li>
<li><tt class="docutils literal"><span class="pre">error_bad_lines</span></tt>: if False then any lines causing an error will be skipped <a class="reference internal" href="#io-bad-lines"><em>bad lines</em></a></li>
<li><tt class="docutils literal"><span class="pre">usecols</span></tt>: a subset of columns to return, results in much faster parsing
time and lower memory usage.</li>
<li><tt class="docutils literal"><span class="pre">mangle_dupe_cols</span></tt>: boolean, default True, then duplicate columns will be specified
as &#8216;X.0&#8217;...&#8217;X.N&#8217;, rather than &#8216;X&#8217;...&#8217;X&#8217;</li>
<li><tt class="docutils literal"><span class="pre">tupleize_cols</span></tt>: boolean, default False, if False, convert a list of tuples
to a multi-index of columns, otherwise, leave the column index as a list of tuples</li>
</ul>
</div></blockquote>
<p>Consider a typical CSV file containing, in this case, some time series data:</p>
<div class="highlight-ipython"><div class="highlight"><pre><span class="gp">In [1]: </span><span class="k">print</span><span class="p">(</span><span class="nb">open</span><span class="p">(</span><span class="s">&#39;foo.csv&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">read</span><span class="p">())</span>
<span class="go">date,A,B,C</span>
<span class="go">20090101,a,1,2</span>
<span class="go">20090102,b,3,4</span>
<span class="go">20090103,c,4,5</span>
</pre></div>
</div>
<p>The default for <cite>read_csv</cite> is to create a DataFrame with simple numbered rows:</p>
<div class="highlight-ipython"><div class="highlight"><pre><span class="gp">In [2]: </span><span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s">&#39;foo.csv&#39;</span><span class="p">)</span>

<span class="go">       date  A  B  C</span>
<span class="go">0  20090101  a  1  2</span>
<span class="go">1  20090102  b  3  4</span>
<span class="go">2  20090103  c  4  5</span>
</pre></div>
</div>
<p>In the case of indexed data, you can pass the column number or column name you
wish to use as the index:</p>
<div class="highlight-ipython"><div class="highlight"><pre><span class="gp">In [3]: </span><span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s">&#39;foo.csv&#39;</span><span class="p">,</span> <span class="n">index_col</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>

<span class="go">          A  B  C</span>
<span class="go">date             </span>
<span class="go">20090101  a  1  2</span>
<span class="go">20090102  b  3  4</span>
<span class="go">20090103  c  4  5</span>
</pre></div>
</div>
<div class="highlight-ipython"><div class="highlight"><pre><span class="gp">In [4]: </span><span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s">&#39;foo.csv&#39;</span><span class="p">,</span> <span class="n">index_col</span><span class="o">=</span><span class="s">&#39;date&#39;</span><span class="p">)</span>

<span class="go">          A  B  C</span>
<span class="go">date             </span>
<span class="go">20090101  a  1  2</span>
<span class="go">20090102  b  3  4</span>
<span class="go">20090103  c  4  5</span>
</pre></div>
</div>
<p>You can also use a list of columns to create a hierarchical index:</p>
<div class="highlight-ipython"><div class="highlight"><pre><span class="gp">In [5]: </span><span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s">&#39;foo.csv&#39;</span><span class="p">,</span> <span class="n">index_col</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="s">&#39;A&#39;</span><span class="p">])</span>

<span class="go">            B  C</span>
<span class="go">date     A      </span>
<span class="go">20090101 a  1  2</span>
<span class="go">20090102 b  3  4</span>
<span class="go">20090103 c  4  5</span>
</pre></div>
</div>
<p id="io-dialect">The <tt class="docutils literal"><span class="pre">dialect</span></tt> keyword gives greater flexibility in specifying the file format.
By default it uses the Excel dialect but you can specify either the dialect name
or a <a class="reference external" href="http://docs.python.org/library/csv.html#csv.Dialect" title="(in Python v2.7)"><tt class="docutils literal"><span class="pre">csv.Dialect</span></tt></a> instance.</p>
<p>Suppose you had data with unenclosed quotes:</p>
<div class="highlight-ipython"><div class="highlight"><pre><span class="gp">In [6]: </span><span class="k">print</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
<span class="go">label1,label2,label3</span>
<span class="go">index1,&quot;a,c,e</span>
<span class="go">index2,b,d,f</span>
</pre></div>
</div>
<p>By default, <tt class="docutils literal"><span class="pre">read_csv</span></tt> uses the Excel dialect and treats the double quote as
the quote character, which causes it to fail when it finds a newline before it
finds the closing double quote.</p>
<p>We can get around this using <tt class="docutils literal"><span class="pre">dialect</span></tt></p>
<div class="highlight-ipython"><div class="highlight"><pre><span class="gp">In [7]: </span><span class="n">dia</span> <span class="o">=</span> <span class="n">csv</span><span class="o">.</span><span class="n">excel</span><span class="p">()</span>

<span class="gp">In [8]: </span><span class="n">dia</span><span class="o">.</span><span class="n">quoting</span> <span class="o">=</span> <span class="n">csv</span><span class="o">.</span><span class="n">QUOTE_NONE</span>

<span class="gp">In [9]: </span><span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">StringIO</span><span class="p">(</span><span class="n">data</span><span class="p">),</span> <span class="n">dialect</span><span class="o">=</span><span class="n">dia</span><span class="p">)</span>

<span class="go">       label1 label2 label3</span>
<span class="go">index1     &quot;a      c      e</span>
<span class="go">index2      b      d      f</span>
</pre></div>
</div>
<p>All of the dialect options can be specified separately by keyword arguments:</p>
<div class="highlight-ipython"><div class="highlight"><pre><span class="gp">In [10]: </span><span class="n">data</span> <span class="o">=</span> <span class="s">&#39;a,b,c~1,2,3~4,5,6&#39;</span>

<span class="gp">In [11]: </span><span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">StringIO</span><span class="p">(</span><span class="n">data</span><span class="p">),</span> <span class="n">lineterminator</span><span class="o">=</span><span class="s">&#39;~&#39;</span><span class="p">)</span>

<span class="go">   a  b  c</span>
<span class="go">0  1  2  3</span>
<span class="go">1  4  5  6</span>
</pre></div>
</div>
<p>Another common dialect option is <tt class="docutils literal"><span class="pre">skipinitialspace</span></tt>, to skip any whitespace
after a delimiter:</p>
<div class="highlight-ipython"><div class="highlight"><pre><span class="gp">In [12]: </span><span class="n">data</span> <span class="o">=</span> <span class="s">&#39;a, b, c</span><span class="se">\n</span><span class="s">1, 2, 3</span><span class="se">\n</span><span class="s">4, 5, 6&#39;</span>

<span class="gp">In [13]: </span><span class="k">print</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
<span class="go">a, b, c</span>
<span class="go">1, 2, 3</span>
<span class="go">4, 5, 6</span>

<span class="gp">In [14]: </span><span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">StringIO</span><span class="p">(</span><span class="n">data</span><span class="p">),</span> <span class="n">skipinitialspace</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>

<span class="go">   a  b  c</span>
<span class="go">0  1  2  3</span>
<span class="go">1  4  5  6</span>
</pre></div>
</div>
<p>The parsers make every attempt to &#8220;do the right thing&#8221; and not be very
fragile. Type inference is a pretty big deal. So if a column can be coerced to
integer dtype without altering the contents, it will do so. Any non-numeric
columns will come through as object dtype as with the rest of pandas objects.</p>
<div class="section" id="specifying-column-data-types">
<span id="io-dtypes"></span><h3>Specifying column data types<a class="headerlink" href="#specifying-column-data-types" title="Permalink to this headline">¶</a></h3>
<p>Starting with v0.10, you can indicate the data type for the whole DataFrame or
individual columns:</p>
<div class="highlight-ipython"><div class="highlight"><pre><span class="gp">In [15]: </span><span class="n">data</span> <span class="o">=</span> <span class="s">&#39;a,b,c</span><span class="se">\n</span><span class="s">1,2,3</span><span class="se">\n</span><span class="s">4,5,6</span><span class="se">\n</span><span class="s">7,8,9&#39;</span>

<span class="gp">In [16]: </span><span class="k">print</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
<span class="go">a,b,c</span>
<span class="go">1,2,3</span>
<span class="go">4,5,6</span>
<span class="go">7,8,9</span>

<span class="gp">In [17]: </span><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">StringIO</span><span class="p">(</span><span class="n">data</span><span class="p">),</span> <span class="n">dtype</span><span class="o">=</span><span class="nb">object</span><span class="p">)</span>

<span class="gp">In [18]: </span><span class="n">df</span>

<span class="go">   a  b  c</span>
<span class="go">0  1  2  3</span>
<span class="go">1  4  5  6</span>
<span class="go">2  7  8  9</span>

<span class="gp">In [19]: </span><span class="n">df</span><span class="p">[</span><span class="s">&#39;a&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
<span class="go">&#39;1&#39;</span>

<span class="gp">In [20]: </span><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">StringIO</span><span class="p">(</span><span class="n">data</span><span class="p">),</span> <span class="n">dtype</span><span class="o">=</span><span class="p">{</span><span class="s">&#39;b&#39;</span><span class="p">:</span> <span class="nb">object</span><span class="p">,</span> <span class="s">&#39;c&#39;</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">float64</span><span class="p">})</span>

<span class="gp">In [21]: </span><span class="n">df</span><span class="o">.</span><span class="n">dtypes</span>

<span class="go">a      int64</span>
<span class="go">b     object</span>
<span class="go">c    float64</span>
<span class="go">dtype: object</span>
</pre></div>
</div>
</div>
<div class="section" id="handling-column-names">
<span id="io-headers"></span><h3>Handling column names<a class="headerlink" href="#handling-column-names" title="Permalink to this headline">¶</a></h3>
<p>A file may or may not have a header row. pandas assumes the first row should be
used as the column names:</p>
<div class="highlight-ipython"><div class="highlight"><pre><span class="gp">In [22]: </span><span class="kn">from</span> <span class="nn">StringIO</span> <span class="kn">import</span> <span class="n">StringIO</span>

<span class="gp">In [23]: </span><span class="n">data</span> <span class="o">=</span> <span class="s">&#39;a,b,c</span><span class="se">\n</span><span class="s">1,2,3</span><span class="se">\n</span><span class="s">4,5,6</span><span class="se">\n</span><span class="s">7,8,9&#39;</span>

<span class="gp">In [24]: </span><span class="k">print</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
<span class="go">a,b,c</span>
<span class="go">1,2,3</span>
<span class="go">4,5,6</span>
<span class="go">7,8,9</span>

<span class="gp">In [25]: </span><span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">StringIO</span><span class="p">(</span><span class="n">data</span><span class="p">))</span>

<span class="go">   a  b  c</span>
<span class="go">0  1  2  3</span>
<span class="go">1  4  5  6</span>
<span class="go">2  7  8  9</span>
</pre></div>
</div>
<p>By specifying the <tt class="docutils literal"><span class="pre">names</span></tt> argument in conjunction with <tt class="docutils literal"><span class="pre">header</span></tt> you can
indicate other names to use and whether or not to throw away the header row (if
any):</p>
<div class="highlight-ipython"><div class="highlight"><pre><span class="gp">In [26]: </span><span class="k">print</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
<span class="go">a,b,c</span>
<span class="go">1,2,3</span>
<span class="go">4,5,6</span>
<span class="go">7,8,9</span>

<span class="gp">In [27]: </span><span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">StringIO</span><span class="p">(</span><span class="n">data</span><span class="p">),</span> <span class="n">names</span><span class="o">=</span><span class="p">[</span><span class="s">&#39;foo&#39;</span><span class="p">,</span> <span class="s">&#39;bar&#39;</span><span class="p">,</span> <span class="s">&#39;baz&#39;</span><span class="p">],</span> <span class="n">header</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>

<span class="go">   foo  bar  baz</span>
<span class="go">0    1    2    3</span>
<span class="go">1    4    5    6</span>
<span class="go">2    7    8    9</span>

<span class="gp">In [28]: </span><span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">StringIO</span><span class="p">(</span><span class="n">data</span><span class="p">),</span> <span class="n">names</span><span class="o">=</span><span class="p">[</span><span class="s">&#39;foo&#39;</span><span class="p">,</span> <span class="s">&#39;bar&#39;</span><span class="p">,</span> <span class="s">&#39;baz&#39;</span><span class="p">],</span> <span class="n">header</span><span class="o">=</span><span class="bp">None</span><span class="p">)</span>

<span class="go">  foo bar baz</span>
<span class="go">0   a   b   c</span>
<span class="go">1   1   2   3</span>
<span class="go">2   4   5   6</span>
<span class="go">3   7   8   9</span>
</pre></div>
</div>
<p>If the header is in a row other than the first, pass the row number to
<tt class="docutils literal"><span class="pre">header</span></tt>. This will skip the preceding rows:</p>
<div class="highlight-ipython"><div class="highlight"><pre><span class="gp">In [29]: </span><span class="n">data</span> <span class="o">=</span> <span class="s">&#39;skip this skip it</span><span class="se">\n</span><span class="s">a,b,c</span><span class="se">\n</span><span class="s">1,2,3</span><span class="se">\n</span><span class="s">4,5,6</span><span class="se">\n</span><span class="s">7,8,9&#39;</span>

<span class="gp">In [30]: </span><span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">StringIO</span><span class="p">(</span><span class="n">data</span><span class="p">),</span> <span class="n">header</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>

<span class="go">   a  b  c</span>
<span class="go">0  1  2  3</span>
<span class="go">1  4  5  6</span>
<span class="go">2  7  8  9</span>
</pre></div>
</div>
</div>
<div class="section" id="filtering-columns-usecols">
<span id="io-usecols"></span><h3>Filtering columns (<tt class="docutils literal"><span class="pre">usecols</span></tt>)<a class="headerlink" href="#filtering-columns-usecols" title="Permalink to this headline">¶</a></h3>
<p>The <tt class="docutils literal"><span class="pre">usecols</span></tt> argument allows you to select any subset of the columns in a
file, either using the column names or position numbers:</p>
<div class="highlight-ipython"><div class="highlight"><pre><span class="gp">In [31]: </span><span class="n">data</span> <span class="o">=</span> <span class="s">&#39;a,b,c,d</span><span class="se">\n</span><span class="s">1,2,3,foo</span><span class="se">\n</span><span class="s">4,5,6,bar</span><span class="se">\n</span><span class="s">7,8,9,baz&#39;</span>

<span class="gp">In [32]: </span><span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">StringIO</span><span class="p">(</span><span class="n">data</span><span class="p">))</span>

<span class="go">   a  b  c    d</span>
<span class="go">0  1  2  3  foo</span>
<span class="go">1  4  5  6  bar</span>
<span class="go">2  7  8  9  baz</span>

<span class="gp">In [33]: </span><span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">StringIO</span><span class="p">(</span><span class="n">data</span><span class="p">),</span> <span class="n">usecols</span><span class="o">=</span><span class="p">[</span><span class="s">&#39;b&#39;</span><span class="p">,</span> <span class="s">&#39;d&#39;</span><span class="p">])</span>

<span class="go">   b    d</span>
<span class="go">0  2  foo</span>
<span class="go">1  5  bar</span>
<span class="go">2  8  baz</span>

<span class="gp">In [34]: </span><span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">StringIO</span><span class="p">(</span><span class="n">data</span><span class="p">),</span> <span class="n">usecols</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">])</span>

<span class="go">   a  c    d</span>
<span class="go">0  1  3  foo</span>
<span class="go">1  4  6  bar</span>
<span class="go">2  7  9  baz</span>
</pre></div>
</div>
</div>
<div class="section" id="dealing-with-unicode-data">
<span id="io-unicode"></span><h3>Dealing with Unicode Data<a class="headerlink" href="#dealing-with-unicode-data" title="Permalink to this headline">¶</a></h3>
<p>The <tt class="docutils literal"><span class="pre">encoding</span></tt> argument should be used for encoded unicode data, which will
result in byte strings being decoded to unicode in the result:</p>
<div class="highlight-ipython"><div class="highlight"><pre><span class="gp">In [35]: </span><span class="n">data</span> <span class="o">=</span> <span class="s">&#39;word,length</span><span class="se">\n</span><span class="s">Tr</span><span class="se">\xe4</span><span class="s">umen,7</span><span class="se">\n</span><span class="s">Gr</span><span class="se">\xfc\xdf</span><span class="s">e,5&#39;</span>

<span class="gp">In [36]: </span><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">StringIO</span><span class="p">(</span><span class="n">data</span><span class="p">),</span> <span class="n">encoding</span><span class="o">=</span><span class="s">&#39;latin-1&#39;</span><span class="p">)</span>

<span class="gp">In [37]: </span><span class="n">df</span>

<span class="go">      word  length</span>
<span class="go">0  Träumen       7</span>
<span class="go">1    Grüße       5</span>

<span class="gp">In [38]: </span><span class="n">df</span><span class="p">[</span><span class="s">&#39;word&#39;</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span>
<span class="go">u&#39;Gr\xfc\xdfe&#39;</span>
</pre></div>
</div>
<p>Some formats which encode all characters as multiple bytes, like UTF-16, won&#8217;t
parse correctly at all without specifying the encoding.</p>
</div>
<div class="section" id="index-columns-and-trailing-delimiters">
<span id="io-index-col"></span><h3>Index columns and trailing delimiters<a class="headerlink" href="#index-columns-and-trailing-delimiters" title="Permalink to this headline">¶</a></h3>
<p>If a file has one more column of data than the number of column names, the
first column will be used as the DataFrame&#8217;s row names:</p>
<div class="highlight-ipython"><div class="highlight"><pre><span class="gp">In [39]: </span><span class="n">data</span> <span class="o">=</span> <span class="s">&#39;a,b,c</span><span class="se">\n</span><span class="s">4,apple,bat,5.7</span><span class="se">\n</span><span class="s">8,orange,cow,10&#39;</span>

<span class="gp">In [40]: </span><span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">StringIO</span><span class="p">(</span><span class="n">data</span><span class="p">))</span>

<span class="go">        a    b     c</span>
<span class="go">4   apple  bat   5.7</span>
<span class="go">8  orange  cow  10.0</span>
</pre></div>
</div>
<div class="highlight-ipython"><div class="highlight"><pre><span class="gp">In [41]: </span><span class="n">data</span> <span class="o">=</span> <span class="s">&#39;index,a,b,c</span><span class="se">\n</span><span class="s">4,apple,bat,5.7</span><span class="se">\n</span><span class="s">8,orange,cow,10&#39;</span>

<span class="gp">In [42]: </span><span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">StringIO</span><span class="p">(</span><span class="n">data</span><span class="p">),</span> <span class="n">index_col</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>

<span class="go">            a    b     c</span>
<span class="go">index                   </span>
<span class="go">4       apple  bat   5.7</span>
<span class="go">8      orange  cow  10.0</span>
</pre></div>
</div>
<p>Ordinarily, you can achieve this behavior using the <tt class="docutils literal"><span class="pre">index_col</span></tt> option.</p>
<p>There are some exception cases when a file has been prepared with delimiters at
the end of each data line, confusing the parser. To explicitly disable the
index column inference and discard the last column, pass <tt class="docutils literal"><span class="pre">index_col=False</span></tt>:</p>
<div class="highlight-ipython"><div class="highlight"><pre><span class="gp">In [43]: </span><span class="n">data</span> <span class="o">=</span> <span class="s">&#39;a,b,c</span><span class="se">\n</span><span class="s">4,apple,bat,</span><span class="se">\n</span><span class="s">8,orange,cow,&#39;</span>

<span class="gp">In [44]: </span><span class="k">print</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
<span class="go">a,b,c</span>
<span class="go">4,apple,bat,</span>
<span class="go">8,orange,cow,</span>

<span class="gp">In [45]: </span><span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">StringIO</span><span class="p">(</span><span class="n">data</span><span class="p">))</span>

<span class="go">        a    b   c</span>
<span class="go">4   apple  bat NaN</span>
<span class="go">8  orange  cow NaN</span>

<span class="gp">In [46]: </span><span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">StringIO</span><span class="p">(</span><span class="n">data</span><span class="p">),</span> <span class="n">index_col</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>

<span class="go">   a       b    c</span>
<span class="go">0  4   apple  bat</span>
<span class="go">1  8  orange  cow</span>
</pre></div>
</div>
</div>
<div class="section" id="specifying-date-columns">
<span id="io-parse-dates"></span><h3>Specifying Date Columns<a class="headerlink" href="#specifying-date-columns" title="Permalink to this headline">¶</a></h3>
<p>To better facilitate working with datetime data,
<a class="reference internal" href="generated/pandas.io.parsers.read_csv.html#pandas.io.parsers.read_csv" title="pandas.io.parsers.read_csv"><tt class="xref py py-func docutils literal"><span class="pre">read_csv()</span></tt></a> and <a class="reference internal" href="generated/pandas.io.parsers.read_table.html#pandas.io.parsers.read_table" title="pandas.io.parsers.read_table"><tt class="xref py py-func docutils literal"><span class="pre">read_table()</span></tt></a>
uses the keyword arguments <tt class="docutils literal"><span class="pre">parse_dates</span></tt> and <tt class="docutils literal"><span class="pre">date_parser</span></tt> to allow users
to specify a variety of columns and date/time formats to turn the input text
data into <tt class="docutils literal"><span class="pre">datetime</span></tt> objects.</p>
<p>The simplest case is to just pass in <tt class="docutils literal"><span class="pre">parse_dates=True</span></tt>:</p>
<div class="highlight-ipython"><div class="highlight"><pre><span class="c"># Use a column as an index, and parse it as dates.</span>
<span class="gp">In [47]: </span><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s">&#39;foo.csv&#39;</span><span class="p">,</span> <span class="n">index_col</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">parse_dates</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>

<span class="gp">In [48]: </span><span class="n">df</span>

<span class="go">            A  B  C</span>
<span class="go">date               </span>
<span class="go">2009-01-01  a  1  2</span>
<span class="go">2009-01-02  b  3  4</span>
<span class="go">2009-01-03  c  4  5</span>

<span class="c"># These are python datetime objects</span>
<span class="gp">In [49]: </span><span class="n">df</span><span class="o">.</span><span class="n">index</span>

<span class="go">&lt;class &#39;pandas.tseries.index.DatetimeIndex&#39;&gt;</span>
<span class="go">[2009-01-01 00:00:00, ..., 2009-01-03 00:00:00]</span>
<span class="go">Length: 3, Freq: None, Timezone: None</span>
</pre></div>
</div>
<p>It is often the case that we may want to store date and time data separately,
or store various date fields separately. the <tt class="docutils literal"><span class="pre">parse_dates</span></tt> keyword can be
used to specify a combination of columns to parse the dates and/or times from.</p>
<p>You can specify a list of column lists to <tt class="docutils literal"><span class="pre">parse_dates</span></tt>, the resulting date
columns will be prepended to the output (so as to not affect the existing column
order) and the new column names will be the concatenation of the component
column names:</p>
<div class="highlight-ipython"><div class="highlight"><pre><span class="gp">In [50]: </span><span class="k">print</span><span class="p">(</span><span class="nb">open</span><span class="p">(</span><span class="s">&#39;tmp.csv&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">read</span><span class="p">())</span>
<span class="go">KORD,19990127, 19:00:00, 18:56:00, 0.8100</span>
<span class="go">KORD,19990127, 20:00:00, 19:56:00, 0.0100</span>
<span class="go">KORD,19990127, 21:00:00, 20:56:00, -0.5900</span>
<span class="go">KORD,19990127, 21:00:00, 21:18:00, -0.9900</span>
<span class="go">KORD,19990127, 22:00:00, 21:56:00, -0.5900</span>
<span class="go">KORD,19990127, 23:00:00, 22:56:00, -0.5900</span>

<span class="gp">In [51]: </span><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s">&#39;tmp.csv&#39;</span><span class="p">,</span> <span class="n">header</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">parse_dates</span><span class="o">=</span><span class="p">[[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">],</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">]])</span>

<span class="gp">In [52]: </span><span class="n">df</span>

<span class="go">                  1_2                 1_3     0     4</span>
<span class="go">0 1999-01-27 19:00:00 1999-01-27 18:56:00  KORD  0.81</span>
<span class="go">1 1999-01-27 20:00:00 1999-01-27 19:56:00  KORD  0.01</span>
<span class="go">2 1999-01-27 21:00:00 1999-01-27 20:56:00  KORD -0.59</span>
<span class="go">3 1999-01-27 21:00:00 1999-01-27 21:18:00  KORD -0.99</span>
<span class="go">4 1999-01-27 22:00:00 1999-01-27 21:56:00  KORD -0.59</span>
<span class="go">5 1999-01-27 23:00:00 1999-01-27 22:56:00  KORD -0.59</span>
</pre></div>
</div>
<p>By default the parser removes the component date columns, but you can choose
to retain them via the <tt class="docutils literal"><span class="pre">keep_date_col</span></tt> keyword:</p>
<div class="highlight-ipython"><div class="highlight"><pre><span class="gp">In [53]: </span><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s">&#39;tmp.csv&#39;</span><span class="p">,</span> <span class="n">header</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">parse_dates</span><span class="o">=</span><span class="p">[[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">],</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">]],</span>
<span class="gp">   ....:</span>                  <span class="n">keep_date_col</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
<span class="gp">   ....:</span> 

<span class="gp">In [54]: </span><span class="n">df</span>

<span class="go">                  1_2                 1_3     0         1          2  \</span>
<span class="go">0 1999-01-27 19:00:00 1999-01-27 18:56:00  KORD  19990127   19:00:00   </span>
<span class="go">1 1999-01-27 20:00:00 1999-01-27 19:56:00  KORD  19990127   20:00:00   </span>
<span class="go">2 1999-01-27 21:00:00 1999-01-27 20:56:00  KORD  19990127   21:00:00   </span>
<span class="go">3 1999-01-27 21:00:00 1999-01-27 21:18:00  KORD  19990127   21:00:00   </span>
<span class="go">4 1999-01-27 22:00:00 1999-01-27 21:56:00  KORD  19990127   22:00:00   </span>
<span class="go">5 1999-01-27 23:00:00 1999-01-27 22:56:00  KORD  19990127   23:00:00   </span>
<span class="go">           3     4  </span>
<span class="go">0   18:56:00  0.81  </span>
<span class="go">1   19:56:00  0.01  </span>
<span class="go">2   20:56:00 -0.59  </span>
<span class="go">3   21:18:00 -0.99  </span>
<span class="go">4   21:56:00 -0.59  </span>
<span class="go">5   22:56:00 -0.59  </span>
</pre></div>
</div>
<p>Note that if you wish to combine multiple columns into a single date column, a
nested list must be used. In other words, <tt class="docutils literal"><span class="pre">parse_dates=[1,</span> <span class="pre">2]</span></tt> indicates that
the second and third columns should each be parsed as separate date columns
while <tt class="docutils literal"><span class="pre">parse_dates=[[1,</span> <span class="pre">2]]</span></tt> means the two columns should be parsed into a
single column.</p>
<p>You can also use a dict to specify custom name columns:</p>
<div class="highlight-ipython"><div class="highlight"><pre><span class="gp">In [55]: </span><span class="n">date_spec</span> <span class="o">=</span> <span class="p">{</span><span class="s">&#39;nominal&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">],</span> <span class="s">&#39;actual&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">]}</span>

<span class="gp">In [56]: </span><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s">&#39;tmp.csv&#39;</span><span class="p">,</span> <span class="n">header</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">parse_dates</span><span class="o">=</span><span class="n">date_spec</span><span class="p">)</span>

<span class="gp">In [57]: </span><span class="n">df</span>

<span class="go">              nominal              actual     0     4</span>
<span class="go">0 1999-01-27 19:00:00 1999-01-27 18:56:00  KORD  0.81</span>
<span class="go">1 1999-01-27 20:00:00 1999-01-27 19:56:00  KORD  0.01</span>
<span class="go">2 1999-01-27 21:00:00 1999-01-27 20:56:00  KORD -0.59</span>
<span class="go">3 1999-01-27 21:00:00 1999-01-27 21:18:00  KORD -0.99</span>
<span class="go">4 1999-01-27 22:00:00 1999-01-27 21:56:00  KORD -0.59</span>
<span class="go">5 1999-01-27 23:00:00 1999-01-27 22:56:00  KORD -0.59</span>
</pre></div>
</div>
<p>It is important to remember that if multiple text columns are to be parsed into
a single date column, then a new column is prepended to the data. The <cite>index_col</cite>
specification is based off of this new set of columns rather than the original
data columns:</p>
<div class="highlight-ipython"><div class="highlight"><pre><span class="gp">In [58]: </span><span class="n">date_spec</span> <span class="o">=</span> <span class="p">{</span><span class="s">&#39;nominal&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">],</span> <span class="s">&#39;actual&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">]}</span>

<span class="gp">In [59]: </span><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s">&#39;tmp.csv&#39;</span><span class="p">,</span> <span class="n">header</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">parse_dates</span><span class="o">=</span><span class="n">date_spec</span><span class="p">,</span>
<span class="gp">   ....:</span>                  <span class="n">index_col</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span> <span class="c">#index is the nominal column</span>
<span class="gp">   ....:</span> 

<span class="gp">In [60]: </span><span class="n">df</span>

<span class="go">                                 actual     0     4</span>
<span class="go">nominal                                            </span>
<span class="go">1999-01-27 19:00:00 1999-01-27 18:56:00  KORD  0.81</span>
<span class="go">1999-01-27 20:00:00 1999-01-27 19:56:00  KORD  0.01</span>
<span class="go">1999-01-27 21:00:00 1999-01-27 20:56:00  KORD -0.59</span>
<span class="go">1999-01-27 21:00:00 1999-01-27 21:18:00  KORD -0.99</span>
<span class="go">1999-01-27 22:00:00 1999-01-27 21:56:00  KORD -0.59</span>
<span class="go">1999-01-27 23:00:00 1999-01-27 22:56:00  KORD -0.59</span>
</pre></div>
</div>
<p><strong>Note</strong>: When passing a dict as the <cite>parse_dates</cite> argument, the order of
the columns prepended is not guaranteed, because <cite>dict</cite> objects do not impose
an ordering on their keys. On Python 2.7+ you may use <cite>collections.OrderedDict</cite>
instead of a regular <cite>dict</cite> if this matters to you. Because of this, when using a
dict for &#8216;parse_dates&#8217; in conjunction with the <cite>index_col</cite> argument, it&#8217;s best to
specify <cite>index_col</cite> as a column label rather then as an index on the resulting frame.</p>
</div>
<div class="section" id="date-parsing-functions">
<h3>Date Parsing Functions<a class="headerlink" href="#date-parsing-functions" title="Permalink to this headline">¶</a></h3>
<p>Finally, the parser allows you can specify a custom <tt class="docutils literal"><span class="pre">date_parser</span></tt> function to
take full advantage of the flexiblity of the date parsing API:</p>
<div class="highlight-ipython"><div class="highlight"><pre><span class="gp">In [61]: </span><span class="kn">import</span> <span class="nn">pandas.io.date_converters</span> <span class="kn">as</span> <span class="nn">conv</span>

<span class="gp">In [62]: </span><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s">&#39;tmp.csv&#39;</span><span class="p">,</span> <span class="n">header</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">parse_dates</span><span class="o">=</span><span class="n">date_spec</span><span class="p">,</span>
<span class="gp">   ....:</span>                  <span class="n">date_parser</span><span class="o">=</span><span class="n">conv</span><span class="o">.</span><span class="n">parse_date_time</span><span class="p">)</span>
<span class="gp">   ....:</span> 

<span class="gp">In [63]: </span><span class="n">df</span>

<span class="go">              nominal              actual     0     4</span>
<span class="go">0 1999-01-27 19:00:00 1999-01-27 18:56:00  KORD  0.81</span>
<span class="go">1 1999-01-27 20:00:00 1999-01-27 19:56:00  KORD  0.01</span>
<span class="go">2 1999-01-27 21:00:00 1999-01-27 20:56:00  KORD -0.59</span>
<span class="go">3 1999-01-27 21:00:00 1999-01-27 21:18:00  KORD -0.99</span>
<span class="go">4 1999-01-27 22:00:00 1999-01-27 21:56:00  KORD -0.59</span>
<span class="go">5 1999-01-27 23:00:00 1999-01-27 22:56:00  KORD -0.59</span>
</pre></div>
</div>
<p>You can explore the date parsing functionality in <tt class="docutils literal"><span class="pre">date_converters.py</span></tt> and
add your own. We would love to turn this module into a community supported set
of date/time parsers. To get you started, <tt class="docutils literal"><span class="pre">date_converters.py</span></tt> contains
functions to parse dual date and time columns, year/month/day columns,
and year/month/day/hour/minute/second columns. It also contains a
<tt class="docutils literal"><span class="pre">generic_parser</span></tt> function so you can curry it with a function that deals with
a single date rather than the entire array.</p>
</div>
<div class="section" id="international-date-formats">
<span id="io-dayfirst"></span><h3>International Date Formats<a class="headerlink" href="#international-date-formats" title="Permalink to this headline">¶</a></h3>
<p>While US date formats tend to be MM/DD/YYYY, many international formats use
DD/MM/YYYY instead. For convenience, a <tt class="docutils literal"><span class="pre">dayfirst</span></tt> keyword is provided:</p>
<div class="highlight-ipython"><div class="highlight"><pre><span class="gp">In [64]: </span><span class="k">print</span><span class="p">(</span><span class="nb">open</span><span class="p">(</span><span class="s">&#39;tmp.csv&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">read</span><span class="p">())</span>
<span class="go">date,value,cat</span>
<span class="go">1/6/2000,5,a</span>
<span class="go">2/6/2000,10,b</span>
<span class="go">3/6/2000,15,c</span>

<span class="gp">In [65]: </span><span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s">&#39;tmp.csv&#39;</span><span class="p">,</span> <span class="n">parse_dates</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>

<span class="go">                 date  value cat</span>
<span class="go">0 2000-01-06 00:00:00      5   a</span>
<span class="go">1 2000-02-06 00:00:00     10   b</span>
<span class="go">2 2000-03-06 00:00:00     15   c</span>

<span class="gp">In [66]: </span><span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s">&#39;tmp.csv&#39;</span><span class="p">,</span> <span class="n">dayfirst</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">parse_dates</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>

<span class="go">                 date  value cat</span>
<span class="go">0 2000-06-01 00:00:00      5   a</span>
<span class="go">1 2000-06-02 00:00:00     10   b</span>
<span class="go">2 2000-06-03 00:00:00     15   c</span>
</pre></div>
</div>
</div>
<div class="section" id="thousand-separators">
<span id="io-thousands"></span><h3>Thousand Separators<a class="headerlink" href="#thousand-separators" title="Permalink to this headline">¶</a></h3>
<p>For large numbers that have been written with a thousands separator, you can
set the <tt class="docutils literal"><span class="pre">thousands</span></tt> keyword to a string of length 1 so that integers will be parsed
correctly:</p>
<p>By default, numbers with a thousands separator will be parsed as strings</p>
<div class="highlight-ipython"><div class="highlight"><pre><span class="gp">In [67]: </span><span class="k">print</span><span class="p">(</span><span class="nb">open</span><span class="p">(</span><span class="s">&#39;tmp.csv&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">read</span><span class="p">())</span>
<span class="go">ID|level|category</span>
<span class="go">Patient1|123,000|x</span>
<span class="go">Patient2|23,000|y</span>
<span class="go">Patient3|1,234,018|z</span>

<span class="gp">In [68]: </span><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s">&#39;tmp.csv&#39;</span><span class="p">,</span> <span class="n">sep</span><span class="o">=</span><span class="s">&#39;|&#39;</span><span class="p">)</span>

<span class="gp">In [69]: </span><span class="n">df</span>

<span class="go">         ID      level category</span>
<span class="go">0  Patient1    123,000        x</span>
<span class="go">1  Patient2     23,000        y</span>
<span class="go">2  Patient3  1,234,018        z</span>

<span class="gp">In [70]: </span><span class="n">df</span><span class="o">.</span><span class="n">level</span><span class="o">.</span><span class="n">dtype</span>
<span class="go">dtype(&#39;O&#39;)</span>
</pre></div>
</div>
<p>The <tt class="docutils literal"><span class="pre">thousands</span></tt> keyword allows integers to be parsed correctly</p>
<div class="highlight-ipython"><div class="highlight"><pre><span class="gp">In [71]: </span><span class="k">print</span><span class="p">(</span><span class="nb">open</span><span class="p">(</span><span class="s">&#39;tmp.csv&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">read</span><span class="p">())</span>
<span class="go">ID|level|category</span>
<span class="go">Patient1|123,000|x</span>
<span class="go">Patient2|23,000|y</span>
<span class="go">Patient3|1,234,018|z</span>

<span class="gp">In [72]: </span><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s">&#39;tmp.csv&#39;</span><span class="p">,</span> <span class="n">sep</span><span class="o">=</span><span class="s">&#39;|&#39;</span><span class="p">,</span> <span class="n">thousands</span><span class="o">=</span><span class="s">&#39;,&#39;</span><span class="p">)</span>

<span class="gp">In [73]: </span><span class="n">df</span>

<span class="go">         ID    level category</span>
<span class="go">0  Patient1   123000        x</span>
<span class="go">1  Patient2    23000        y</span>
<span class="go">2  Patient3  1234018        z</span>

<span class="gp">In [74]: </span><span class="n">df</span><span class="o">.</span><span class="n">level</span><span class="o">.</span><span class="n">dtype</span>
<span class="go">dtype(&#39;int64&#39;)</span>
</pre></div>
</div>
</div>
<div class="section" id="na-values">
<span id="io-na-values"></span><h3>NA Values<a class="headerlink" href="#na-values" title="Permalink to this headline">¶</a></h3>
<p>To control which values are parsed as missing values (which are signified by <tt class="docutils literal"><span class="pre">NaN</span></tt>), specifiy a
list of strings in <tt class="docutils literal"><span class="pre">na_values</span></tt>. If you specify a number (a <tt class="docutils literal"><span class="pre">float</span></tt>, like <tt class="docutils literal"><span class="pre">5.0</span></tt> or an <tt class="docutils literal"><span class="pre">integer</span></tt> like <tt class="docutils literal"><span class="pre">5</span></tt>),
the corresponding equivalent values will also imply a missing value (in this case effectively
<tt class="docutils literal"><span class="pre">[5.0,5]</span></tt> are recognized as <tt class="docutils literal"><span class="pre">NaN</span></tt>.</p>
<p>To completely override the default values that are recognized as missing, specify <tt class="docutils literal"><span class="pre">keep_default_na=False</span></tt>.
The default <tt class="docutils literal"><span class="pre">NaN</span></tt> recognized values are <tt class="docutils literal"><span class="pre">['-1.#IND',</span> <span class="pre">'1.#QNAN',</span> <span class="pre">'1.#IND',</span> <span class="pre">'-1.#QNAN',</span> <span class="pre">'#N/A</span> <span class="pre">N/A',</span> <span class="pre">'NA',</span>
<span class="pre">'#NA',</span> <span class="pre">'NULL',</span> <span class="pre">'NaN',</span> <span class="pre">'nan']</span></tt>.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">read_csv</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="n">na_values</span><span class="o">=</span><span class="p">[</span><span class="mi">5</span><span class="p">])</span>
</pre></div>
</div>
<p>the default values, in addition to <tt class="docutils literal"><span class="pre">5</span></tt> , <tt class="docutils literal"><span class="pre">5.0</span></tt> when interpreted as numbers are recognized as <tt class="docutils literal"><span class="pre">NaN</span></tt></p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">read_csv</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="n">keep_default_na</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span> <span class="n">na_values</span><span class="o">=</span><span class="p">[</span><span class="s">&quot;&quot;</span><span class="p">])</span>
</pre></div>
</div>
<p>only an empty field will be <tt class="docutils literal"><span class="pre">NaN</span></tt></p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">read_csv</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="n">keep_default_na</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span> <span class="n">na_values</span><span class="o">=</span><span class="p">[</span><span class="s">&quot;NA&quot;</span><span class="p">,</span> <span class="s">&quot;0&quot;</span><span class="p">])</span>
</pre></div>
</div>
<p>only <tt class="docutils literal"><span class="pre">NA</span></tt> and <tt class="docutils literal"><span class="pre">0</span></tt> as strings are <tt class="docutils literal"><span class="pre">NaN</span></tt></p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">read_csv</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="n">na_values</span><span class="o">=</span><span class="p">[</span><span class="s">&quot;Nope&quot;</span><span class="p">])</span>
</pre></div>
</div>
<p>the default values, in addition to the string <tt class="docutils literal"><span class="pre">&quot;Nope&quot;</span></tt> are recognized as <tt class="docutils literal"><span class="pre">NaN</span></tt></p>
</div>
<div class="section" id="infinity">
<span id="io-infinity"></span><h3>Infinity<a class="headerlink" href="#infinity" title="Permalink to this headline">¶</a></h3>
<p><tt class="docutils literal"><span class="pre">inf</span></tt> like values will be parsed as <tt class="docutils literal"><span class="pre">np.inf</span></tt> (positive infinity), and <tt class="docutils literal"><span class="pre">-inf</span></tt> as <tt class="docutils literal"><span class="pre">-np.inf</span></tt> (negative infinity).
These will ignore the case of the value, meaning <tt class="docutils literal"><span class="pre">Inf</span></tt>, will also be parsed as <tt class="docutils literal"><span class="pre">np.inf</span></tt>.</p>
</div>
<div class="section" id="comments">
<span id="io-comments"></span><h3>Comments<a class="headerlink" href="#comments" title="Permalink to this headline">¶</a></h3>
<p>Sometimes comments or meta data may be included in a file:</p>
<div class="highlight-ipython"><div class="highlight"><pre><span class="gp">In [75]: </span><span class="k">print</span><span class="p">(</span><span class="nb">open</span><span class="p">(</span><span class="s">&#39;tmp.csv&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">read</span><span class="p">())</span>
<span class="go">ID,level,category</span>
<span class="go">Patient1,123000,x # really unpleasant</span>
<span class="go">Patient2,23000,y # wouldn&#39;t take his medicine</span>
<span class="go">Patient3,1234018,z # awesome</span>
</pre></div>
</div>
<p>By default, the parse includes the comments in the output:</p>
<div class="highlight-ipython"><div class="highlight"><pre><span class="gp">In [76]: </span><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s">&#39;tmp.csv&#39;</span><span class="p">)</span>

<span class="gp">In [77]: </span><span class="n">df</span>

<span class="go">         ID    level                        category</span>
<span class="go">0  Patient1   123000           x # really unpleasant</span>
<span class="go">1  Patient2    23000  y # wouldn&#39;t take his medicine</span>
<span class="go">2  Patient3  1234018                     z # awesome</span>
</pre></div>
</div>
<p>We can suppress the comments using the <tt class="docutils literal"><span class="pre">comment</span></tt> keyword:</p>
<div class="highlight-ipython"><div class="highlight"><pre><span class="gp">In [78]: </span><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s">&#39;tmp.csv&#39;</span><span class="p">,</span> <span class="n">comment</span><span class="o">=</span><span class="s">&#39;#&#39;</span><span class="p">)</span>

<span class="gp">In [79]: </span><span class="n">df</span>

<span class="go">         ID    level category</span>
<span class="go">0  Patient1   123000       x </span>
<span class="go">1  Patient2    23000       y </span>
<span class="go">2  Patient3  1234018       z </span>
</pre></div>
</div>
</div>
<div class="section" id="returning-series">
<h3>Returning Series<a class="headerlink" href="#returning-series" title="Permalink to this headline">¶</a></h3>
<p>Using the <tt class="docutils literal"><span class="pre">squeeze</span></tt> keyword, the parser will return output with a single column
as a <tt class="docutils literal"><span class="pre">Series</span></tt>:</p>
<div class="highlight-ipython"><div class="highlight"><pre><span class="gp">In [80]: </span><span class="k">print</span><span class="p">(</span><span class="nb">open</span><span class="p">(</span><span class="s">&#39;tmp.csv&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">read</span><span class="p">())</span>
<span class="go">level</span>
<span class="go">Patient1,123000</span>
<span class="go">Patient2,23000</span>
<span class="go">Patient3,1234018</span>

<span class="gp">In [81]: </span><span class="n">output</span> <span class="o">=</span>  <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s">&#39;tmp.csv&#39;</span><span class="p">,</span> <span class="n">squeeze</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>

<span class="gp">In [82]: </span><span class="n">output</span>

<span class="go">Patient1     123000</span>
<span class="go">Patient2      23000</span>
<span class="go">Patient3    1234018</span>
<span class="go">Name: level, dtype: int64</span>

<span class="gp">In [83]: </span><span class="nb">type</span><span class="p">(</span><span class="n">output</span><span class="p">)</span>
<span class="go">pandas.core.series.Series</span>
</pre></div>
</div>
</div>
<div class="section" id="boolean-values">
<span id="io-boolean"></span><h3>Boolean values<a class="headerlink" href="#boolean-values" title="Permalink to this headline">¶</a></h3>
<p>The common values <tt class="docutils literal"><span class="pre">True</span></tt>, <tt class="docutils literal"><span class="pre">False</span></tt>, <tt class="docutils literal"><span class="pre">TRUE</span></tt>, and <tt class="docutils literal"><span class="pre">FALSE</span></tt> are all
recognized as boolean. Sometime you would want to recognize some other values
as being boolean. To do this use the <tt class="docutils literal"><span class="pre">true_values</span></tt> and <tt class="docutils literal"><span class="pre">false_values</span></tt>
options:</p>
<div class="highlight-ipython"><div class="highlight"><pre><span class="gp">In [84]: </span><span class="n">data</span><span class="o">=</span> <span class="s">&#39;a,b,c</span><span class="se">\n</span><span class="s">1,Yes,2</span><span class="se">\n</span><span class="s">3,No,4&#39;</span>

<span class="gp">In [85]: </span><span class="k">print</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
<span class="go">a,b,c</span>
<span class="go">1,Yes,2</span>
<span class="go">3,No,4</span>

<span class="gp">In [86]: </span><span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">StringIO</span><span class="p">(</span><span class="n">data</span><span class="p">))</span>

<span class="go">   a    b  c</span>
<span class="go">0  1  Yes  2</span>
<span class="go">1  3   No  4</span>

<span class="gp">In [87]: </span><span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">StringIO</span><span class="p">(</span><span class="n">data</span><span class="p">),</span> <span class="n">true_values</span><span class="o">=</span><span class="p">[</span><span class="s">&#39;Yes&#39;</span><span class="p">],</span> <span class="n">false_values</span><span class="o">=</span><span class="p">[</span><span class="s">&#39;No&#39;</span><span class="p">])</span>

<span class="go">   a      b  c</span>
<span class="go">0  1   True  2</span>
<span class="go">1  3  False  4</span>
</pre></div>
</div>
</div>
<div class="section" id="handling-bad-lines">
<span id="io-bad-lines"></span><h3>Handling &#8220;bad&#8221; lines<a class="headerlink" href="#handling-bad-lines" title="Permalink to this headline">¶</a></h3>
<p>Some files may have malformed lines with too few fields or too many. Lines with
too few fields will have NA values filled in the trailing fields. Lines with
too many will cause an error by default:</p>
<div class="highlight-ipython"><div class="highlight"><pre><span class="gp">In [27]: </span><span class="n">data</span> <span class="o">=</span> <span class="s">&#39;a,b,c</span><span class="se">\n</span><span class="s">1,2,3</span><span class="se">\n</span><span class="s">4,5,6,7</span><span class="se">\n</span><span class="s">8,9,10&#39;</span>

<span class="gp">In [28]: </span><span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">StringIO</span><span class="p">(</span><span class="n">data</span><span class="p">))</span>
<span class="go">---------------------------------------------------------------------------</span>
<span class="go">CParserError                              Traceback (most recent call last)</span>
<span class="go">CParserError: Error tokenizing data. C error: Expected 3 fields in line 3, saw 4</span>
</pre></div>
</div>
<p>You can elect to skip bad lines:</p>
<div class="highlight-ipython"><div class="highlight"><pre><span class="gp">In [29]: </span><span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">StringIO</span><span class="p">(</span><span class="n">data</span><span class="p">),</span> <span class="n">error_bad_lines</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
<span class="go">Skipping line 3: expected 3 fields, saw 4</span>

<span class="go">Out[29]:</span>
<span class="go">   a  b   c</span>
<span class="go">0  1  2   3</span>
<span class="go">1  8  9  10</span>
</pre></div>
</div>
</div>
<div class="section" id="quoting-and-escape-characters">
<span id="io-quoting"></span><h3>Quoting and Escape Characters<a class="headerlink" href="#quoting-and-escape-characters" title="Permalink to this headline">¶</a></h3>
<p>Quotes (and other escape characters) in embedded fields can be handled in any
number of ways. One way is to use backslashes; to properly parse this data, you
should pass the <tt class="docutils literal"><span class="pre">escapechar</span></tt> option:</p>
<div class="highlight-ipython"><div class="highlight"><pre><span class="gp">In [88]: </span><span class="n">data</span> <span class="o">=</span> <span class="s">&#39;a,b</span><span class="se">\n</span><span class="s">&quot;hello, </span><span class="se">\\</span><span class="s">&quot;Bob</span><span class="se">\\</span><span class="s">&quot;, nice to see you&quot;,5&#39;</span>

<span class="gp">In [89]: </span><span class="k">print</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
<span class="go">a,b</span>
<span class="go">&quot;hello, \&quot;Bob\&quot;, nice to see you&quot;,5</span>

<span class="gp">In [90]: </span><span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">StringIO</span><span class="p">(</span><span class="n">data</span><span class="p">),</span> <span class="n">escapechar</span><span class="o">=</span><span class="s">&#39;</span><span class="se">\\</span><span class="s">&#39;</span><span class="p">)</span>

<span class="go">                               a  b</span>
<span class="go">0  hello, &quot;Bob&quot;, nice to see you  5</span>
</pre></div>
</div>
</div>
<div class="section" id="files-with-fixed-width-columns">
<span id="io-fwf"></span><h3>Files with Fixed Width Columns<a class="headerlink" href="#files-with-fixed-width-columns" title="Permalink to this headline">¶</a></h3>
<p>While <tt class="docutils literal"><span class="pre">read_csv</span></tt> reads delimited data, the <a class="reference internal" href="generated/pandas.io.parsers.read_fwf.html#pandas.io.parsers.read_fwf" title="pandas.io.parsers.read_fwf"><tt class="xref py py-func docutils literal"><span class="pre">read_fwf()</span></tt></a>
function works with data files that have known and fixed column widths.
The function parameters to <tt class="docutils literal"><span class="pre">read_fwf</span></tt> are largely the same as <cite>read_csv</cite> with
two extra parameters:</p>
<blockquote>
<div><ul class="simple">
<li><tt class="docutils literal"><span class="pre">colspecs</span></tt>: A list of pairs (tuples) giving the extents of the
fixed-width fields of each line as half-open intervals (i.e.,  [from, to[ ).
String value &#8216;infer&#8217; can be used to instruct the parser to try detecting
the column specifications from the first 100 rows of the data. Default
behaviour, if not specified, is to infer.</li>
<li><tt class="docutils literal"><span class="pre">widths</span></tt>: A list of field widths which can be used instead of &#8216;colspecs&#8217;
if the intervals are contiguous.</li>
</ul>
</div></blockquote>
<p>Consider a typical fixed-width data file:</p>
<div class="highlight-ipython"><div class="highlight"><pre><span class="gp">In [91]: </span><span class="k">print</span><span class="p">(</span><span class="nb">open</span><span class="p">(</span><span class="s">&#39;bar.csv&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">read</span><span class="p">())</span>
<span class="go">id8141    360.242940   149.910199   11950.7</span>
<span class="go">id1594    444.953632   166.985655   11788.4</span>
<span class="go">id1849    364.136849   183.628767   11806.2</span>
<span class="go">id1230    413.836124   184.375703   11916.8</span>
<span class="go">id1948    502.953953   173.237159   12468.3</span>
</pre></div>
</div>
<p>In order to parse this file into a DataFrame, we simply need to supply the
column specifications to the <cite>read_fwf</cite> function along with the file name:</p>
<div class="highlight-ipython"><div class="highlight"><pre><span class="c">#Column specifications are a list of half-intervals</span>
<span class="gp">In [92]: </span><span class="n">colspecs</span> <span class="o">=</span> <span class="p">[(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">6</span><span class="p">),</span> <span class="p">(</span><span class="mi">8</span><span class="p">,</span> <span class="mi">20</span><span class="p">),</span> <span class="p">(</span><span class="mi">21</span><span class="p">,</span> <span class="mi">33</span><span class="p">),</span> <span class="p">(</span><span class="mi">34</span><span class="p">,</span> <span class="mi">43</span><span class="p">)]</span>

<span class="gp">In [93]: </span><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_fwf</span><span class="p">(</span><span class="s">&#39;bar.csv&#39;</span><span class="p">,</span> <span class="n">colspecs</span><span class="o">=</span><span class="n">colspecs</span><span class="p">,</span> <span class="n">header</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">index_col</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>

<span class="gp">In [94]: </span><span class="n">df</span>

<span class="go">                 1           2        3</span>
<span class="go">0                                      </span>
<span class="go">id8141  360.242940  149.910199  11950.7</span>
<span class="go">id1594  444.953632  166.985655  11788.4</span>
<span class="go">id1849  364.136849  183.628767  11806.2</span>
<span class="go">id1230  413.836124  184.375703  11916.8</span>
<span class="go">id1948  502.953953  173.237159  12468.3</span>
</pre></div>
</div>
<p>Note how the parser automatically picks column names X.&lt;column number&gt; when
<tt class="docutils literal"><span class="pre">header=None</span></tt> argument is specified. Alternatively, you can supply just the
column widths for contiguous columns:</p>
<div class="highlight-ipython"><div class="highlight"><pre><span class="c">#Widths are a list of integers</span>
<span class="gp">In [95]: </span><span class="n">widths</span> <span class="o">=</span> <span class="p">[</span><span class="mi">6</span><span class="p">,</span> <span class="mi">14</span><span class="p">,</span> <span class="mi">13</span><span class="p">,</span> <span class="mi">10</span><span class="p">]</span>

<span class="gp">In [96]: </span><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_fwf</span><span class="p">(</span><span class="s">&#39;bar.csv&#39;</span><span class="p">,</span> <span class="n">widths</span><span class="o">=</span><span class="n">widths</span><span class="p">,</span> <span class="n">header</span><span class="o">=</span><span class="bp">None</span><span class="p">)</span>

<span class="gp">In [97]: </span><span class="n">df</span>

<span class="go">        0           1           2        3</span>
<span class="go">0  id8141  360.242940  149.910199  11950.7</span>
<span class="go">1  id1594  444.953632  166.985655  11788.4</span>
<span class="go">2  id1849  364.136849  183.628767  11806.2</span>
<span class="go">3  id1230  413.836124  184.375703  11916.8</span>
<span class="go">4  id1948  502.953953  173.237159  12468.3</span>
</pre></div>
</div>
<p>The parser will take care of extra white spaces around the columns
so it&#8217;s ok to have extra separation between the columns in the file.</p>
<div class="versionadded">
<p><span>New in version 0.13.0.</span></p>
</div>
<p>By default, <tt class="docutils literal"><span class="pre">read_fwf</span></tt> will try to infer the file&#8217;s <tt class="docutils literal"><span class="pre">colspecs</span></tt> by using the
first 100 rows of the file. It can do it only in cases when the columns are
aligned and correctly separated by the provided <tt class="docutils literal"><span class="pre">delimiter</span></tt> (default delimiter
is whitespace).</p>
<div class="highlight-ipython"><div class="highlight"><pre><span class="gp">In [98]: </span><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_fwf</span><span class="p">(</span><span class="s">&#39;bar.csv&#39;</span><span class="p">,</span> <span class="n">header</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">index_col</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>

<span class="gp">In [99]: </span><span class="n">df</span>

<span class="go">                 1           2        3</span>
<span class="go">0                                      </span>
<span class="go">id8141  360.242940  149.910199  11950.7</span>
<span class="go">id1594  444.953632  166.985655  11788.4</span>
<span class="go">id1849  364.136849  183.628767  11806.2</span>
<span class="go">id1230  413.836124  184.375703  11916.8</span>
<span class="go">id1948  502.953953  173.237159  12468.3</span>
</pre></div>
</div>
</div>
<div class="section" id="files-with-an-implicit-index-column">
<h3>Files with an &#8220;implicit&#8221; index column<a class="headerlink" href="#files-with-an-implicit-index-column" title="Permalink to this headline">¶</a></h3>
<p>Consider a file with one less entry in the header than the number of data
column:</p>
<div class="highlight-ipython"><div class="highlight"><pre><span class="gp">In [100]: </span><span class="k">print</span><span class="p">(</span><span class="nb">open</span><span class="p">(</span><span class="s">&#39;foo.csv&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">read</span><span class="p">())</span>
<span class="go">A,B,C</span>
<span class="go">20090101,a,1,2</span>
<span class="go">20090102,b,3,4</span>
<span class="go">20090103,c,4,5</span>
</pre></div>
</div>
<p>In this special case, <tt class="docutils literal"><span class="pre">read_csv</span></tt> assumes that the first column is to be used
as the index of the DataFrame:</p>
<div class="highlight-ipython"><div class="highlight"><pre><span class="gp">In [101]: </span><span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s">&#39;foo.csv&#39;</span><span class="p">)</span>

<span class="go">          A  B  C</span>
<span class="go">20090101  a  1  2</span>
<span class="go">20090102  b  3  4</span>
<span class="go">20090103  c  4  5</span>
</pre></div>
</div>
<p>Note that the dates weren&#8217;t automatically parsed. In that case you would need
to do as before:</p>
<div class="highlight-ipython"><div class="highlight"><pre><span class="gp">In [102]: </span><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s">&#39;foo.csv&#39;</span><span class="p">,</span> <span class="n">parse_dates</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>

<span class="gp">In [103]: </span><span class="n">df</span><span class="o">.</span><span class="n">index</span>

<span class="go">&lt;class &#39;pandas.tseries.index.DatetimeIndex&#39;&gt;</span>
<span class="go">[2009-01-01 00:00:00, ..., 2009-01-03 00:00:00]</span>
<span class="go">Length: 3, Freq: None, Timezone: None</span>
</pre></div>
</div>
</div>
<div class="section" id="reading-an-index-with-a-multiindex">
<h3>Reading an index with a <tt class="docutils literal"><span class="pre">MultiIndex</span></tt><a class="headerlink" href="#reading-an-index-with-a-multiindex" title="Permalink to this headline">¶</a></h3>
<p id="io-csv-multiindex">Suppose you have data indexed by two columns:</p>
<div class="highlight-ipython"><div class="highlight"><pre><span class="gp">In [104]: </span><span class="k">print</span><span class="p">(</span><span class="nb">open</span><span class="p">(</span><span class="s">&#39;data/mindex_ex.csv&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">read</span><span class="p">())</span>
<span class="go">year,indiv,zit,xit</span>
<span class="go">1977,&quot;A&quot;,1.2,.6</span>
<span class="go">1977,&quot;B&quot;,1.5,.5</span>
<span class="go">1977,&quot;C&quot;,1.7,.8</span>
<span class="go">1978,&quot;A&quot;,.2,.06</span>
<span class="go">1978,&quot;B&quot;,.7,.2</span>
<span class="go">1978,&quot;C&quot;,.8,.3</span>
<span class="go">1978,&quot;D&quot;,.9,.5</span>
<span class="go">1978,&quot;E&quot;,1.4,.9</span>
<span class="go">1979,&quot;C&quot;,.2,.15</span>
<span class="go">1979,&quot;D&quot;,.14,.05</span>
<span class="go">1979,&quot;E&quot;,.5,.15</span>
<span class="go">1979,&quot;F&quot;,1.2,.5</span>
<span class="go">1979,&quot;G&quot;,3.4,1.9</span>
<span class="go">1979,&quot;H&quot;,5.4,2.7</span>
<span class="go">1979,&quot;I&quot;,6.4,1.2</span>
</pre></div>
</div>
<p>The <tt class="docutils literal"><span class="pre">index_col</span></tt> argument to <tt class="docutils literal"><span class="pre">read_csv</span></tt> and <tt class="docutils literal"><span class="pre">read_table</span></tt> can take a list of
column numbers to turn multiple columns into a <tt class="docutils literal"><span class="pre">MultiIndex</span></tt> for the index of the
returned object:</p>
<div class="highlight-ipython"><div class="highlight"><pre><span class="gp">In [105]: </span><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s">&quot;data/mindex_ex.csv&quot;</span><span class="p">,</span> <span class="n">index_col</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">])</span>

<span class="gp">In [106]: </span><span class="n">df</span>

<span class="go">             zit   xit</span>
<span class="go">year indiv            </span>
<span class="go">1977 A      1.20  0.60</span>
<span class="go">     B      1.50  0.50</span>
<span class="go">     C      1.70  0.80</span>
<span class="go">1978 A      0.20  0.06</span>
<span class="go">     B      0.70  0.20</span>
<span class="go">     C      0.80  0.30</span>
<span class="go">     D      0.90  0.50</span>
<span class="go">     E      1.40  0.90</span>
<span class="go">1979 C      0.20  0.15</span>
<span class="go">     D      0.14  0.05</span>
<span class="go">     E      0.50  0.15</span>
<span class="go">     F      1.20  0.50</span>
<span class="go">     G      3.40  1.90</span>
<span class="go">     H      5.40  2.70</span>
<span class="go">     I      6.40  1.20</span>

<span class="gp">In [107]: </span><span class="n">df</span><span class="o">.</span><span class="n">ix</span><span class="p">[</span><span class="mi">1978</span><span class="p">]</span>

<span class="go">       zit   xit</span>
<span class="go">indiv           </span>
<span class="go">A      0.2  0.06</span>
<span class="go">B      0.7  0.20</span>
<span class="go">C      0.8  0.30</span>
<span class="go">D      0.9  0.50</span>
<span class="go">E      1.4  0.90</span>
</pre></div>
</div>
</div>
<div class="section" id="reading-columns-with-a-multiindex">
<span id="io-multi-index-columns"></span><h3>Reading columns with a <tt class="docutils literal"><span class="pre">MultiIndex</span></tt><a class="headerlink" href="#reading-columns-with-a-multiindex" title="Permalink to this headline">¶</a></h3>
<p>By specifying list of row locations for the <tt class="docutils literal"><span class="pre">header</span></tt> argument, you
can read in a <tt class="docutils literal"><span class="pre">MultiIndex</span></tt> for the columns. Specifying non-consecutive
rows will skip the interveaning rows. In order to have the pre-0.13 behavior
of tupleizing columns, specify <tt class="docutils literal"><span class="pre">tupleize_cols=True</span></tt>.</p>
<div class="highlight-ipython"><div class="highlight"><pre><span class="gp">In [108]: </span><span class="kn">from</span> <span class="nn">pandas.util.testing</span> <span class="kn">import</span> <span class="n">makeCustomDataframe</span> <span class="k">as</span> <span class="n">mkdf</span>

<span class="gp">In [109]: </span><span class="n">df</span> <span class="o">=</span> <span class="n">mkdf</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="n">r_idx_nlevels</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span><span class="n">c_idx_nlevels</span><span class="o">=</span><span class="mi">4</span><span class="p">)</span>

<span class="gp">In [110]: </span><span class="n">df</span><span class="o">.</span><span class="n">to_csv</span><span class="p">(</span><span class="s">&#39;mi.csv&#39;</span><span class="p">)</span>

<span class="gp">In [111]: </span><span class="k">print</span><span class="p">(</span><span class="nb">open</span><span class="p">(</span><span class="s">&#39;mi.csv&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">read</span><span class="p">())</span>
<span class="go">C0,,C_l0_g0,C_l0_g1,C_l0_g2</span>
<span class="go">C1,,C_l1_g0,C_l1_g1,C_l1_g2</span>
<span class="go">C2,,C_l2_g0,C_l2_g1,C_l2_g2</span>
<span class="go">C3,,C_l3_g0,C_l3_g1,C_l3_g2</span>
<span class="go">R0,R1,,,</span>
<span class="go">R_l0_g0,R_l1_g0,R0C0,R0C1,R0C2</span>
<span class="go">R_l0_g1,R_l1_g1,R1C0,R1C1,R1C2</span>
<span class="go">R_l0_g2,R_l1_g2,R2C0,R2C1,R2C2</span>
<span class="go">R_l0_g3,R_l1_g3,R3C0,R3C1,R3C2</span>
<span class="go">R_l0_g4,R_l1_g4,R4C0,R4C1,R4C2</span>

<span class="gp">In [112]: </span><span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s">&#39;mi.csv&#39;</span><span class="p">,</span><span class="n">header</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">],</span><span class="n">index_col</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">])</span>

<span class="go">C0              C_l0_g0 C_l0_g1 C_l0_g2</span>
<span class="go">C1              C_l1_g0 C_l1_g1 C_l1_g2</span>
<span class="go">C2              C_l2_g0 C_l2_g1 C_l2_g2</span>
<span class="go">C3              C_l3_g0 C_l3_g1 C_l3_g2</span>
<span class="go">R0      R1                             </span>
<span class="go">R_l0_g0 R_l1_g0    R0C0    R0C1    R0C2</span>
<span class="go">R_l0_g1 R_l1_g1    R1C0    R1C1    R1C2</span>
<span class="go">R_l0_g2 R_l1_g2    R2C0    R2C1    R2C2</span>
<span class="go">R_l0_g3 R_l1_g3    R3C0    R3C1    R3C2</span>
<span class="go">R_l0_g4 R_l1_g4    R4C0    R4C1    R4C2</span>
</pre></div>
</div>
<p>Note: If an <tt class="docutils literal"><span class="pre">index_col</span></tt> is not specified (e.g. you don&#8217;t have an index, or wrote it
with <tt class="docutils literal"><span class="pre">df.to_csv(...,</span> <span class="pre">index=False</span></tt>), then any <tt class="docutils literal"><span class="pre">names</span></tt> on the columns index will be <em>lost</em>.</p>
</div>
<div class="section" id="automatically-sniffing-the-delimiter">
<span id="io-sniff"></span><h3>Automatically &#8220;sniffing&#8221; the delimiter<a class="headerlink" href="#automatically-sniffing-the-delimiter" title="Permalink to this headline">¶</a></h3>
<p><tt class="docutils literal"><span class="pre">read_csv</span></tt> is capable of inferring delimited (not necessarily
comma-separated) files. YMMV, as pandas uses the <a class="reference external" href="http://docs.python.org/library/csv.html#csv.Sniffer" title="(in Python v2.7)"><tt class="docutils literal"><span class="pre">csv.Sniffer</span></tt></a>
class of the csv module.</p>
<div class="highlight-ipython"><div class="highlight"><pre><span class="gp">In [113]: </span><span class="k">print</span><span class="p">(</span><span class="nb">open</span><span class="p">(</span><span class="s">&#39;tmp2.sv&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">read</span><span class="p">())</span>
<span class="go">:0:1:2:3</span>
<span class="go">0:0.4691122999071863:-0.2828633443286633:-1.5090585031735124:-1.1356323710171934</span>
<span class="go">1:1.2121120250208506:-0.17321464905330858:0.11920871129693428:-1.0442359662799567</span>
<span class="go">2:-0.8618489633477999:-2.1045692188948086:-0.4949292740687813:1.071803807037338</span>
<span class="go">3:0.7215551622443669:-0.7067711336300845:-1.0395749851146963:0.27185988554282986</span>
<span class="go">4:-0.42497232978883753:0.567020349793672:0.27623201927771873:-1.0874006912859915</span>
<span class="go">5:-0.6736897080883706:0.1136484096888855:-1.4784265524372235:0.5249876671147047</span>
<span class="go">6:0.4047052186802365:0.5770459859204836:-1.7150020161146375:-1.0392684835147725</span>
<span class="go">7:-0.3706468582364464:-1.1578922506419993:-1.344311812731667:0.8448851414248841</span>
<span class="go">8:1.0757697837155533:-0.10904997528022223:1.6435630703622064:-1.4693879595399115</span>
<span class="go">9:0.35702056413309086:-0.6746001037299882:-1.776903716971867:-0.9689138124473498</span>

<span class="gp">In [114]: </span><span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s">&#39;tmp2.sv&#39;</span><span class="p">)</span>

<span class="go">                                            :0:1:2:3</span>
<span class="go">0  0:0.4691122999071863:-0.2828633443286633:-1.50...</span>
<span class="go">1  1:1.2121120250208506:-0.17321464905330858:0.11...</span>
<span class="go">2  2:-0.8618489633477999:-2.1045692188948086:-0.4...</span>
<span class="go">3  3:0.7215551622443669:-0.7067711336300845:-1.03...</span>
<span class="go">4  4:-0.42497232978883753:0.567020349793672:0.276...</span>
<span class="go">5  5:-0.6736897080883706:0.1136484096888855:-1.47...</span>
<span class="go">6  6:0.4047052186802365:0.5770459859204836:-1.715...</span>
<span class="go">7  7:-0.3706468582364464:-1.1578922506419993:-1.3...</span>
<span class="go">8  8:1.0757697837155533:-0.10904997528022223:1.64...</span>
<span class="go">9  9:0.35702056413309086:-0.6746001037299882:-1.7...</span>
</pre></div>
</div>
</div>
<div class="section" id="iterating-through-files-chunk-by-chunk">
<span id="io-chunking"></span><h3>Iterating through files chunk by chunk<a class="headerlink" href="#iterating-through-files-chunk-by-chunk" title="Permalink to this headline">¶</a></h3>
<p>Suppose you wish to iterate through a (potentially very large) file lazily
rather than reading the entire file into memory, such as the following:</p>
<div class="highlight-ipython"><div class="highlight"><pre><span class="gp">In [115]: </span><span class="k">print</span><span class="p">(</span><span class="nb">open</span><span class="p">(</span><span class="s">&#39;tmp.sv&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">read</span><span class="p">())</span>
<span class="go">|0|1|2|3</span>
<span class="go">0|0.4691122999071863|-0.2828633443286633|-1.5090585031735124|-1.1356323710171934</span>
<span class="go">1|1.2121120250208506|-0.17321464905330858|0.11920871129693428|-1.0442359662799567</span>
<span class="go">2|-0.8618489633477999|-2.1045692188948086|-0.4949292740687813|1.071803807037338</span>
<span class="go">3|0.7215551622443669|-0.7067711336300845|-1.0395749851146963|0.27185988554282986</span>
<span class="go">4|-0.42497232978883753|0.567020349793672|0.27623201927771873|-1.0874006912859915</span>
<span class="go">5|-0.6736897080883706|0.1136484096888855|-1.4784265524372235|0.5249876671147047</span>
<span class="go">6|0.4047052186802365|0.5770459859204836|-1.7150020161146375|-1.0392684835147725</span>
<span class="go">7|-0.3706468582364464|-1.1578922506419993|-1.344311812731667|0.8448851414248841</span>
<span class="go">8|1.0757697837155533|-0.10904997528022223|1.6435630703622064|-1.4693879595399115</span>
<span class="go">9|0.35702056413309086|-0.6746001037299882|-1.776903716971867|-0.9689138124473498</span>

<span class="gp">In [116]: </span><span class="n">table</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_table</span><span class="p">(</span><span class="s">&#39;tmp.sv&#39;</span><span class="p">,</span> <span class="n">sep</span><span class="o">=</span><span class="s">&#39;|&#39;</span><span class="p">)</span>

<span class="gp">In [117]: </span><span class="n">table</span>

<span class="go">   Unnamed: 0         0         1         2         3</span>
<span class="go">0           0  0.469112 -0.282863 -1.509059 -1.135632</span>
<span class="go">1           1  1.212112 -0.173215  0.119209 -1.044236</span>
<span class="go">2           2 -0.861849 -2.104569 -0.494929  1.071804</span>
<span class="go">3           3  0.721555 -0.706771 -1.039575  0.271860</span>
<span class="go">4           4 -0.424972  0.567020  0.276232 -1.087401</span>
<span class="go">5           5 -0.673690  0.113648 -1.478427  0.524988</span>
<span class="go">6           6  0.404705  0.577046 -1.715002 -1.039268</span>
<span class="go">7           7 -0.370647 -1.157892 -1.344312  0.844885</span>
<span class="go">8           8  1.075770 -0.109050  1.643563 -1.469388</span>
<span class="go">9           9  0.357021 -0.674600 -1.776904 -0.968914</span>
</pre></div>
</div>
<p>By specifiying a <tt class="docutils literal"><span class="pre">chunksize</span></tt> to <tt class="docutils literal"><span class="pre">read_csv</span></tt> or <tt class="docutils literal"><span class="pre">read_table</span></tt>, the return
value will be an iterable object of type <tt class="docutils literal"><span class="pre">TextFileReader</span></tt>:</p>
<div class="highlight-ipython"><div class="highlight"><pre><span class="gp">In [118]: </span><span class="n">reader</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_table</span><span class="p">(</span><span class="s">&#39;tmp.sv&#39;</span><span class="p">,</span> <span class="n">sep</span><span class="o">=</span><span class="s">&#39;|&#39;</span><span class="p">,</span> <span class="n">chunksize</span><span class="o">=</span><span class="mi">4</span><span class="p">)</span>

<span class="gp">In [119]: </span><span class="n">reader</span>
<span class="go">&lt;pandas.io.parsers.TextFileReader at 0x1168e9450&gt;</span>

<span class="gp">In [120]: </span><span class="k">for</span> <span class="n">chunk</span> <span class="ow">in</span> <span class="n">reader</span><span class="p">:</span>
<span class="gp">   .....:</span>     <span class="k">print</span><span class="p">(</span><span class="n">chunk</span><span class="p">)</span>
<span class="gp">   .....:</span> 
<span class="go">   Unnamed: 0         0         1         2         3</span>
<span class="go">0           0  0.469112 -0.282863 -1.509059 -1.135632</span>
<span class="go">1           1  1.212112 -0.173215  0.119209 -1.044236</span>
<span class="go">2           2 -0.861849 -2.104569 -0.494929  1.071804</span>
<span class="go">3           3  0.721555 -0.706771 -1.039575  0.271860</span>
<span class="go">   Unnamed: 0         0         1         2         3</span>
<span class="go">0           4 -0.424972  0.567020  0.276232 -1.087401</span>
<span class="go">1           5 -0.673690  0.113648 -1.478427  0.524988</span>
<span class="go">2           6  0.404705  0.577046 -1.715002 -1.039268</span>
<span class="go">3           7 -0.370647 -1.157892 -1.344312  0.844885</span>
<span class="go">   Unnamed: 0         0        1         2         3</span>
<span class="go">0           8  1.075770 -0.10905  1.643563 -1.469388</span>
<span class="go">1           9  0.357021 -0.67460 -1.776904 -0.968914</span>
</pre></div>
</div>
<p>Specifying <tt class="docutils literal"><span class="pre">iterator=True</span></tt> will also return the <tt class="docutils literal"><span class="pre">TextFileReader</span></tt> object:</p>
<div class="highlight-ipython"><div class="highlight"><pre><span class="gp">In [121]: </span><span class="n">reader</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_table</span><span class="p">(</span><span class="s">&#39;tmp.sv&#39;</span><span class="p">,</span> <span class="n">sep</span><span class="o">=</span><span class="s">&#39;|&#39;</span><span class="p">,</span> <span class="n">iterator</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>

<span class="gp">In [122]: </span><span class="n">reader</span><span class="o">.</span><span class="n">get_chunk</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>

<span class="go">   Unnamed: 0         0         1         2         3</span>
<span class="go">0           0  0.469112 -0.282863 -1.509059 -1.135632</span>
<span class="go">1           1  1.212112 -0.173215  0.119209 -1.044236</span>
<span class="go">2           2 -0.861849 -2.104569 -0.494929  1.071804</span>
<span class="go">3           3  0.721555 -0.706771 -1.039575  0.271860</span>
<span class="go">4           4 -0.424972  0.567020  0.276232 -1.087401</span>
</pre></div>
</div>
</div>
<div class="section" id="writing-to-csv-format">
<h3>Writing to CSV format<a class="headerlink" href="#writing-to-csv-format" title="Permalink to this headline">¶</a></h3>
<p id="io-store-in-csv">The Series and DataFrame objects have an instance method <tt class="docutils literal"><span class="pre">to_csv</span></tt> which
allows storing the contents of the object as a comma-separated-values file. The
function takes a number of arguments. Only the first is required.</p>
<blockquote>
<div><ul class="simple">
<li><tt class="docutils literal"><span class="pre">path</span></tt>: A string path to the file to write</li>
<li><tt class="docutils literal"><span class="pre">na_rep</span></tt>: A string representation of a missing value (default &#8216;&#8217;)</li>
<li><tt class="docutils literal"><span class="pre">cols</span></tt>: Columns to write (default None)</li>
<li><tt class="docutils literal"><span class="pre">header</span></tt>: Whether to write out the column names (default True)</li>
<li><tt class="docutils literal"><span class="pre">index</span></tt>: whether to write row (index) names (default True)</li>
<li><tt class="docutils literal"><span class="pre">index_label</span></tt>: Column label(s) for index column(s) if desired. If None
(default), and <cite>header</cite> and <cite>index</cite> are True, then the index names are
used. (A sequence should be given if the DataFrame uses MultiIndex).</li>
<li><tt class="docutils literal"><span class="pre">mode</span></tt> : Python write mode, default &#8216;w&#8217;</li>
<li><tt class="docutils literal"><span class="pre">sep</span></tt> : Field delimiter for the output file (default &#8221;,&#8221;)</li>
<li><tt class="docutils literal"><span class="pre">encoding</span></tt>: a string representing the encoding to use if the contents are
non-ascii, for python versions prior to 3</li>
<li><tt class="docutils literal"><span class="pre">tupleize_cols</span></tt>: boolean, default False, if False, write as a list of tuples,
otherwise write in an expanded line format suitable for <tt class="docutils literal"><span class="pre">read_csv</span></tt></li>
</ul>
</div></blockquote>
</div>
<div class="section" id="writing-a-formatted-string">
<h3>Writing a formatted string<a class="headerlink" href="#writing-a-formatted-string" title="Permalink to this headline">¶</a></h3>
<p id="io-formatting">The DataFrame object has an instance method <tt class="docutils literal"><span class="pre">to_string</span></tt> which allows control
over the string representation of the object. All arguments are optional:</p>
<blockquote>
<div><ul class="simple">
<li><tt class="docutils literal"><span class="pre">buf</span></tt> default None, for example a StringIO object</li>
<li><tt class="docutils literal"><span class="pre">columns</span></tt> default None, which columns to write</li>
<li><tt class="docutils literal"><span class="pre">col_space</span></tt> default None, minimum width of each column.</li>
<li><tt class="docutils literal"><span class="pre">na_rep</span></tt> default <tt class="docutils literal"><span class="pre">NaN</span></tt>, representation of NA value</li>
<li><tt class="docutils literal"><span class="pre">formatters</span></tt> default None, a dictionary (by column) of functions each of
which takes a single argument and returns a formatted string</li>
<li><tt class="docutils literal"><span class="pre">float_format</span></tt> default None, a function which takes a single (float)
argument and returns a formatted string; to be applied to floats in the
DataFrame.</li>
<li><tt class="docutils literal"><span class="pre">sparsify</span></tt> default True, set to False for a DataFrame with a hierarchical
index to print every multiindex key at each row.</li>
<li><tt class="docutils literal"><span class="pre">index_names</span></tt> default True, will print the names of the indices</li>
<li><tt class="docutils literal"><span class="pre">index</span></tt> default True, will print the index (ie, row labels)</li>
<li><tt class="docutils literal"><span class="pre">header</span></tt> default True, will print the column labels</li>
<li><tt class="docutils literal"><span class="pre">justify</span></tt> default <tt class="docutils literal"><span class="pre">left</span></tt>, will print column headers left- or
right-justified</li>
</ul>
</div></blockquote>
<p>The Series object also has a <tt class="docutils literal"><span class="pre">to_string</span></tt> method, but with only the <tt class="docutils literal"><span class="pre">buf</span></tt>,
<tt class="docutils literal"><span class="pre">na_rep</span></tt>, <tt class="docutils literal"><span class="pre">float_format</span></tt> arguments. There is also a <tt class="docutils literal"><span class="pre">length</span></tt> argument
which, if set to <tt class="docutils literal"><span class="pre">True</span></tt>, will additionally output the length of the Series.</p>
</div>
</div>
<div class="section" id="json">
<h2>JSON<a class="headerlink" href="#json" title="Permalink to this headline">¶</a></h2>
<p>Read and write <tt class="docutils literal"><span class="pre">JSON</span></tt> format files.</p>
<div class="section" id="writing-json">
<span id="io-json"></span><h3>Writing JSON<a class="headerlink" href="#writing-json" title="Permalink to this headline">¶</a></h3>
<p>A <tt class="docutils literal"><span class="pre">Series</span></tt> or <tt class="docutils literal"><span class="pre">DataFrame</span></tt> can be converted to a valid JSON string. Use <tt class="docutils literal"><span class="pre">to_json</span></tt>
with optional parameters:</p>
<ul>
<li><p class="first"><tt class="docutils literal"><span class="pre">path_or_buf</span></tt> : the pathname or buffer to write the output
This can be <tt class="docutils literal"><span class="pre">None</span></tt> in which case a JSON string is returned</p>
</li>
<li><p class="first"><tt class="docutils literal"><span class="pre">orient</span></tt> :</p>
<dl class="docutils">
<dt>Series :</dt>
<dd><ul class="first last simple">
<li>default is <tt class="docutils literal"><span class="pre">index</span></tt></li>
<li>allowed values are {<tt class="docutils literal"><span class="pre">split</span></tt>, <tt class="docutils literal"><span class="pre">records</span></tt>, <tt class="docutils literal"><span class="pre">index</span></tt>}</li>
</ul>
</dd>
<dt>DataFrame</dt>
<dd><ul class="first last simple">
<li>default is <tt class="docutils literal"><span class="pre">columns</span></tt></li>
<li>allowed values are {<tt class="docutils literal"><span class="pre">split</span></tt>, <tt class="docutils literal"><span class="pre">records</span></tt>, <tt class="docutils literal"><span class="pre">index</span></tt>, <tt class="docutils literal"><span class="pre">columns</span></tt>, <tt class="docutils literal"><span class="pre">values</span></tt>}</li>
</ul>
</dd>
</dl>
<p>The format of the JSON string</p>
<table border="1" class="docutils">
<colgroup>
<col width="12%" />
<col width="88%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">split</span></tt></td>
<td>dict like {index -&gt; [index], columns -&gt; [columns], data -&gt; [values]}</td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">records</span></tt></td>
<td>list like [{column -&gt; value}, ... , {column -&gt; value}]</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">index</span></tt></td>
<td>dict like {index -&gt; {column -&gt; value}}</td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">columns</span></tt></td>
<td>dict like {column -&gt; {index -&gt; value}}</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">values</span></tt></td>
<td>just the values array</td>
</tr>
</tbody>
</table>
</li>
<li><p class="first"><tt class="docutils literal"><span class="pre">date_format</span></tt> : string, type of date conversion, &#8216;epoch&#8217; for timestamp, &#8216;iso&#8217; for ISO8601.</p>
</li>
<li><p class="first"><tt class="docutils literal"><span class="pre">double_precision</span></tt> : The number of decimal places to use when encoding floating point values, default 10.</p>
</li>
<li><p class="first"><tt class="docutils literal"><span class="pre">force_ascii</span></tt> : force encoded string to be ASCII, default True.</p>
</li>
<li><p class="first"><tt class="docutils literal"><span class="pre">date_unit</span></tt> : The time unit to encode to, governs timestamp and ISO8601 precision. One of &#8216;s&#8217;, &#8216;ms&#8217;, &#8216;us&#8217; or &#8216;ns&#8217; for seconds, milliseconds, microseconds and nanoseconds respectively. Default &#8216;ms&#8217;.</p>
</li>
</ul>
<p>Note NaN&#8217;s, NaT&#8217;s and None will be converted to null and datetime objects will be converted based on the date_format and date_unit parameters.</p>
<div class="highlight-ipython"><div class="highlight"><pre><span class="gp">In [123]: </span><span class="n">dfj</span> <span class="o">=</span> <span class="n">DataFrame</span><span class="p">(</span><span class="n">randn</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span> <span class="n">columns</span><span class="o">=</span><span class="nb">list</span><span class="p">(</span><span class="s">&#39;AB&#39;</span><span class="p">))</span>

<span class="gp">In [124]: </span><span class="n">json</span> <span class="o">=</span> <span class="n">dfj</span><span class="o">.</span><span class="n">to_json</span><span class="p">()</span>

<span class="gp">In [125]: </span><span class="n">json</span>
<span class="go">&#39;{&quot;A&quot;:{&quot;0&quot;:-1.2945235903,&quot;1&quot;:0.2766617129,&quot;2&quot;:-0.0139597524,&quot;3&quot;:-0.0061535699,&quot;4&quot;:0.8957173022},&quot;B&quot;:{&quot;0&quot;:0.4137381054,&quot;1&quot;:-0.472034511,&quot;2&quot;:-0.3625429925,&quot;3&quot;:-0.923060654,&quot;4&quot;:0.8052440254}}&#39;</span>
</pre></div>
</div>
<p>Writing in iso date format</p>
<div class="highlight-ipython"><div class="highlight"><pre><span class="gp">In [126]: </span><span class="n">dfd</span> <span class="o">=</span> <span class="n">DataFrame</span><span class="p">(</span><span class="n">randn</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span> <span class="n">columns</span><span class="o">=</span><span class="nb">list</span><span class="p">(</span><span class="s">&#39;AB&#39;</span><span class="p">))</span>

<span class="gp">In [127]: </span><span class="n">dfd</span><span class="p">[</span><span class="s">&#39;date&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">Timestamp</span><span class="p">(</span><span class="s">&#39;20130101&#39;</span><span class="p">)</span>

<span class="gp">In [128]: </span><span class="n">json</span> <span class="o">=</span> <span class="n">dfd</span><span class="o">.</span><span class="n">to_json</span><span class="p">(</span><span class="n">date_format</span><span class="o">=</span><span class="s">&#39;iso&#39;</span><span class="p">)</span>

<span class="gp">In [129]: </span><span class="n">json</span>
<span class="go">&#39;{&quot;A&quot;:{&quot;0&quot;:-1.2064117817,&quot;1&quot;:1.4312559863,&quot;2&quot;:-1.1702987971,&quot;3&quot;:0.4108345112,&quot;4&quot;:0.1320031703},&quot;B&quot;:{&quot;0&quot;:2.5656459463,&quot;1&quot;:1.3403088498,&quot;2&quot;:-0.2261692849,&quot;3&quot;:0.8138502857,&quot;4&quot;:-0.8273169356},&quot;date&quot;:{&quot;0&quot;:&quot;2013-01-01T00:00:00.000Z&quot;,&quot;1&quot;:&quot;2013-01-01T00:00:00.000Z&quot;,&quot;2&quot;:&quot;2013-01-01T00:00:00.000Z&quot;,&quot;3&quot;:&quot;2013-01-01T00:00:00.000Z&quot;,&quot;4&quot;:&quot;2013-01-01T00:00:00.000Z&quot;}}&#39;</span>
</pre></div>
</div>
<p>Writing in iso date format, with microseconds</p>
<div class="highlight-ipython"><div class="highlight"><pre><span class="gp">In [130]: </span><span class="n">json</span> <span class="o">=</span> <span class="n">dfd</span><span class="o">.</span><span class="n">to_json</span><span class="p">(</span><span class="n">date_format</span><span class="o">=</span><span class="s">&#39;iso&#39;</span><span class="p">,</span> <span class="n">date_unit</span><span class="o">=</span><span class="s">&#39;us&#39;</span><span class="p">)</span>

<span class="gp">In [131]: </span><span class="n">json</span>
<span class="go">&#39;{&quot;A&quot;:{&quot;0&quot;:-1.2064117817,&quot;1&quot;:1.4312559863,&quot;2&quot;:-1.1702987971,&quot;3&quot;:0.4108345112,&quot;4&quot;:0.1320031703},&quot;B&quot;:{&quot;0&quot;:2.5656459463,&quot;1&quot;:1.3403088498,&quot;2&quot;:-0.2261692849,&quot;3&quot;:0.8138502857,&quot;4&quot;:-0.8273169356},&quot;date&quot;:{&quot;0&quot;:&quot;2013-01-01T00:00:00.000000Z&quot;,&quot;1&quot;:&quot;2013-01-01T00:00:00.000000Z&quot;,&quot;2&quot;:&quot;2013-01-01T00:00:00.000000Z&quot;,&quot;3&quot;:&quot;2013-01-01T00:00:00.000000Z&quot;,&quot;4&quot;:&quot;2013-01-01T00:00:00.000000Z&quot;}}&#39;</span>
</pre></div>
</div>
<p>Actually I prefer epoch timestamps, in seconds</p>
<div class="highlight-ipython"><div class="highlight"><pre><span class="gp">In [132]: </span><span class="n">json</span> <span class="o">=</span> <span class="n">dfd</span><span class="o">.</span><span class="n">to_json</span><span class="p">(</span><span class="n">date_format</span><span class="o">=</span><span class="s">&#39;epoch&#39;</span><span class="p">,</span> <span class="n">date_unit</span><span class="o">=</span><span class="s">&#39;s&#39;</span><span class="p">)</span>

<span class="gp">In [133]: </span><span class="n">json</span>
<span class="go">&#39;{&quot;A&quot;:{&quot;0&quot;:-1.2064117817,&quot;1&quot;:1.4312559863,&quot;2&quot;:-1.1702987971,&quot;3&quot;:0.4108345112,&quot;4&quot;:0.1320031703},&quot;B&quot;:{&quot;0&quot;:2.5656459463,&quot;1&quot;:1.3403088498,&quot;2&quot;:-0.2261692849,&quot;3&quot;:0.8138502857,&quot;4&quot;:-0.8273169356},&quot;date&quot;:{&quot;0&quot;:1356998400,&quot;1&quot;:1356998400,&quot;2&quot;:1356998400,&quot;3&quot;:1356998400,&quot;4&quot;:1356998400}}&#39;</span>
</pre></div>
</div>
<p>Writing to a file, with a date index and a date column</p>
<div class="highlight-ipython"><div class="highlight"><pre><span class="gp">In [134]: </span><span class="n">dfj2</span> <span class="o">=</span> <span class="n">dfj</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>

<span class="gp">In [135]: </span><span class="n">dfj2</span><span class="p">[</span><span class="s">&#39;date&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">Timestamp</span><span class="p">(</span><span class="s">&#39;20130101&#39;</span><span class="p">)</span>

<span class="gp">In [136]: </span><span class="n">dfj2</span><span class="p">[</span><span class="s">&#39;ints&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">5</span><span class="p">))</span>

<span class="gp">In [137]: </span><span class="n">dfj2</span><span class="p">[</span><span class="s">&#39;bools&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">True</span>

<span class="gp">In [138]: </span><span class="n">dfj2</span><span class="o">.</span><span class="n">index</span> <span class="o">=</span> <span class="n">date_range</span><span class="p">(</span><span class="s">&#39;20130101&#39;</span><span class="p">,</span> <span class="n">periods</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span>

<span class="gp">In [139]: </span><span class="n">dfj2</span><span class="o">.</span><span class="n">to_json</span><span class="p">(</span><span class="s">&#39;test.json&#39;</span><span class="p">)</span>

<span class="gp">In [140]: </span><span class="nb">open</span><span class="p">(</span><span class="s">&#39;test.json&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>
<span class="go">&#39;{&quot;A&quot;:{&quot;1356998400000&quot;:-1.2945235903,&quot;1357084800000&quot;:0.2766617129,&quot;1357171200000&quot;:-0.0139597524,&quot;1357257600000&quot;:-0.0061535699,&quot;1357344000000&quot;:0.8957173022},&quot;B&quot;:{&quot;1356998400000&quot;:0.4137381054,&quot;1357084800000&quot;:-0.472034511,&quot;1357171200000&quot;:-0.3625429925,&quot;1357257600000&quot;:-0.923060654,&quot;1357344000000&quot;:0.8052440254},&quot;date&quot;:{&quot;1356998400000&quot;:1356998400000,&quot;1357084800000&quot;:1356998400000,&quot;1357171200000&quot;:1356998400000,&quot;1357257600000&quot;:1356998400000,&quot;1357344000000&quot;:1356998400000},&quot;ints&quot;:{&quot;1356998400000&quot;:0,&quot;1357084800000&quot;:1,&quot;1357171200000&quot;:2,&quot;1357257600000&quot;:3,&quot;1357344000000&quot;:4},&quot;bools&quot;:{&quot;1356998400000&quot;:true,&quot;1357084800000&quot;:true,&quot;1357171200000&quot;:true,&quot;1357257600000&quot;:true,&quot;1357344000000&quot;:true}}&#39;</span>
</pre></div>
</div>
</div>
<div class="section" id="reading-json">
<h3>Reading JSON<a class="headerlink" href="#reading-json" title="Permalink to this headline">¶</a></h3>
<p>Reading a JSON string to pandas object can take a number of parameters.
The parser will try to parse a <tt class="docutils literal"><span class="pre">DataFrame</span></tt> if <tt class="docutils literal"><span class="pre">typ</span></tt> is not supplied or
is <tt class="docutils literal"><span class="pre">None</span></tt>. To explicity force <tt class="docutils literal"><span class="pre">Series</span></tt> parsing, pass <tt class="docutils literal"><span class="pre">typ=series</span></tt></p>
<ul>
<li><p class="first"><tt class="docutils literal"><span class="pre">filepath_or_buffer</span></tt> : a <strong>VALID</strong> JSON string or file handle / StringIO. The string could be
a URL. Valid URL schemes include http, ftp, s3, and file. For file URLs, a host
is expected. For instance, a local file could be
file ://localhost/path/to/table.json</p>
</li>
<li><p class="first"><tt class="docutils literal"><span class="pre">typ</span></tt>    : type of object to recover (series or frame), default &#8216;frame&#8217;</p>
</li>
<li><p class="first"><tt class="docutils literal"><span class="pre">orient</span></tt> :</p>
<dl class="docutils">
<dt>Series :</dt>
<dd><ul class="first last simple">
<li>default is <tt class="docutils literal"><span class="pre">index</span></tt></li>
<li>allowed values are {<tt class="docutils literal"><span class="pre">split</span></tt>, <tt class="docutils literal"><span class="pre">records</span></tt>, <tt class="docutils literal"><span class="pre">index</span></tt>}</li>
</ul>
</dd>
<dt>DataFrame</dt>
<dd><ul class="first last simple">
<li>default is <tt class="docutils literal"><span class="pre">columns</span></tt></li>
<li>allowed values are {<tt class="docutils literal"><span class="pre">split</span></tt>, <tt class="docutils literal"><span class="pre">records</span></tt>, <tt class="docutils literal"><span class="pre">index</span></tt>, <tt class="docutils literal"><span class="pre">columns</span></tt>, <tt class="docutils literal"><span class="pre">values</span></tt>}</li>
</ul>
</dd>
</dl>
<p>The format of the JSON string</p>
<table border="1" class="docutils">
<colgroup>
<col width="12%" />
<col width="88%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">split</span></tt></td>
<td>dict like {index -&gt; [index], columns -&gt; [columns], data -&gt; [values]}</td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">records</span></tt></td>
<td>list like [{column -&gt; value}, ... , {column -&gt; value}]</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">index</span></tt></td>
<td>dict like {index -&gt; {column -&gt; value}}</td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">columns</span></tt></td>
<td>dict like {column -&gt; {index -&gt; value}}</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">values</span></tt></td>
<td>just the values array</td>
</tr>
</tbody>
</table>
</li>
<li><p class="first"><tt class="docutils literal"><span class="pre">dtype</span></tt> : if True, infer dtypes, if a dict of column to dtype, then use those, if False, then don&#8217;t infer dtypes at all, default is True, apply only to the data</p>
</li>
<li><p class="first"><tt class="docutils literal"><span class="pre">convert_axes</span></tt> : boolean, try to convert the axes to the proper dtypes, default is True</p>
</li>
<li><p class="first"><tt class="docutils literal"><span class="pre">convert_dates</span></tt> : a list of columns to parse for dates; If True, then try to parse datelike columns, default is True</p>
</li>
<li><p class="first"><tt class="docutils literal"><span class="pre">keep_default_dates</span></tt> : boolean, default True. If parsing dates, then parse the default datelike columns</p>
</li>
<li><p class="first"><tt class="docutils literal"><span class="pre">numpy</span></tt> : direct decoding to numpy arrays. default is False;
Note that the JSON ordering <strong>MUST</strong> be the same for each term if <tt class="docutils literal"><span class="pre">numpy=True</span></tt></p>
</li>
<li><p class="first"><tt class="docutils literal"><span class="pre">precise_float</span></tt> : boolean, default <tt class="docutils literal"><span class="pre">False</span></tt>. Set to enable usage of higher precision (strtod) function when decoding string to double values. Default (<tt class="docutils literal"><span class="pre">False</span></tt>) is to use fast but less precise builtin functionality</p>
</li>
<li><p class="first"><tt class="docutils literal"><span class="pre">date_unit</span></tt> : string, the timestamp unit to detect if converting dates. Default
None. By default the timestamp precision will be detected, if this is not desired
then pass one of &#8216;s&#8217;, &#8216;ms&#8217;, &#8216;us&#8217; or &#8216;ns&#8217; to force timestamp precision to
seconds, milliseconds, microseconds or nanoseconds respectively.</p>
</li>
</ul>
<p>The parser will raise one of <tt class="docutils literal"><span class="pre">ValueError/TypeError/AssertionError</span></tt> if the JSON is not parsable.</p>
<p>The default of <tt class="docutils literal"><span class="pre">convert_axes=True</span></tt>, <tt class="docutils literal"><span class="pre">dtype=True</span></tt>, and <tt class="docutils literal"><span class="pre">convert_dates=True</span></tt> will try to parse the axes, and all of the data
into appropriate types, including dates. If you need to override specific dtypes, pass a dict to <tt class="docutils literal"><span class="pre">dtype</span></tt>. <tt class="docutils literal"><span class="pre">convert_axes</span></tt> should only
be set to <tt class="docutils literal"><span class="pre">False</span></tt> if you need to preserve string-like numbers (e.g. &#8216;1&#8217;, &#8216;2&#8217;) in an axes.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Large integer values may be converted to dates if <tt class="docutils literal"><span class="pre">convert_dates=True</span></tt> and the data and / or column labels appear &#8216;date-like&#8217;. The exact threshold depends on the <tt class="docutils literal"><span class="pre">date_unit</span></tt> specified.</p>
</div>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p>When reading JSON data, automatic coercing into dtypes has some quirks:</p>
<blockquote>
<div><ul class="simple">
<li>an index can be reconstructed in a different order from serialization, that is, the returned order is not guaranteed to be the same as before serialization</li>
<li>a column that was <tt class="docutils literal"><span class="pre">float</span></tt> data will be converted to <tt class="docutils literal"><span class="pre">integer</span></tt> if it can be done safely, e.g. a column of <tt class="docutils literal"><span class="pre">1.</span></tt></li>
<li>bool columns will be converted to <tt class="docutils literal"><span class="pre">integer</span></tt> on reconstruction</li>
</ul>
</div></blockquote>
<p class="last">Thus there are times where you may want to specify specific dtypes via the <tt class="docutils literal"><span class="pre">dtype</span></tt> keyword argument.</p>
</div>
<p>Reading from a JSON string</p>
<div class="highlight-ipython"><div class="highlight"><pre><span class="gp">In [141]: </span><span class="n">pd</span><span class="o">.</span><span class="n">read_json</span><span class="p">(</span><span class="n">json</span><span class="p">)</span>

<span class="go">          A         B                date</span>
<span class="go">0 -1.206412  2.565646 2013-01-01 00:00:00</span>
<span class="go">1  1.431256  1.340309 2013-01-01 00:00:00</span>
<span class="go">2 -1.170299 -0.226169 2013-01-01 00:00:00</span>
<span class="go">3  0.410835  0.813850 2013-01-01 00:00:00</span>
<span class="go">4  0.132003 -0.827317 2013-01-01 00:00:00</span>
</pre></div>
</div>
<p>Reading from a file</p>
<div class="highlight-ipython"><div class="highlight"><pre><span class="gp">In [142]: </span><span class="n">pd</span><span class="o">.</span><span class="n">read_json</span><span class="p">(</span><span class="s">&#39;test.json&#39;</span><span class="p">)</span>

<span class="go">                   A         B bools                date  ints</span>
<span class="go">2013-01-01 -1.294524  0.413738  True 2013-01-01 00:00:00     0</span>
<span class="go">2013-01-02  0.276662 -0.472035  True 2013-01-01 00:00:00     1</span>
<span class="go">2013-01-03 -0.013960 -0.362543  True 2013-01-01 00:00:00     2</span>
<span class="go">2013-01-04 -0.006154 -0.923061  True 2013-01-01 00:00:00     3</span>
<span class="go">2013-01-05  0.895717  0.805244  True 2013-01-01 00:00:00     4</span>
</pre></div>
</div>
<p>Don&#8217;t convert any data (but still convert axes and dates)</p>
<div class="highlight-ipython"><div class="highlight"><pre><span class="gp">In [143]: </span><span class="n">pd</span><span class="o">.</span><span class="n">read_json</span><span class="p">(</span><span class="s">&#39;test.json&#39;</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="nb">object</span><span class="p">)</span><span class="o">.</span><span class="n">dtypes</span>

<span class="go">A                object</span>
<span class="go">B                object</span>
<span class="go">bools            object</span>
<span class="go">date     datetime64[ns]</span>
<span class="go">ints             object</span>
<span class="go">dtype: object</span>
</pre></div>
</div>
<p>Specify how I want to convert data</p>
<div class="highlight-ipython"><div class="highlight"><pre><span class="gp">In [144]: </span><span class="n">pd</span><span class="o">.</span><span class="n">read_json</span><span class="p">(</span><span class="s">&#39;test.json&#39;</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="p">{</span><span class="s">&#39;A&#39;</span> <span class="p">:</span> <span class="s">&#39;float32&#39;</span><span class="p">,</span> <span class="s">&#39;bools&#39;</span> <span class="p">:</span> <span class="s">&#39;int8&#39;</span><span class="p">})</span><span class="o">.</span><span class="n">dtypes</span>

<span class="go">A               float32</span>
<span class="go">B               float64</span>
<span class="go">bools              int8</span>
<span class="go">date     datetime64[ns]</span>
<span class="go">ints              int64</span>
<span class="go">dtype: object</span>
</pre></div>
</div>
<p>I like my string indicies</p>
<div class="highlight-ipython"><div class="highlight"><pre><span class="gp">In [145]: </span><span class="n">si</span> <span class="o">=</span> <span class="n">DataFrame</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">((</span><span class="mi">4</span><span class="p">,</span> <span class="mi">4</span><span class="p">)),</span>
<span class="gp">   .....:</span>          <span class="n">columns</span><span class="o">=</span><span class="nb">list</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">4</span><span class="p">)),</span>
<span class="gp">   .....:</span>          <span class="n">index</span><span class="o">=</span><span class="p">[</span><span class="nb">str</span><span class="p">(</span><span class="n">i</span><span class="p">)</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">4</span><span class="p">)])</span>
<span class="gp">   .....:</span> 

<span class="gp">In [146]: </span><span class="n">si</span>

<span class="go">   0  1  2  3</span>
<span class="go">0  0  0  0  0</span>
<span class="go">1  0  0  0  0</span>
<span class="go">2  0  0  0  0</span>
<span class="go">3  0  0  0  0</span>

<span class="gp">In [147]: </span><span class="n">si</span><span class="o">.</span><span class="n">index</span>
<span class="go">Index([u&#39;0&#39;, u&#39;1&#39;, u&#39;2&#39;, u&#39;3&#39;], dtype=object)</span>

<span class="gp">In [148]: </span><span class="n">si</span><span class="o">.</span><span class="n">columns</span>
<span class="go">Int64Index([0, 1, 2, 3], dtype=int64)</span>

<span class="gp">In [149]: </span><span class="n">json</span> <span class="o">=</span> <span class="n">si</span><span class="o">.</span><span class="n">to_json</span><span class="p">()</span>

<span class="gp">In [150]: </span><span class="n">sij</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_json</span><span class="p">(</span><span class="n">json</span><span class="p">,</span> <span class="n">convert_axes</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>

<span class="gp">In [151]: </span><span class="n">sij</span>

<span class="go">   0  1  2  3</span>
<span class="go">0  0  0  0  0</span>
<span class="go">1  0  0  0  0</span>
<span class="go">2  0  0  0  0</span>
<span class="go">3  0  0  0  0</span>

<span class="gp">In [152]: </span><span class="n">sij</span><span class="o">.</span><span class="n">index</span>
<span class="go">Index([u&#39;0&#39;, u&#39;1&#39;, u&#39;2&#39;, u&#39;3&#39;], dtype=object)</span>

<span class="gp">In [153]: </span><span class="n">sij</span><span class="o">.</span><span class="n">columns</span>
<span class="go">Index([u&#39;0&#39;, u&#39;1&#39;, u&#39;2&#39;, u&#39;3&#39;], dtype=object)</span>
</pre></div>
</div>
<p>My dates have been written in nanoseconds, so they need to be read back in
nanoseconds</p>
<div class="highlight-ipython"><div class="highlight"><pre><span class="gp">In [154]: </span><span class="n">json</span> <span class="o">=</span> <span class="n">dfj2</span><span class="o">.</span><span class="n">to_json</span><span class="p">(</span><span class="n">date_unit</span><span class="o">=</span><span class="s">&#39;ns&#39;</span><span class="p">)</span>

<span class="c"># Try to parse timestamps as millseconds -&gt; Won&#39;t Work</span>
<span class="gp">In [155]: </span><span class="n">dfju</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_json</span><span class="p">(</span><span class="n">json</span><span class="p">,</span> <span class="n">date_unit</span><span class="o">=</span><span class="s">&#39;ms&#39;</span><span class="p">)</span>

<span class="gp">In [156]: </span><span class="n">dfju</span>

<span class="go">                            A         B bools                 date  ints</span>
<span class="go">1356998400000000000 -1.294524  0.413738  True  1356998400000000000     0</span>
<span class="go">1357084800000000000  0.276662 -0.472035  True  1356998400000000000     1</span>
<span class="go">1357171200000000000 -0.013960 -0.362543  True  1356998400000000000     2</span>
<span class="go">1357257600000000000 -0.006154 -0.923061  True  1356998400000000000     3</span>
<span class="go">1357344000000000000  0.895717  0.805244  True  1356998400000000000     4</span>

<span class="c"># Let Pandas detect the correct precision</span>
<span class="gp">In [157]: </span><span class="n">dfju</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_json</span><span class="p">(</span><span class="n">json</span><span class="p">)</span>

<span class="gp">In [158]: </span><span class="n">dfju</span>

<span class="go">                   A         B bools                date  ints</span>
<span class="go">2013-01-01 -1.294524  0.413738  True 2013-01-01 00:00:00     0</span>
<span class="go">2013-01-02  0.276662 -0.472035  True 2013-01-01 00:00:00     1</span>
<span class="go">2013-01-03 -0.013960 -0.362543  True 2013-01-01 00:00:00     2</span>
<span class="go">2013-01-04 -0.006154 -0.923061  True 2013-01-01 00:00:00     3</span>
<span class="go">2013-01-05  0.895717  0.805244  True 2013-01-01 00:00:00     4</span>

<span class="c"># Or specify that all timestamps are in nanoseconds</span>
<span class="gp">In [159]: </span><span class="n">dfju</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_json</span><span class="p">(</span><span class="n">json</span><span class="p">,</span> <span class="n">date_unit</span><span class="o">=</span><span class="s">&#39;ns&#39;</span><span class="p">)</span>

<span class="gp">In [160]: </span><span class="n">dfju</span>

<span class="go">                   A         B bools                date  ints</span>
<span class="go">2013-01-01 -1.294524  0.413738  True 2013-01-01 00:00:00     0</span>
<span class="go">2013-01-02  0.276662 -0.472035  True 2013-01-01 00:00:00     1</span>
<span class="go">2013-01-03 -0.013960 -0.362543  True 2013-01-01 00:00:00     2</span>
<span class="go">2013-01-04 -0.006154 -0.923061  True 2013-01-01 00:00:00     3</span>
<span class="go">2013-01-05  0.895717  0.805244  True 2013-01-01 00:00:00     4</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="html">
<h2>HTML<a class="headerlink" href="#html" title="Permalink to this headline">¶</a></h2>
<div class="section" id="reading-html-content">
<h3>Reading HTML Content<a class="headerlink" href="#reading-html-content" title="Permalink to this headline">¶</a></h3>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">We <strong>highly encourage</strong> you to read the <a class="reference internal" href="gotchas.html#html-gotchas"><em>HTML parsing gotchas</em></a> regarding the issues surrounding the
BeautifulSoup4/html5lib/lxml parsers.</p>
</div>
<div class="versionadded" id="io-read-html">
<p><span>New in version 0.12.</span></p>
</div>
<p>The top-level <a class="reference internal" href="generated/pandas.io.html.read_html.html#pandas.io.html.read_html" title="pandas.io.html.read_html"><tt class="xref py py-func docutils literal"><span class="pre">read_html()</span></tt></a> function can accept an HTML
string/file/url and will parse HTML tables into list of pandas DataFrames.
Let&#8217;s look at a few examples.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last"><tt class="docutils literal"><span class="pre">read_html</span></tt> returns a <tt class="docutils literal"><span class="pre">list</span></tt> of <tt class="docutils literal"><span class="pre">DataFrame</span></tt> objects, even if there is
only a single table contained in the HTML content</p>
</div>
<p>Read a URL with no options</p>
<div class="highlight-ipython"><div class="highlight"><pre><span class="gp">In [161]: </span><span class="n">url</span> <span class="o">=</span> <span class="s">&#39;http://www.fdic.gov/bank/individual/failed/banklist.html&#39;</span>

<span class="gp">In [162]: </span><span class="n">dfs</span> <span class="o">=</span> <span class="n">read_html</span><span class="p">(</span><span class="n">url</span><span class="p">)</span>

<span class="gp">In [163]: </span><span class="n">dfs</span>

<span class="go">[&lt;class &#39;pandas.core.frame.DataFrame&#39;&gt;</span>
<span class="go">Int64Index: 514 entries, 0 to 513</span>
<span class="go">Data columns (total 8 columns):</span>
<span class="go">Bank Name                514  non-null values</span>
<span class="go">City                     514  non-null values</span>
<span class="go">ST                       514  non-null values</span>
<span class="go">CERT                     514  non-null values</span>
<span class="go">Acquiring Institution    514  non-null values</span>
<span class="go">Closing Date             514  non-null values</span>
<span class="go">Updated Date             514  non-null values</span>
<span class="go">Loss Share Type          514  non-null values</span>
<span class="go">dtypes: datetime64[ns](2), int64(1), object(5)]</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The data from the above URL changes every Monday so the resulting data above
and the data below may be slightly different.</p>
</div>
<p>Read in the content of the file from the above URL and pass it to <tt class="docutils literal"><span class="pre">read_html</span></tt>
as a string</p>
<div class="highlight-ipython"><div class="highlight"><pre><span class="gp">In [164]: </span><span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">file_path</span><span class="p">,</span> <span class="s">&#39;r&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
<span class="gp">   .....:</span>     <span class="n">dfs</span> <span class="o">=</span> <span class="n">read_html</span><span class="p">(</span><span class="n">f</span><span class="o">.</span><span class="n">read</span><span class="p">())</span>
<span class="gp">   .....:</span> 

<span class="gp">In [165]: </span><span class="n">dfs</span>

<span class="go">[&lt;class &#39;pandas.core.frame.DataFrame&#39;&gt;</span>
<span class="go">Int64Index: 506 entries, 0 to 505</span>
<span class="go">Data columns (total 7 columns):</span>
<span class="go">Bank Name                506  non-null values</span>
<span class="go">City                     506  non-null values</span>
<span class="go">ST                       506  non-null values</span>
<span class="go">CERT                     506  non-null values</span>
<span class="go">Acquiring Institution    506  non-null values</span>
<span class="go">Closing Date             506  non-null values</span>
<span class="go">Updated Date             506  non-null values</span>
<span class="go">dtypes: datetime64[ns](2), int64(1), object(4)]</span>
</pre></div>
</div>
<p>You can even pass in an instance of <tt class="docutils literal"><span class="pre">StringIO</span></tt> if you so desire</p>
<div class="highlight-ipython"><div class="highlight"><pre><span class="gp">In [166]: </span><span class="kn">from</span> <span class="nn">cStringIO</span> <span class="kn">import</span> <span class="n">StringIO</span>

<span class="gp">In [167]: </span><span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">file_path</span><span class="p">,</span> <span class="s">&#39;r&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
<span class="gp">   .....:</span>     <span class="n">sio</span> <span class="o">=</span> <span class="n">StringIO</span><span class="p">(</span><span class="n">f</span><span class="o">.</span><span class="n">read</span><span class="p">())</span>
<span class="gp">   .....:</span> 

<span class="gp">In [168]: </span><span class="n">dfs</span> <span class="o">=</span> <span class="n">read_html</span><span class="p">(</span><span class="n">sio</span><span class="p">)</span>

<span class="gp">In [169]: </span><span class="n">dfs</span>

<span class="go">[&lt;class &#39;pandas.core.frame.DataFrame&#39;&gt;</span>
<span class="go">Int64Index: 506 entries, 0 to 505</span>
<span class="go">Data columns (total 7 columns):</span>
<span class="go">Bank Name                506  non-null values</span>
<span class="go">City                     506  non-null values</span>
<span class="go">ST                       506  non-null values</span>
<span class="go">CERT                     506  non-null values</span>
<span class="go">Acquiring Institution    506  non-null values</span>
<span class="go">Closing Date             506  non-null values</span>
<span class="go">Updated Date             506  non-null values</span>
<span class="go">dtypes: datetime64[ns](2), int64(1), object(4)]</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The following examples are not run by the IPython evaluator due to the fact
that having so many network-accessing functions slows down the documentation
build. If you spot an error or an example that doesn&#8217;t run, please do not
hesitate to report it over on <a class="reference external" href="http://www.github.com/pydata/pandas/issues">pandas GitHub issues page</a>.</p>
</div>
<p>Read a URL and match a table that contains specific text</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">match</span> <span class="o">=</span> <span class="s">&#39;Metcalf Bank&#39;</span>
<span class="n">df_list</span> <span class="o">=</span> <span class="n">read_html</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">match</span><span class="o">=</span><span class="n">match</span><span class="p">)</span>
</pre></div>
</div>
<p>Specify a header row (by default <tt class="docutils literal"><span class="pre">&lt;th&gt;</span></tt> elements are used to form the column
index); if specified, the header row is taken from the data minus the parsed
header elements (<tt class="docutils literal"><span class="pre">&lt;th&gt;</span></tt> elements).</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">dfs</span> <span class="o">=</span> <span class="n">read_html</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">header</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
</pre></div>
</div>
<p>Specify an index column</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">dfs</span> <span class="o">=</span> <span class="n">read_html</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">index_col</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
</pre></div>
</div>
<p>Specify a number of rows to skip</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">dfs</span> <span class="o">=</span> <span class="n">read_html</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">skiprows</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
</pre></div>
</div>
<p>Specify a number of rows to skip using a list (<tt class="docutils literal"><span class="pre">xrange</span></tt> (Python 2 only) works
as well)</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">dfs</span> <span class="o">=</span> <span class="n">read_html</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">skiprows</span><span class="o">=</span><span class="nb">range</span><span class="p">(</span><span class="mi">2</span><span class="p">))</span>
</pre></div>
</div>
<p>Don&#8217;t infer numeric and date types</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">dfs</span> <span class="o">=</span> <span class="n">read_html</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">infer_types</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
</pre></div>
</div>
<p>Specify an HTML attribute</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">dfs1</span> <span class="o">=</span> <span class="n">read_html</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">attrs</span><span class="o">=</span><span class="p">{</span><span class="s">&#39;id&#39;</span><span class="p">:</span> <span class="s">&#39;table&#39;</span><span class="p">})</span>
<span class="n">dfs2</span> <span class="o">=</span> <span class="n">read_html</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">attrs</span><span class="o">=</span><span class="p">{</span><span class="s">&#39;class&#39;</span><span class="p">:</span> <span class="s">&#39;sortable&#39;</span><span class="p">})</span>
<span class="k">print</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">array_equal</span><span class="p">(</span><span class="n">dfs1</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">dfs2</span><span class="p">[</span><span class="mi">0</span><span class="p">]))</span>  <span class="c"># Should be True</span>
</pre></div>
</div>
<p>Use some combination of the above</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">dfs</span> <span class="o">=</span> <span class="n">read_html</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">match</span><span class="o">=</span><span class="s">&#39;Metcalf Bank&#39;</span><span class="p">,</span> <span class="n">index_col</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
</pre></div>
</div>
<p>Read in pandas <tt class="docutils literal"><span class="pre">to_html</span></tt> output (with some loss of floating point precision)</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">df</span> <span class="o">=</span> <span class="n">DataFrame</span><span class="p">(</span><span class="n">randn</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">))</span>
<span class="n">s</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">to_html</span><span class="p">(</span><span class="n">float_format</span><span class="o">=</span><span class="s">&#39;{0:.40g}&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">)</span>
<span class="n">dfin</span> <span class="o">=</span> <span class="n">read_html</span><span class="p">(</span><span class="n">s</span><span class="p">,</span> <span class="n">index_col</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
</pre></div>
</div>
<p>The <tt class="docutils literal"><span class="pre">lxml</span></tt> backend will raise an error on a failed parse if that is the only
parser you provide (if you only have a single parser you can provide just a
string, but it is considered good practice to pass a list with one string if,
for example, the function expects a sequence of strings)</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">dfs</span> <span class="o">=</span> <span class="n">read_html</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="s">&#39;Metcalf Bank&#39;</span><span class="p">,</span> <span class="n">index_col</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">flavor</span><span class="o">=</span><span class="p">[</span><span class="s">&#39;lxml&#39;</span><span class="p">])</span>
</pre></div>
</div>
<p>or</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">dfs</span> <span class="o">=</span> <span class="n">read_html</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="s">&#39;Metcalf Bank&#39;</span><span class="p">,</span> <span class="n">index_col</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">flavor</span><span class="o">=</span><span class="s">&#39;lxml&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>However, if you have bs4 and html5lib installed and pass <tt class="docutils literal"><span class="pre">None</span></tt> or <tt class="docutils literal"><span class="pre">['lxml',</span>
<span class="pre">'bs4']</span></tt> then the parse will most likely succeed. Note that <em>as soon as a parse
succeeds, the function will return</em>.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">dfs</span> <span class="o">=</span> <span class="n">read_html</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="s">&#39;Metcalf Bank&#39;</span><span class="p">,</span> <span class="n">index_col</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">flavor</span><span class="o">=</span><span class="p">[</span><span class="s">&#39;lxml&#39;</span><span class="p">,</span> <span class="s">&#39;bs4&#39;</span><span class="p">])</span>
</pre></div>
</div>
</div>
<div class="section" id="writing-to-html-files">
<h3>Writing to HTML files<a class="headerlink" href="#writing-to-html-files" title="Permalink to this headline">¶</a></h3>
<p id="io-html"><tt class="docutils literal"><span class="pre">DataFrame</span></tt> objects have an instance method <tt class="docutils literal"><span class="pre">to_html</span></tt> which renders the
contents of the <tt class="docutils literal"><span class="pre">DataFrame</span></tt> as an HTML table. The function arguments are as
in the method <tt class="docutils literal"><span class="pre">to_string</span></tt> described above.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Not all of the possible options for <tt class="docutils literal"><span class="pre">DataFrame.to_html</span></tt> are shown here for
brevity&#8217;s sake. See <tt class="xref py py-func docutils literal"><span class="pre">to_html()</span></tt> for the
full set of options.</p>
</div>
<div class="highlight-ipython"><div class="highlight"><pre><span class="gp">In [170]: </span><span class="n">df</span> <span class="o">=</span> <span class="n">DataFrame</span><span class="p">(</span><span class="n">randn</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">))</span>

<span class="gp">In [171]: </span><span class="n">df</span>

<span class="go">          0         1</span>
<span class="go">0 -0.076467 -1.187678</span>
<span class="go">1  1.130127 -1.436737</span>

<span class="gp">In [172]: </span><span class="k">print</span><span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">to_html</span><span class="p">())</span>  <span class="c"># raw html</span>
<span class="go">&lt;table border=&quot;1&quot; class=&quot;dataframe&quot;&gt;</span>
<span class="go">  &lt;thead&gt;</span>
<span class="go">    &lt;tr style=&quot;text-align: right;&quot;&gt;</span>
<span class="go">      &lt;th&gt;&lt;/th&gt;</span>
<span class="go">      &lt;th&gt;0&lt;/th&gt;</span>
<span class="go">      &lt;th&gt;1&lt;/th&gt;</span>
<span class="go">    &lt;/tr&gt;</span>
<span class="go">  &lt;/thead&gt;</span>
<span class="go">  &lt;tbody&gt;</span>
<span class="go">    &lt;tr&gt;</span>
<span class="go">      &lt;th&gt;0&lt;/th&gt;</span>
<span class="go">      &lt;td&gt;-0.076467&lt;/td&gt;</span>
<span class="go">      &lt;td&gt;-1.187678&lt;/td&gt;</span>
<span class="go">    &lt;/tr&gt;</span>
<span class="go">    &lt;tr&gt;</span>
<span class="go">      &lt;th&gt;1&lt;/th&gt;</span>
<span class="go">      &lt;td&gt; 1.130127&lt;/td&gt;</span>
<span class="go">      &lt;td&gt;-1.436737&lt;/td&gt;</span>
<span class="go">    &lt;/tr&gt;</span>
<span class="go">  &lt;/tbody&gt;</span>
<span class="go">&lt;/table&gt;</span>
</pre></div>
</div>
<p>HTML:</p>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>0</th>
      <th>1</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>-0.076467</td>
      <td>-1.187678</td>
    </tr>
    <tr>
      <th>1</th>
      <td> 1.130127</td>
      <td>-1.436737</td>
    </tr>
  </tbody>
</table><p>The <tt class="docutils literal"><span class="pre">columns</span></tt> argument will limit the columns shown</p>
<div class="highlight-ipython"><div class="highlight"><pre><span class="gp">In [173]: </span><span class="k">print</span><span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">to_html</span><span class="p">(</span><span class="n">columns</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">]))</span>
<span class="go">&lt;table border=&quot;1&quot; class=&quot;dataframe&quot;&gt;</span>
<span class="go">  &lt;thead&gt;</span>
<span class="go">    &lt;tr style=&quot;text-align: right;&quot;&gt;</span>
<span class="go">      &lt;th&gt;&lt;/th&gt;</span>
<span class="go">      &lt;th&gt;0&lt;/th&gt;</span>
<span class="go">    &lt;/tr&gt;</span>
<span class="go">  &lt;/thead&gt;</span>
<span class="go">  &lt;tbody&gt;</span>
<span class="go">    &lt;tr&gt;</span>
<span class="go">      &lt;th&gt;0&lt;/th&gt;</span>
<span class="go">      &lt;td&gt;-0.076467&lt;/td&gt;</span>
<span class="go">    &lt;/tr&gt;</span>
<span class="go">    &lt;tr&gt;</span>
<span class="go">      &lt;th&gt;1&lt;/th&gt;</span>
<span class="go">      &lt;td&gt; 1.130127&lt;/td&gt;</span>
<span class="go">    &lt;/tr&gt;</span>
<span class="go">  &lt;/tbody&gt;</span>
<span class="go">&lt;/table&gt;</span>
</pre></div>
</div>
<p>HTML:</p>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>0</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>-0.076467</td>
    </tr>
    <tr>
      <th>1</th>
      <td> 1.130127</td>
    </tr>
  </tbody>
</table><p><tt class="docutils literal"><span class="pre">float_format</span></tt> takes a Python callable to control the precision of floating
point values</p>
<div class="highlight-ipython"><div class="highlight"><pre><span class="gp">In [174]: </span><span class="k">print</span><span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">to_html</span><span class="p">(</span><span class="n">float_format</span><span class="o">=</span><span class="s">&#39;{0:.10f}&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">))</span>
<span class="go">&lt;table border=&quot;1&quot; class=&quot;dataframe&quot;&gt;</span>
<span class="go">  &lt;thead&gt;</span>
<span class="go">    &lt;tr style=&quot;text-align: right;&quot;&gt;</span>
<span class="go">      &lt;th&gt;&lt;/th&gt;</span>
<span class="go">      &lt;th&gt;0&lt;/th&gt;</span>
<span class="go">      &lt;th&gt;1&lt;/th&gt;</span>
<span class="go">    &lt;/tr&gt;</span>
<span class="go">  &lt;/thead&gt;</span>
<span class="go">  &lt;tbody&gt;</span>
<span class="go">    &lt;tr&gt;</span>
<span class="go">      &lt;th&gt;0&lt;/th&gt;</span>
<span class="go">      &lt;td&gt;-0.0764670176&lt;/td&gt;</span>
<span class="go">      &lt;td&gt;-1.1876775774&lt;/td&gt;</span>
<span class="go">    &lt;/tr&gt;</span>
<span class="go">    &lt;tr&gt;</span>
<span class="go">      &lt;th&gt;1&lt;/th&gt;</span>
<span class="go">      &lt;td&gt; 1.1301272978&lt;/td&gt;</span>
<span class="go">      &lt;td&gt;-1.4367373184&lt;/td&gt;</span>
<span class="go">    &lt;/tr&gt;</span>
<span class="go">  &lt;/tbody&gt;</span>
<span class="go">&lt;/table&gt;</span>
</pre></div>
</div>
<p>HTML:</p>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>0</th>
      <th>1</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>-0.0764670176</td>
      <td>-1.1876775774</td>
    </tr>
    <tr>
      <th>1</th>
      <td> 1.1301272978</td>
      <td>-1.4367373184</td>
    </tr>
  </tbody>
</table><p><tt class="docutils literal"><span class="pre">bold_rows</span></tt> will make the row labels bold by default, but you can turn that
off</p>
<div class="highlight-ipython"><div class="highlight"><pre><span class="gp">In [175]: </span><span class="k">print</span><span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">to_html</span><span class="p">(</span><span class="n">bold_rows</span><span class="o">=</span><span class="bp">False</span><span class="p">))</span>
<span class="go">&lt;table border=&quot;1&quot; class=&quot;dataframe&quot;&gt;</span>
<span class="go">  &lt;thead&gt;</span>
<span class="go">    &lt;tr style=&quot;text-align: right;&quot;&gt;</span>
<span class="go">      &lt;th&gt;&lt;/th&gt;</span>
<span class="go">      &lt;th&gt;0&lt;/th&gt;</span>
<span class="go">      &lt;th&gt;1&lt;/th&gt;</span>
<span class="go">    &lt;/tr&gt;</span>
<span class="go">  &lt;/thead&gt;</span>
<span class="go">  &lt;tbody&gt;</span>
<span class="go">    &lt;tr&gt;</span>
<span class="go">      &lt;td&gt;0&lt;/td&gt;</span>
<span class="go">      &lt;td&gt;-0.076467&lt;/td&gt;</span>
<span class="go">      &lt;td&gt;-1.187678&lt;/td&gt;</span>
<span class="go">    &lt;/tr&gt;</span>
<span class="go">    &lt;tr&gt;</span>
<span class="go">      &lt;td&gt;1&lt;/td&gt;</span>
<span class="go">      &lt;td&gt; 1.130127&lt;/td&gt;</span>
<span class="go">      &lt;td&gt;-1.436737&lt;/td&gt;</span>
<span class="go">    &lt;/tr&gt;</span>
<span class="go">  &lt;/tbody&gt;</span>
<span class="go">&lt;/table&gt;</span>
</pre></div>
</div>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>0</th>
      <th>1</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>0</td>
      <td>-0.076467</td>
      <td>-1.187678</td>
    </tr>
    <tr>
      <td>1</td>
      <td> 1.130127</td>
      <td>-1.436737</td>
    </tr>
  </tbody>
</table><p>The <tt class="docutils literal"><span class="pre">classes</span></tt> argument provides the ability to give the resulting HTML
table CSS classes. Note that these classes are <em>appended</em> to the existing
<tt class="docutils literal"><span class="pre">'dataframe'</span></tt> class.</p>
<div class="highlight-ipython"><div class="highlight"><pre><span class="gp">In [176]: </span><span class="k">print</span><span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">to_html</span><span class="p">(</span><span class="n">classes</span><span class="o">=</span><span class="p">[</span><span class="s">&#39;awesome_table_class&#39;</span><span class="p">,</span> <span class="s">&#39;even_more_awesome_class&#39;</span><span class="p">]))</span>
<span class="go">&lt;table border=&quot;1&quot; class=&quot;dataframe awesome_table_class even_more_awesome_class&quot;&gt;</span>
<span class="go">  &lt;thead&gt;</span>
<span class="go">    &lt;tr style=&quot;text-align: right;&quot;&gt;</span>
<span class="go">      &lt;th&gt;&lt;/th&gt;</span>
<span class="go">      &lt;th&gt;0&lt;/th&gt;</span>
<span class="go">      &lt;th&gt;1&lt;/th&gt;</span>
<span class="go">    &lt;/tr&gt;</span>
<span class="go">  &lt;/thead&gt;</span>
<span class="go">  &lt;tbody&gt;</span>
<span class="go">    &lt;tr&gt;</span>
<span class="go">      &lt;th&gt;0&lt;/th&gt;</span>
<span class="go">      &lt;td&gt;-0.076467&lt;/td&gt;</span>
<span class="go">      &lt;td&gt;-1.187678&lt;/td&gt;</span>
<span class="go">    &lt;/tr&gt;</span>
<span class="go">    &lt;tr&gt;</span>
<span class="go">      &lt;th&gt;1&lt;/th&gt;</span>
<span class="go">      &lt;td&gt; 1.130127&lt;/td&gt;</span>
<span class="go">      &lt;td&gt;-1.436737&lt;/td&gt;</span>
<span class="go">    &lt;/tr&gt;</span>
<span class="go">  &lt;/tbody&gt;</span>
<span class="go">&lt;/table&gt;</span>
</pre></div>
</div>
<p>Finally, the <tt class="docutils literal"><span class="pre">escape</span></tt> argument allows you to control whether the
&#8220;&lt;&#8221;, &#8220;&gt;&#8221; and &#8220;&amp;&#8221; characters escaped in the resulting HTML (by default it is
<tt class="docutils literal"><span class="pre">True</span></tt>). So to get the HTML without escaped characters pass <tt class="docutils literal"><span class="pre">escape=False</span></tt></p>
<div class="highlight-ipython"><div class="highlight"><pre><span class="gp">In [177]: </span><span class="n">df</span> <span class="o">=</span> <span class="n">DataFrame</span><span class="p">({</span><span class="s">&#39;a&#39;</span><span class="p">:</span> <span class="nb">list</span><span class="p">(</span><span class="s">&#39;&amp;&lt;&gt;&#39;</span><span class="p">),</span> <span class="s">&#39;b&#39;</span><span class="p">:</span> <span class="n">randn</span><span class="p">(</span><span class="mi">3</span><span class="p">)})</span>
</pre></div>
</div>
<p>Escaped:</p>
<div class="highlight-ipython"><div class="highlight"><pre><span class="gp">In [178]: </span><span class="k">print</span><span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">to_html</span><span class="p">())</span>
<span class="go">&lt;table border=&quot;1&quot; class=&quot;dataframe&quot;&gt;</span>
<span class="go">  &lt;thead&gt;</span>
<span class="go">    &lt;tr style=&quot;text-align: right;&quot;&gt;</span>
<span class="go">      &lt;th&gt;&lt;/th&gt;</span>
<span class="go">      &lt;th&gt;a&lt;/th&gt;</span>
<span class="go">      &lt;th&gt;b&lt;/th&gt;</span>
<span class="go">    &lt;/tr&gt;</span>
<span class="go">  &lt;/thead&gt;</span>
<span class="go">  &lt;tbody&gt;</span>
<span class="go">    &lt;tr&gt;</span>
<span class="go">      &lt;th&gt;0&lt;/th&gt;</span>
<span class="go">      &lt;td&gt; &amp;amp;&lt;/td&gt;</span>
<span class="go">      &lt;td&gt;-1.413681&lt;/td&gt;</span>
<span class="go">    &lt;/tr&gt;</span>
<span class="go">    &lt;tr&gt;</span>
<span class="go">      &lt;th&gt;1&lt;/th&gt;</span>
<span class="go">      &lt;td&gt; &amp;lt;&lt;/td&gt;</span>
<span class="go">      &lt;td&gt; 1.607920&lt;/td&gt;</span>
<span class="go">    &lt;/tr&gt;</span>
<span class="go">    &lt;tr&gt;</span>
<span class="go">      &lt;th&gt;2&lt;/th&gt;</span>
<span class="go">      &lt;td&gt; &amp;gt;&lt;/td&gt;</span>
<span class="go">      &lt;td&gt; 1.024180&lt;/td&gt;</span>
<span class="go">    &lt;/tr&gt;</span>
<span class="go">  &lt;/tbody&gt;</span>
<span class="go">&lt;/table&gt;</span>
</pre></div>
</div>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>a</th>
      <th>b</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td> &amp;</td>
      <td>-1.413681</td>
    </tr>
    <tr>
      <th>1</th>
      <td> &lt;</td>
      <td> 1.607920</td>
    </tr>
    <tr>
      <th>2</th>
      <td> &gt;</td>
      <td> 1.024180</td>
    </tr>
  </tbody>
</table><p>Not escaped:</p>
<div class="highlight-ipython"><div class="highlight"><pre><span class="gp">In [179]: </span><span class="k">print</span><span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">to_html</span><span class="p">(</span><span class="n">escape</span><span class="o">=</span><span class="bp">False</span><span class="p">))</span>
<span class="go">&lt;table border=&quot;1&quot; class=&quot;dataframe&quot;&gt;</span>
<span class="go">  &lt;thead&gt;</span>
<span class="go">    &lt;tr style=&quot;text-align: right;&quot;&gt;</span>
<span class="go">      &lt;th&gt;&lt;/th&gt;</span>
<span class="go">      &lt;th&gt;a&lt;/th&gt;</span>
<span class="go">      &lt;th&gt;b&lt;/th&gt;</span>
<span class="go">    &lt;/tr&gt;</span>
<span class="go">  &lt;/thead&gt;</span>
<span class="go">  &lt;tbody&gt;</span>
<span class="go">    &lt;tr&gt;</span>
<span class="go">      &lt;th&gt;0&lt;/th&gt;</span>
<span class="go">      &lt;td&gt; &amp;&lt;/td&gt;</span>
<span class="go">      &lt;td&gt;-1.413681&lt;/td&gt;</span>
<span class="go">    &lt;/tr&gt;</span>
<span class="go">    &lt;tr&gt;</span>
<span class="go">      &lt;th&gt;1&lt;/th&gt;</span>
<span class="go">      &lt;td&gt; &lt;&lt;/td&gt;</span>
<span class="go">      &lt;td&gt; 1.607920&lt;/td&gt;</span>
<span class="go">    &lt;/tr&gt;</span>
<span class="go">    &lt;tr&gt;</span>
<span class="go">      &lt;th&gt;2&lt;/th&gt;</span>
<span class="go">      &lt;td&gt; &gt;&lt;/td&gt;</span>
<span class="go">      &lt;td&gt; 1.024180&lt;/td&gt;</span>
<span class="go">    &lt;/tr&gt;</span>
<span class="go">  &lt;/tbody&gt;</span>
<span class="go">&lt;/table&gt;</span>
</pre></div>
</div>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>a</th>
      <th>b</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td> &</td>
      <td>-1.413681</td>
    </tr>
    <tr>
      <th>1</th>
      <td> <</td>
      <td> 1.607920</td>
    </tr>
    <tr>
      <th>2</th>
      <td> ></td>
      <td> 1.024180</td>
    </tr>
  </tbody>
</table><div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Some browsers may not show a difference in the rendering of the previous two
HTML tables.</p>
</div>
</div>
</div>
<div class="section" id="clipboard">
<h2>Clipboard<a class="headerlink" href="#clipboard" title="Permalink to this headline">¶</a></h2>
<p id="io-clipboard">A handy way to grab data is to use the <tt class="docutils literal"><span class="pre">read_clipboard</span></tt> method, which takes
the contents of the clipboard buffer and passes them to the <tt class="docutils literal"><span class="pre">read_table</span></tt>
method. For instance, you can copy the following
text to the clipboard (CTRL-C on many operating systems):</p>
<div class="highlight-python"><div class="highlight"><pre>  <span class="n">A</span> <span class="n">B</span> <span class="n">C</span>
<span class="n">x</span> <span class="mi">1</span> <span class="mi">4</span> <span class="n">p</span>
<span class="n">y</span> <span class="mi">2</span> <span class="mi">5</span> <span class="n">q</span>
<span class="n">z</span> <span class="mi">3</span> <span class="mi">6</span> <span class="n">r</span>
</pre></div>
</div>
<p>And then import the data directly to a DataFrame by calling:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">clipdf</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_clipboard</span><span class="p">()</span>
</pre></div>
</div>
<div class="highlight-ipython"><div class="highlight"><pre><span class="gp">In [180]: </span><span class="n">clipdf</span>

<span class="go">   A  B  C</span>
<span class="go">x  1  4  p</span>
<span class="go">y  2  5  q</span>
<span class="go">z  3  6  r</span>
</pre></div>
</div>
<p>The <tt class="docutils literal"><span class="pre">to_clipboard</span></tt> method can be used to write the contents of a DataFrame to
the clipboard. Following which you can paste the clipboard contents into other
applications (CTRL-V on many operating systems). Here we illustrate writing a
DataFrame into clipboard and reading it back.</p>
<div class="highlight-ipython"><div class="highlight"><pre><span class="gp">In [181]: </span><span class="n">df</span><span class="o">=</span><span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">randn</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span><span class="mi">3</span><span class="p">))</span>

<span class="gp">In [182]: </span><span class="n">df</span>

<span class="go">          0         1         2</span>
<span class="go">0  0.569605  0.875906 -2.211372</span>
<span class="go">1  0.974466 -2.006747 -0.410001</span>
<span class="go">2 -0.078638  0.545952 -1.219217</span>
<span class="go">3 -1.226825  0.769804 -1.281247</span>
<span class="go">4 -0.727707 -0.121306 -0.097883</span>

<span class="gp">In [183]: </span><span class="n">df</span><span class="o">.</span><span class="n">to_clipboard</span><span class="p">()</span>

<span class="gp">In [184]: </span><span class="n">pd</span><span class="o">.</span><span class="n">read_clipboard</span><span class="p">()</span>

<span class="go">          0         1         2</span>
<span class="go">0  0.569605  0.875906 -2.211372</span>
<span class="go">1  0.974466 -2.006747 -0.410001</span>
<span class="go">2 -0.078638  0.545952 -1.219217</span>
<span class="go">3 -1.226825  0.769804 -1.281247</span>
<span class="go">4 -0.727707 -0.121306 -0.097883</span>
</pre></div>
</div>
<p>We can see that we got the same content back, which we had earlier written to the clipboard.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">You may need to install xclip or xsel (with gtk or PyQt4 modules) on Linux to use these methods.</p>
</div>
</div>
<div class="section" id="pickling-and-serialization">
<span id="io-serialize"></span><h2>Pickling and serialization<a class="headerlink" href="#pickling-and-serialization" title="Permalink to this headline">¶</a></h2>
<p>All pandas objects are equipped with <tt class="docutils literal"><span class="pre">to_pickle</span></tt> methods which use Python&#8217;s
<tt class="docutils literal"><span class="pre">cPickle</span></tt> module to save data structures to disk using the pickle format.</p>
<div class="highlight-ipython"><div class="highlight"><pre><span class="gp">In [185]: </span><span class="n">df</span>

<span class="go">          0         1         2</span>
<span class="go">0  0.569605  0.875906 -2.211372</span>
<span class="go">1  0.974466 -2.006747 -0.410001</span>
<span class="go">2 -0.078638  0.545952 -1.219217</span>
<span class="go">3 -1.226825  0.769804 -1.281247</span>
<span class="go">4 -0.727707 -0.121306 -0.097883</span>

<span class="gp">In [186]: </span><span class="n">df</span><span class="o">.</span><span class="n">to_pickle</span><span class="p">(</span><span class="s">&#39;foo.pkl&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>The <tt class="docutils literal"><span class="pre">read_pickle</span></tt> function in the <tt class="docutils literal"><span class="pre">pandas</span></tt> namespace can be used to load
any pickled pandas object (or any other pickled object) from file:</p>
<div class="highlight-ipython"><div class="highlight"><pre><span class="gp">In [187]: </span><span class="n">read_pickle</span><span class="p">(</span><span class="s">&#39;foo.pkl&#39;</span><span class="p">)</span>

<span class="go">          0         1         2</span>
<span class="go">0  0.569605  0.875906 -2.211372</span>
<span class="go">1  0.974466 -2.006747 -0.410001</span>
<span class="go">2 -0.078638  0.545952 -1.219217</span>
<span class="go">3 -1.226825  0.769804 -1.281247</span>
<span class="go">4 -0.727707 -0.121306 -0.097883</span>
</pre></div>
</div>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p>Loading pickled data received from untrusted sources can be unsafe.</p>
<p class="last">See: <a class="reference external" href="http://docs.python.org/2.7/library/pickle.html">http://docs.python.org/2.7/library/pickle.html</a></p>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">These methods were previously <tt class="docutils literal"><span class="pre">save</span></tt> and <tt class="docutils literal"><span class="pre">load</span></tt>, now deprecated.</p>
</div>
</div>
<div class="section" id="excel-files">
<span id="io-excel"></span><h2>Excel files<a class="headerlink" href="#excel-files" title="Permalink to this headline">¶</a></h2>
<p>The <tt class="docutils literal"><span class="pre">read_excel</span></tt> method can read Excel 2003 (<tt class="docutils literal"><span class="pre">.xls</span></tt>) and
Excel 2007 (<tt class="docutils literal"><span class="pre">.xlsx</span></tt>) files using the <tt class="docutils literal"><span class="pre">xlrd</span></tt> Python
module and use the same parsing code as the above to convert tabular data into
a DataFrame. See the <a class="reference internal" href="cookbook.html#cookbook-excel"><em>cookbook</em></a> for some
advanced strategies</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>The prior method of accessing Excel is now deprecated as of 0.12,
this will work but will be removed in a future version.</p>
<blockquote>
<div><div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">pandas.io.parsers</span> <span class="kn">import</span> <span class="n">ExcelFile</span>
<span class="n">xls</span> <span class="o">=</span> <span class="n">ExcelFile</span><span class="p">(</span><span class="s">&#39;path_to_file.xls&#39;</span><span class="p">)</span>
<span class="n">xls</span><span class="o">.</span><span class="n">parse</span><span class="p">(</span><span class="s">&#39;Sheet1&#39;</span><span class="p">,</span> <span class="n">index_col</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">na_values</span><span class="o">=</span><span class="p">[</span><span class="s">&#39;NA&#39;</span><span class="p">])</span>
</pre></div>
</div>
</div></blockquote>
<p>Replaced by</p>
<blockquote class="last">
<div><div class="highlight-python"><div class="highlight"><pre><span class="n">read_excel</span><span class="p">(</span><span class="s">&#39;path_to_file.xls&#39;</span><span class="p">,</span> <span class="s">&#39;Sheet1&#39;</span><span class="p">,</span> <span class="n">index_col</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">na_values</span><span class="o">=</span><span class="p">[</span><span class="s">&#39;NA&#39;</span><span class="p">])</span>
</pre></div>
</div>
</div></blockquote>
</div>
<div class="versionadded">
<p><span>New in version 0.13.</span></p>
</div>
<p>There are now two ways to read in sheets from an Excel file. You can provide
either the index of a sheet or its name. If the value provided is an integer
then it is assumed that the integer refers to the index of a sheet, otherwise
if a string is passed then it is assumed that the string refers to the name of
a particular sheet in the file.</p>
<p>Using the sheet name:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">read_excel</span><span class="p">(</span><span class="s">&#39;path_to_file.xls&#39;</span><span class="p">,</span> <span class="s">&#39;Sheet1&#39;</span><span class="p">,</span> <span class="n">index_col</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">na_values</span><span class="o">=</span><span class="p">[</span><span class="s">&#39;NA&#39;</span><span class="p">])</span>
</pre></div>
</div>
<p>Using the sheet index:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">read_excel</span><span class="p">(</span><span class="s">&#39;path_to_file.xls&#39;</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">index_col</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">na_values</span><span class="o">=</span><span class="p">[</span><span class="s">&#39;NA&#39;</span><span class="p">])</span>
</pre></div>
</div>
<p>It is often the case that users will insert columns to do temporary computations
in Excel and you may not want to read in those columns. <cite>read_excel</cite> takes
a <cite>parse_cols</cite> keyword to allow you to specify a subset of columns to parse.</p>
<p>If <cite>parse_cols</cite> is an integer, then it is assumed to indicate the last column
to be parsed.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">read_excel</span><span class="p">(</span><span class="s">&#39;path_to_file.xls&#39;</span><span class="p">,</span> <span class="s">&#39;Sheet1&#39;</span><span class="p">,</span> <span class="n">parse_cols</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">index_col</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">na_values</span><span class="o">=</span><span class="p">[</span><span class="s">&#39;NA&#39;</span><span class="p">])</span>
</pre></div>
</div>
<p>If <cite>parse_cols</cite> is a list of integers, then it is assumed to be the file column
indices to be parsed.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">read_excel</span><span class="p">(</span><span class="s">&#39;path_to_file.xls&#39;</span><span class="p">,</span> <span class="s">&#39;Sheet1&#39;</span><span class="p">,</span> <span class="n">parse_cols</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">],</span> <span class="n">index_col</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">na_values</span><span class="o">=</span><span class="p">[</span><span class="s">&#39;NA&#39;</span><span class="p">])</span>
</pre></div>
</div>
<p>To write a DataFrame object to a sheet of an Excel file, you can use the
<tt class="docutils literal"><span class="pre">to_excel</span></tt> instance method.  The arguments are largely the same as <tt class="docutils literal"><span class="pre">to_csv</span></tt>
described above, the first argument being the name of the excel file, and the
optional second argument the name of the sheet to which the DataFrame should be
written.  For example:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">df</span><span class="o">.</span><span class="n">to_excel</span><span class="p">(</span><span class="s">&#39;path_to_file.xlsx&#39;</span><span class="p">,</span> <span class="n">sheet_name</span><span class="o">=</span><span class="s">&#39;Sheet1&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>Files with a <tt class="docutils literal"><span class="pre">.xls</span></tt> extension will be written using <tt class="docutils literal"><span class="pre">xlwt</span></tt> and those with
a <tt class="docutils literal"><span class="pre">.xlsx</span></tt> extension will be written using <tt class="docutils literal"><span class="pre">openpyxl</span></tt>.
The Panel class also has a <tt class="docutils literal"><span class="pre">to_excel</span></tt> instance method,
which writes each DataFrame in the Panel to a separate sheet.</p>
<p>In order to write separate DataFrames to separate sheets in a single Excel file,
one can pass an <tt class="xref py py-class docutils literal"><span class="pre">ExcelWriter</span></tt>.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="k">with</span> <span class="n">ExcelWriter</span><span class="p">(</span><span class="s">&#39;path_to_file.xlsx&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">writer</span><span class="p">:</span>
    <span class="n">df1</span><span class="o">.</span><span class="n">to_excel</span><span class="p">(</span><span class="n">writer</span><span class="p">,</span> <span class="n">sheet_name</span><span class="o">=</span><span class="s">&#39;Sheet1&#39;</span><span class="p">)</span>
    <span class="n">df2</span><span class="o">.</span><span class="n">to_excel</span><span class="p">(</span><span class="n">writer</span><span class="p">,</span> <span class="n">sheet_name</span><span class="o">=</span><span class="s">&#39;Sheet2&#39;</span><span class="p">)</span>
</pre></div>
</div>
<div class="section" id="excel-writer-engines">
<span id="io-excel-writers"></span><h3>Excel writer engines<a class="headerlink" href="#excel-writer-engines" title="Permalink to this headline">¶</a></h3>
<div class="versionadded">
<p><span>New in version 0.13.</span></p>
</div>
<p><tt class="docutils literal"><span class="pre">pandas</span></tt> chooses an Excel writer via two methods:</p>
<ol class="arabic simple">
<li>the <tt class="docutils literal"><span class="pre">engine</span></tt> keyword argument</li>
<li>the filename extension (via the default specified in config options)</li>
</ol>
<p>By default, <tt class="docutils literal"><span class="pre">pandas</span></tt> uses  <a class="reference external" href="http://packages.python.org/openpyxl/">openpyxl</a>
for <tt class="docutils literal"><span class="pre">.xlsx</span></tt> and <tt class="docutils literal"><span class="pre">.xlsm</span></tt> files and <a class="reference external" href="http://www.python-excel.org/">xlwt</a>
for <tt class="docutils literal"><span class="pre">.xls</span></tt> files.  If you have multiple engines installed, you can set the
default engine through <a class="reference internal" href="basics.html#basics-working-with-options"><em>setting the config options</em></a>
<tt class="docutils literal"><span class="pre">io.excel.xlsx.writer</span></tt> and <tt class="docutils literal"><span class="pre">io.excel.xls.writer</span></tt>.</p>
<p>For example if the <a class="reference external" href="http://xlsxwriter.readthedocs.org">XlsxWriter</a>
module is installed you can use it as a xlsx writer engine as follows:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="c"># By setting the &#39;engine&#39; in the DataFrame and Panel &#39;to_excel()&#39; methods.</span>
<span class="n">df</span><span class="o">.</span><span class="n">to_excel</span><span class="p">(</span><span class="s">&#39;path_to_file.xlsx&#39;</span><span class="p">,</span> <span class="n">sheet_name</span><span class="o">=</span><span class="s">&#39;Sheet1&#39;</span><span class="p">,</span> <span class="n">engine</span><span class="o">=</span><span class="s">&#39;xlsxwriter&#39;</span><span class="p">)</span>

<span class="c"># By setting the &#39;engine&#39; in the ExcelWriter constructor.</span>
<span class="n">writer</span> <span class="o">=</span> <span class="n">ExcelWriter</span><span class="p">(</span><span class="s">&#39;path_to_file.xlsx&#39;</span><span class="p">,</span> <span class="n">engine</span><span class="o">=</span><span class="s">&#39;xlsxwriter&#39;</span><span class="p">)</span>

<span class="c"># Or via pandas configuration.</span>
<span class="kn">from</span> <span class="nn">pandas</span> <span class="kn">import</span> <span class="n">options</span>
<span class="n">options</span><span class="o">.</span><span class="n">io</span><span class="o">.</span><span class="n">excel</span><span class="o">.</span><span class="n">xlsx</span><span class="o">.</span><span class="n">writer</span> <span class="o">=</span> <span class="s">&#39;xlsxwriter&#39;</span>

<span class="n">df</span><span class="o">.</span><span class="n">to_excel</span><span class="p">(</span><span class="s">&#39;path_to_file.xlsx&#39;</span><span class="p">,</span> <span class="n">sheet_name</span><span class="o">=</span><span class="s">&#39;Sheet1&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="serialization">
<span id="io-hdf5"></span><h2>Serialization<a class="headerlink" href="#serialization" title="Permalink to this headline">¶</a></h2>
<div class="section" id="msgpack-experimental">
<h3>msgpack (experimental)<a class="headerlink" href="#msgpack-experimental" title="Permalink to this headline">¶</a></h3>
<div class="versionadded" id="io-msgpack">
<p><span>New in version 0.13.0.</span></p>
</div>
<p>Starting in 0.13.0, pandas is supporting the <tt class="docutils literal"><span class="pre">msgpack</span></tt> format for
object serialization. This is a lightweight portable binary format, similar
to binary JSON, that is highly space efficient, and provides good performance
both on the writing (serialization), and reading (deserialization).</p>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">This is a very new feature of pandas. We intend to provide certain
optimizations in the io of the <tt class="docutils literal"><span class="pre">msgpack</span></tt> data. Since this is marked
as an EXPERIMENTAL LIBRARY, the storage format may not be stable until a future release.</p>
</div>
<div class="highlight-ipython"><div class="highlight"><pre><span class="gp">In [188]: </span><span class="n">df</span> <span class="o">=</span> <span class="n">DataFrame</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">rand</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span><span class="mi">2</span><span class="p">),</span><span class="n">columns</span><span class="o">=</span><span class="nb">list</span><span class="p">(</span><span class="s">&#39;AB&#39;</span><span class="p">))</span>

<span class="gp">In [189]: </span><span class="n">df</span><span class="o">.</span><span class="n">to_msgpack</span><span class="p">(</span><span class="s">&#39;foo.msg&#39;</span><span class="p">)</span>

<span class="gp">In [190]: </span><span class="n">pd</span><span class="o">.</span><span class="n">read_msgpack</span><span class="p">(</span><span class="s">&#39;foo.msg&#39;</span><span class="p">)</span>

<span class="go">          A         B</span>
<span class="go">0  0.689681  0.886192</span>
<span class="go">1  0.279224  0.690829</span>
<span class="go">2  0.606042  0.060974</span>
<span class="go">3  0.168593  0.913318</span>
<span class="go">4  0.765949  0.216804</span>

<span class="gp">In [191]: </span><span class="n">s</span> <span class="o">=</span> <span class="n">Series</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">rand</span><span class="p">(</span><span class="mi">5</span><span class="p">),</span><span class="n">index</span><span class="o">=</span><span class="n">date_range</span><span class="p">(</span><span class="s">&#39;20130101&#39;</span><span class="p">,</span><span class="n">periods</span><span class="o">=</span><span class="mi">5</span><span class="p">))</span>
</pre></div>
</div>
<p>You can pass a list of objects and you will receive them back on deserialization.</p>
<div class="highlight-ipython"><div class="highlight"><pre><span class="gp">In [192]: </span><span class="n">pd</span><span class="o">.</span><span class="n">to_msgpack</span><span class="p">(</span><span class="s">&#39;foo.msg&#39;</span><span class="p">,</span> <span class="n">df</span><span class="p">,</span> <span class="s">&#39;foo&#39;</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">]),</span> <span class="n">s</span><span class="p">)</span>

<span class="gp">In [193]: </span><span class="n">pd</span><span class="o">.</span><span class="n">read_msgpack</span><span class="p">(</span><span class="s">&#39;foo.msg&#39;</span><span class="p">)</span>

<span class="go">[          A         B</span>
<span class="go">0  0.689681  0.886192</span>
<span class="go">1  0.279224  0.690829</span>
<span class="go">2  0.606042  0.060974</span>
<span class="go">3  0.168593  0.913318</span>
<span class="go">4  0.765949  0.216804,</span>
<span class="go"> u&#39;foo&#39;,</span>
<span class="go"> array([1, 2, 3]),</span>
<span class="go"> 2013-01-01    0.936416</span>
<span class="go">2013-01-02    0.690928</span>
<span class="go">2013-01-03    0.932143</span>
<span class="go">2013-01-04    0.277999</span>
<span class="go">2013-01-05    0.022704</span>
<span class="go">Freq: D, dtype: float64]</span>
</pre></div>
</div>
<p>You can pass <tt class="docutils literal"><span class="pre">iterator=True</span></tt> to iterate over the unpacked results</p>
<div class="highlight-ipython"><div class="highlight"><pre><span class="gp">In [194]: </span><span class="k">for</span> <span class="n">o</span> <span class="ow">in</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_msgpack</span><span class="p">(</span><span class="s">&#39;foo.msg&#39;</span><span class="p">,</span><span class="n">iterator</span><span class="o">=</span><span class="bp">True</span><span class="p">):</span>
<span class="gp">   .....:</span>     <span class="k">print</span> <span class="n">o</span>
<span class="gp">   .....:</span> 
<span class="go">          A         B</span>
<span class="go">0  0.689681  0.886192</span>
<span class="go">1  0.279224  0.690829</span>
<span class="go">2  0.606042  0.060974</span>
<span class="go">3  0.168593  0.913318</span>
<span class="go">4  0.765949  0.216804</span>
<span class="go">foo</span>
<span class="go">[1 2 3]</span>
<span class="go">2013-01-01    0.936416</span>
<span class="go">2013-01-02    0.690928</span>
<span class="go">2013-01-03    0.932143</span>
<span class="go">2013-01-04    0.277999</span>
<span class="go">2013-01-05    0.022704</span>
<span class="go">Freq: D, dtype: float64</span>
</pre></div>
</div>
<p>You can pass <tt class="docutils literal"><span class="pre">append=True</span></tt> to the writer to append to an existing pack</p>
<div class="highlight-ipython"><div class="highlight"><pre><span class="gp">In [195]: </span><span class="n">df</span><span class="o">.</span><span class="n">to_msgpack</span><span class="p">(</span><span class="s">&#39;foo.msg&#39;</span><span class="p">,</span><span class="n">append</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>

<span class="gp">In [196]: </span><span class="n">pd</span><span class="o">.</span><span class="n">read_msgpack</span><span class="p">(</span><span class="s">&#39;foo.msg&#39;</span><span class="p">)</span>

<span class="go">[          A         B</span>
<span class="go">0  0.689681  0.886192</span>
<span class="go">1  0.279224  0.690829</span>
<span class="go">2  0.606042  0.060974</span>
<span class="go">3  0.168593  0.913318</span>
<span class="go">4  0.765949  0.216804,</span>
<span class="go"> u&#39;foo&#39;,</span>
<span class="go"> array([1, 2, 3]),</span>
<span class="go"> 2013-01-01    0.936416</span>
<span class="go">2013-01-02    0.690928</span>
<span class="go">2013-01-03    0.932143</span>
<span class="go">2013-01-04    0.277999</span>
<span class="go">2013-01-05    0.022704</span>
<span class="go">Freq: D, dtype: float64,</span>
<span class="go">           A         B</span>
<span class="go">0  0.689681  0.886192</span>
<span class="go">1  0.279224  0.690829</span>
<span class="go">2  0.606042  0.060974</span>
<span class="go">3  0.168593  0.913318</span>
<span class="go">4  0.765949  0.216804]</span>
</pre></div>
</div>
<p>Unlike other io methods, <tt class="docutils literal"><span class="pre">to_msgpack</span></tt> is available on both a per-object basis,
<tt class="docutils literal"><span class="pre">df.to_msgpack()</span></tt> and using the top-level <tt class="docutils literal"><span class="pre">pd.to_msgpack(...)</span></tt> where you
can pack arbitrary collections of python lists, dicts, scalars, while intermixing
pandas objects.</p>
<div class="highlight-ipython"><div class="highlight"><pre><span class="gp">In [197]: </span><span class="n">pd</span><span class="o">.</span><span class="n">to_msgpack</span><span class="p">(</span><span class="s">&#39;foo2.msg&#39;</span><span class="p">,</span> <span class="p">{</span> <span class="s">&#39;dict&#39;</span> <span class="p">:</span> <span class="p">[</span> <span class="p">{</span> <span class="s">&#39;df&#39;</span> <span class="p">:</span> <span class="n">df</span> <span class="p">},</span> <span class="p">{</span> <span class="s">&#39;string&#39;</span> <span class="p">:</span> <span class="s">&#39;foo&#39;</span> <span class="p">},</span> <span class="p">{</span> <span class="s">&#39;scalar&#39;</span> <span class="p">:</span> <span class="mf">1.</span> <span class="p">},</span> <span class="p">{</span> <span class="s">&#39;s&#39;</span> <span class="p">:</span> <span class="n">s</span> <span class="p">}</span> <span class="p">]</span> <span class="p">})</span>

<span class="gp">In [198]: </span><span class="n">pd</span><span class="o">.</span><span class="n">read_msgpack</span><span class="p">(</span><span class="s">&#39;foo2.msg&#39;</span><span class="p">)</span>

<span class="go">{u&#39;dict&#39;: ({u&#39;df&#39;:           A         B</span>
<span class="go">0  0.689681  0.886192</span>
<span class="go">1  0.279224  0.690829</span>
<span class="go">2  0.606042  0.060974</span>
<span class="go">3  0.168593  0.913318</span>
<span class="go">4  0.765949  0.216804},</span>
<span class="go">  {u&#39;string&#39;: u&#39;foo&#39;},</span>
<span class="go">  {u&#39;scalar&#39;: 1.0},</span>
<span class="go">  {u&#39;s&#39;: 2013-01-01    0.936416</span>
<span class="go">2013-01-02    0.690928</span>
<span class="go">2013-01-03    0.932143</span>
<span class="go">2013-01-04    0.277999</span>
<span class="go">2013-01-05    0.022704</span>
<span class="go">Freq: D, dtype: float64})}</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="hdf5-pytables">
<h2>HDF5 (PyTables)<a class="headerlink" href="#hdf5-pytables" title="Permalink to this headline">¶</a></h2>
<p><tt class="docutils literal"><span class="pre">HDFStore</span></tt> is a dict-like object which reads and writes pandas using
the high performance HDF5 format using the excellent <a class="reference external" href="http://www.pytables.org/">PyTables</a> library. See the <a class="reference internal" href="cookbook.html#cookbook-hdf"><em>cookbook</em></a>
for some advanced strategies</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last"><tt class="docutils literal"><span class="pre">PyTables</span></tt> 3.0.0 was recently released to enable support for Python 3.
Pandas should be fully compatible (and previously written stores should be
backwards compatible) with all <tt class="docutils literal"><span class="pre">PyTables</span></tt> &gt;= 2.3. For <tt class="docutils literal"><span class="pre">python</span> <span class="pre">&gt;=</span> <span class="pre">3.2</span></tt>,
<tt class="docutils literal"><span class="pre">pandas</span> <span class="pre">&gt;=</span> <span class="pre">0.12.0</span></tt> is required for compatibility.</p>
</div>
<div class="highlight-ipython"><div class="highlight"><pre><span class="gp">In [199]: </span><span class="n">store</span> <span class="o">=</span> <span class="n">HDFStore</span><span class="p">(</span><span class="s">&#39;store.h5&#39;</span><span class="p">)</span>

<span class="gp">In [200]: </span><span class="k">print</span><span class="p">(</span><span class="n">store</span><span class="p">)</span>
<span class="go">&lt;class &#39;pandas.io.pytables.HDFStore&#39;&gt;</span>
<span class="go">File path: store.h5</span>
<span class="go">Empty</span>
</pre></div>
</div>
<p>Objects can be written to the file just like adding key-value pairs to a
dict:</p>
<div class="highlight-ipython"><div class="highlight"><pre><span class="gp">In [201]: </span><span class="n">index</span> <span class="o">=</span> <span class="n">date_range</span><span class="p">(</span><span class="s">&#39;1/1/2000&#39;</span><span class="p">,</span> <span class="n">periods</span><span class="o">=</span><span class="mi">8</span><span class="p">)</span>

<span class="gp">In [202]: </span><span class="n">s</span> <span class="o">=</span> <span class="n">Series</span><span class="p">(</span><span class="n">randn</span><span class="p">(</span><span class="mi">5</span><span class="p">),</span> <span class="n">index</span><span class="o">=</span><span class="p">[</span><span class="s">&#39;a&#39;</span><span class="p">,</span> <span class="s">&#39;b&#39;</span><span class="p">,</span> <span class="s">&#39;c&#39;</span><span class="p">,</span> <span class="s">&#39;d&#39;</span><span class="p">,</span> <span class="s">&#39;e&#39;</span><span class="p">])</span>

<span class="gp">In [203]: </span><span class="n">df</span> <span class="o">=</span> <span class="n">DataFrame</span><span class="p">(</span><span class="n">randn</span><span class="p">(</span><span class="mi">8</span><span class="p">,</span> <span class="mi">3</span><span class="p">),</span> <span class="n">index</span><span class="o">=</span><span class="n">index</span><span class="p">,</span>
<span class="gp">   .....:</span>                <span class="n">columns</span><span class="o">=</span><span class="p">[</span><span class="s">&#39;A&#39;</span><span class="p">,</span> <span class="s">&#39;B&#39;</span><span class="p">,</span> <span class="s">&#39;C&#39;</span><span class="p">])</span>
<span class="gp">   .....:</span> 

<span class="gp">In [204]: </span><span class="n">wp</span> <span class="o">=</span> <span class="n">Panel</span><span class="p">(</span><span class="n">randn</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">4</span><span class="p">),</span> <span class="n">items</span><span class="o">=</span><span class="p">[</span><span class="s">&#39;Item1&#39;</span><span class="p">,</span> <span class="s">&#39;Item2&#39;</span><span class="p">],</span>
<span class="gp">   .....:</span>            <span class="n">major_axis</span><span class="o">=</span><span class="n">date_range</span><span class="p">(</span><span class="s">&#39;1/1/2000&#39;</span><span class="p">,</span> <span class="n">periods</span><span class="o">=</span><span class="mi">5</span><span class="p">),</span>
<span class="gp">   .....:</span>            <span class="n">minor_axis</span><span class="o">=</span><span class="p">[</span><span class="s">&#39;A&#39;</span><span class="p">,</span> <span class="s">&#39;B&#39;</span><span class="p">,</span> <span class="s">&#39;C&#39;</span><span class="p">,</span> <span class="s">&#39;D&#39;</span><span class="p">])</span>
<span class="gp">   .....:</span> 

<span class="c"># store.put(&#39;s&#39;, s) is an equivalent method</span>
<span class="gp">In [205]: </span><span class="n">store</span><span class="p">[</span><span class="s">&#39;s&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">s</span>

<span class="gp">In [206]: </span><span class="n">store</span><span class="p">[</span><span class="s">&#39;df&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">df</span>

<span class="gp">In [207]: </span><span class="n">store</span><span class="p">[</span><span class="s">&#39;wp&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">wp</span>

<span class="c"># the type of stored data</span>
<span class="gp">In [208]: </span><span class="n">store</span><span class="o">.</span><span class="n">root</span><span class="o">.</span><span class="n">wp</span><span class="o">.</span><span class="n">_v_attrs</span><span class="o">.</span><span class="n">pandas_type</span>
<span class="go">&#39;wide&#39;</span>

<span class="gp">In [209]: </span><span class="n">store</span>

<span class="go">&lt;class &#39;pandas.io.pytables.HDFStore&#39;&gt;</span>
<span class="go">File path: store.h5</span>
<span class="go">/df            frame        (shape-&gt;[8,3])  </span>
<span class="go">/s             series       (shape-&gt;[5])    </span>
<span class="go">/wp            wide         (shape-&gt;[2,5,4])</span>
</pre></div>
</div>
<p>In a current or later Python session, you can retrieve stored objects:</p>
<div class="highlight-ipython"><div class="highlight"><pre><span class="c"># store.get(&#39;df&#39;) is an equivalent method</span>
<span class="gp">In [210]: </span><span class="n">store</span><span class="p">[</span><span class="s">&#39;df&#39;</span><span class="p">]</span>

<span class="go">                   A         B         C</span>
<span class="go">2000-01-01 -1.814470  1.018601 -0.595447</span>
<span class="go">2000-01-02  1.395433 -0.392670  0.007207</span>
<span class="go">2000-01-03  1.928123 -0.055224  2.395985</span>
<span class="go">2000-01-04  1.552825  0.166599  0.047609</span>
<span class="go">2000-01-05 -0.136473 -0.561757 -1.623033</span>
<span class="go">2000-01-06  0.029399 -0.542108  0.282696</span>
<span class="go">2000-01-07 -0.087302 -1.575170  1.771208</span>
<span class="go">2000-01-08  0.816482  1.100230 -0.612665</span>

<span class="c"># dotted (attribute) access provides get as well</span>
<span class="gp">In [211]: </span><span class="n">store</span><span class="o">.</span><span class="n">df</span>

<span class="go">                   A         B         C</span>
<span class="go">2000-01-01 -1.814470  1.018601 -0.595447</span>
<span class="go">2000-01-02  1.395433 -0.392670  0.007207</span>
<span class="go">2000-01-03  1.928123 -0.055224  2.395985</span>
<span class="go">2000-01-04  1.552825  0.166599  0.047609</span>
<span class="go">2000-01-05 -0.136473 -0.561757 -1.623033</span>
<span class="go">2000-01-06  0.029399 -0.542108  0.282696</span>
<span class="go">2000-01-07 -0.087302 -1.575170  1.771208</span>
<span class="go">2000-01-08  0.816482  1.100230 -0.612665</span>
</pre></div>
</div>
<p>Deletion of the object specified by the key</p>
<div class="highlight-ipython"><div class="highlight"><pre><span class="c"># store.remove(&#39;wp&#39;) is an equivalent method</span>
<span class="gp">In [212]: </span><span class="k">del</span> <span class="n">store</span><span class="p">[</span><span class="s">&#39;wp&#39;</span><span class="p">]</span>

<span class="gp">In [213]: </span><span class="n">store</span>

<span class="go">&lt;class &#39;pandas.io.pytables.HDFStore&#39;&gt;</span>
<span class="go">File path: store.h5</span>
<span class="go">/df            frame        (shape-&gt;[8,3])</span>
<span class="go">/s             series       (shape-&gt;[5])  </span>
</pre></div>
</div>
<p>Closing a Store, Context Manager</p>
<div class="highlight-ipython"><div class="highlight"><pre><span class="gp">In [214]: </span><span class="n">store</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>

<span class="gp">In [215]: </span><span class="n">store</span>

<span class="go">&lt;class &#39;pandas.io.pytables.HDFStore&#39;&gt;</span>
<span class="go">File path: store.h5</span>
<span class="go">File is CLOSED</span>

<span class="gp">In [216]: </span><span class="n">store</span><span class="o">.</span><span class="n">is_open</span>
<span class="go">False</span>

<span class="c"># Working with, and automatically closing the store with the context</span>
<span class="c"># manager</span>
<span class="gp">In [217]: </span><span class="k">with</span> <span class="n">get_store</span><span class="p">(</span><span class="s">&#39;store.h5&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">store</span><span class="p">:</span>
<span class="gp">   .....:</span>     <span class="n">store</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span>
<span class="gp">   .....:</span> 
</pre></div>
</div>
<div class="section" id="read-write-api">
<h3>Read/Write API<a class="headerlink" href="#read-write-api" title="Permalink to this headline">¶</a></h3>
<p><tt class="docutils literal"><span class="pre">HDFStore</span></tt> supports an top-level API using  <tt class="docutils literal"><span class="pre">read_hdf</span></tt> for reading and <tt class="docutils literal"><span class="pre">to_hdf</span></tt> for writing,
similar to how <tt class="docutils literal"><span class="pre">read_csv</span></tt> and <tt class="docutils literal"><span class="pre">to_csv</span></tt> work. (new in 0.11.0)</p>
<div class="highlight-ipython"><div class="highlight"><pre><span class="gp">In [218]: </span><span class="n">df_tl</span> <span class="o">=</span> <span class="n">DataFrame</span><span class="p">(</span><span class="nb">dict</span><span class="p">(</span><span class="n">A</span><span class="o">=</span><span class="nb">list</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">5</span><span class="p">)),</span> <span class="n">B</span><span class="o">=</span><span class="nb">list</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">5</span><span class="p">))))</span>

<span class="gp">In [219]: </span><span class="n">df_tl</span><span class="o">.</span><span class="n">to_hdf</span><span class="p">(</span><span class="s">&#39;store_tl.h5&#39;</span><span class="p">,</span><span class="s">&#39;table&#39;</span><span class="p">,</span><span class="n">append</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>

<span class="gp">In [220]: </span><span class="n">read_hdf</span><span class="p">(</span><span class="s">&#39;store_tl.h5&#39;</span><span class="p">,</span> <span class="s">&#39;table&#39;</span><span class="p">,</span> <span class="n">where</span> <span class="o">=</span> <span class="p">[</span><span class="s">&#39;index&gt;2&#39;</span><span class="p">])</span>

<span class="go">   A  B</span>
<span class="go">3  3  3</span>
<span class="go">4  4  4</span>
</pre></div>
</div>
</div>
<div class="section" id="fixed-format">
<span id="io-hdf5-fixed"></span><h3>Fixed Format<a class="headerlink" href="#fixed-format" title="Permalink to this headline">¶</a></h3>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">This was prior to 0.13.0 the <tt class="docutils literal"><span class="pre">Storer</span></tt> format.</p>
</div>
<p>The examples above show storing using <tt class="docutils literal"><span class="pre">put</span></tt>, which write the HDF5 to <tt class="docutils literal"><span class="pre">PyTables</span></tt> in a fixed array format, called
the <tt class="docutils literal"><span class="pre">fixed</span></tt> format. These types of stores are are <strong>not</strong> appendable once written (though you can simply
remove them and rewrite). Nor are they <strong>queryable</strong>; they must be
retrieved in their entirety. These offer very fast writing and slightly faster reading than <tt class="docutils literal"><span class="pre">table</span></tt> stores.
This format is specified by default when using <tt class="docutils literal"><span class="pre">put</span></tt> or <tt class="docutils literal"><span class="pre">to_hdf</span></tt> or by <tt class="docutils literal"><span class="pre">format='fixed'</span></tt> or <tt class="docutils literal"><span class="pre">format='f'</span></tt></p>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p>A <tt class="docutils literal"><span class="pre">fixed</span></tt> format will raise a <tt class="docutils literal"><span class="pre">TypeError</span></tt> if you try to retrieve using a <tt class="docutils literal"><span class="pre">where</span></tt> .</p>
<div class="last highlight-python"><div class="highlight"><pre><span class="n">DataFrame</span><span class="p">(</span><span class="n">randn</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span><span class="mi">2</span><span class="p">))</span><span class="o">.</span><span class="n">to_hdf</span><span class="p">(</span><span class="s">&#39;test_fixed.h5&#39;</span><span class="p">,</span><span class="s">&#39;df&#39;</span><span class="p">)</span>

<span class="n">pd</span><span class="o">.</span><span class="n">read_hdf</span><span class="p">(</span><span class="s">&#39;test_fixed.h5&#39;</span><span class="p">,</span><span class="s">&#39;df&#39;</span><span class="p">,</span><span class="n">where</span><span class="o">=</span><span class="s">&#39;index&gt;5&#39;</span><span class="p">)</span>
<span class="ne">TypeError</span><span class="p">:</span> <span class="n">cannot</span> <span class="k">pass</span> <span class="n">a</span> <span class="n">where</span> <span class="n">specification</span> <span class="n">when</span> <span class="n">reading</span> <span class="n">a</span> <span class="n">fixed</span> <span class="n">format</span><span class="o">.</span>
           <span class="n">this</span> <span class="n">store</span> <span class="n">must</span> <span class="n">be</span> <span class="n">selected</span> <span class="ow">in</span> <span class="n">its</span> <span class="n">entirety</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="table-format">
<span id="io-hdf5-table"></span><h3>Table Format<a class="headerlink" href="#table-format" title="Permalink to this headline">¶</a></h3>
<p><tt class="docutils literal"><span class="pre">HDFStore</span></tt> supports another <tt class="docutils literal"><span class="pre">PyTables</span></tt> format on disk, the <tt class="docutils literal"><span class="pre">table</span></tt>
format. Conceptually a <tt class="docutils literal"><span class="pre">table</span></tt> is shaped very much like a DataFrame,
with rows and columns. A <tt class="docutils literal"><span class="pre">table</span></tt> may be appended to in the same or
other sessions.  In addition, delete &amp; query type operations are
supported. This format is specified by <tt class="docutils literal"><span class="pre">format='table'</span></tt> or <tt class="docutils literal"><span class="pre">format='t'</span></tt>
to <tt class="docutils literal"><span class="pre">append</span></tt> or <tt class="docutils literal"><span class="pre">put</span></tt> or <tt class="docutils literal"><span class="pre">to_hdf</span></tt></p>
<p>This format can be set as an option as well <tt class="docutils literal"><span class="pre">pd.set_option('io.hdf.default_format','table')</span></tt> to
enable <tt class="docutils literal"><span class="pre">put/append/to_hdf</span></tt> to by default store in the <tt class="docutils literal"><span class="pre">table</span></tt> format.</p>
<div class="highlight-ipython"><div class="highlight"><pre><span class="gp">In [221]: </span><span class="n">store</span> <span class="o">=</span> <span class="n">HDFStore</span><span class="p">(</span><span class="s">&#39;store.h5&#39;</span><span class="p">)</span>

<span class="gp">In [222]: </span><span class="n">df1</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="mi">4</span><span class="p">]</span>

<span class="gp">In [223]: </span><span class="n">df2</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="mi">4</span><span class="p">:]</span>

<span class="c"># append data (creates a table automatically)</span>
<span class="gp">In [224]: </span><span class="n">store</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s">&#39;df&#39;</span><span class="p">,</span> <span class="n">df1</span><span class="p">)</span>

<span class="gp">In [225]: </span><span class="n">store</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s">&#39;df&#39;</span><span class="p">,</span> <span class="n">df2</span><span class="p">)</span>

<span class="gp">In [226]: </span><span class="n">store</span>

<span class="go">&lt;class &#39;pandas.io.pytables.HDFStore&#39;&gt;</span>
<span class="go">File path: store.h5</span>
<span class="go">/df            frame_table  (typ-&gt;appendable,nrows-&gt;8,ncols-&gt;3,indexers-&gt;[index])</span>

<span class="c"># select the entire object</span>
<span class="gp">In [227]: </span><span class="n">store</span><span class="o">.</span><span class="n">select</span><span class="p">(</span><span class="s">&#39;df&#39;</span><span class="p">)</span>

<span class="go">                   A         B         C</span>
<span class="go">2000-01-01 -1.814470  1.018601 -0.595447</span>
<span class="go">2000-01-02  1.395433 -0.392670  0.007207</span>
<span class="go">2000-01-03  1.928123 -0.055224  2.395985</span>
<span class="go">2000-01-04  1.552825  0.166599  0.047609</span>
<span class="go">2000-01-05 -0.136473 -0.561757 -1.623033</span>
<span class="go">2000-01-06  0.029399 -0.542108  0.282696</span>
<span class="go">2000-01-07 -0.087302 -1.575170  1.771208</span>
<span class="go">2000-01-08  0.816482  1.100230 -0.612665</span>

<span class="c"># the type of stored data</span>
<span class="gp">In [228]: </span><span class="n">store</span><span class="o">.</span><span class="n">root</span><span class="o">.</span><span class="n">df</span><span class="o">.</span><span class="n">_v_attrs</span><span class="o">.</span><span class="n">pandas_type</span>
<span class="go">&#39;frame_table&#39;</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">You can also create a <tt class="docutils literal"><span class="pre">table</span></tt> by passing <tt class="docutils literal"><span class="pre">format='table'</span></tt> or <tt class="docutils literal"><span class="pre">format='t'</span></tt> to a <tt class="docutils literal"><span class="pre">put</span></tt> operation.</p>
</div>
</div>
<div class="section" id="hierarchical-keys">
<span id="io-hdf5-keys"></span><h3>Hierarchical Keys<a class="headerlink" href="#hierarchical-keys" title="Permalink to this headline">¶</a></h3>
<p>Keys to a store can be specified as a string. These can be in a
hierarchical path-name like format (e.g. <tt class="docutils literal"><span class="pre">foo/bar/bah</span></tt>), which will
generate a hierarchy of sub-stores (or <tt class="docutils literal"><span class="pre">Groups</span></tt> in PyTables
parlance). Keys can be specified with out the leading &#8216;/&#8217; and are ALWAYS
absolute (e.g. &#8216;foo&#8217; refers to &#8216;/foo&#8217;). Removal operations can remove
everying in the sub-store and BELOW, so be <em>careful</em>.</p>
<div class="highlight-ipython"><div class="highlight"><pre><span class="gp">In [229]: </span><span class="n">store</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s">&#39;foo/bar/bah&#39;</span><span class="p">,</span> <span class="n">df</span><span class="p">)</span>

<span class="gp">In [230]: </span><span class="n">store</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s">&#39;food/orange&#39;</span><span class="p">,</span> <span class="n">df</span><span class="p">)</span>

<span class="gp">In [231]: </span><span class="n">store</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s">&#39;food/apple&#39;</span><span class="p">,</span>  <span class="n">df</span><span class="p">)</span>

<span class="gp">In [232]: </span><span class="n">store</span>

<span class="go">&lt;class &#39;pandas.io.pytables.HDFStore&#39;&gt;</span>
<span class="go">File path: store.h5</span>
<span class="go">/df                     frame_table  (typ-&gt;appendable,nrows-&gt;8,ncols-&gt;3,indexers-&gt;[index])</span>
<span class="go">/food/apple             frame_table  (typ-&gt;appendable,nrows-&gt;8,ncols-&gt;3,indexers-&gt;[index])</span>
<span class="go">/food/orange            frame_table  (typ-&gt;appendable,nrows-&gt;8,ncols-&gt;3,indexers-&gt;[index])</span>
<span class="go">/foo/bar/bah            frame        (shape-&gt;[8,3])                                       </span>

<span class="c"># a list of keys are returned</span>
<span class="gp">In [233]: </span><span class="n">store</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span>
<span class="go">[&#39;/df&#39;, &#39;/food/apple&#39;, &#39;/food/orange&#39;, &#39;/foo/bar/bah&#39;]</span>

<span class="c"># remove all nodes under this level</span>
<span class="gp">In [234]: </span><span class="n">store</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="s">&#39;food&#39;</span><span class="p">)</span>

<span class="gp">In [235]: </span><span class="n">store</span>

<span class="go">&lt;class &#39;pandas.io.pytables.HDFStore&#39;&gt;</span>
<span class="go">File path: store.h5</span>
<span class="go">/df                     frame_table  (typ-&gt;appendable,nrows-&gt;8,ncols-&gt;3,indexers-&gt;[index])</span>
<span class="go">/foo/bar/bah            frame        (shape-&gt;[8,3])                                       </span>
</pre></div>
</div>
</div>
<div class="section" id="storing-mixed-types-in-a-table">
<span id="io-hdf5-types"></span><h3>Storing Mixed Types in a Table<a class="headerlink" href="#storing-mixed-types-in-a-table" title="Permalink to this headline">¶</a></h3>
<p>Storing mixed-dtype data is supported. Strings are stored as a
fixed-width using the maximum size of the appended column. Subsequent
appends will truncate strings at this length.</p>
<p>Passing <tt class="docutils literal"><span class="pre">min_itemsize={`values`:</span> <span class="pre">size}</span></tt> as a parameter to append
will set a larger minimum for the string columns. Storing <tt class="docutils literal"><span class="pre">floats,</span>
<span class="pre">strings,</span> <span class="pre">ints,</span> <span class="pre">bools,</span> <span class="pre">datetime64</span></tt> are currently supported. For string
columns, passing <tt class="docutils literal"><span class="pre">nan_rep</span> <span class="pre">=</span> <span class="pre">'nan'</span></tt> to append will change the default
nan representation on disk (which converts to/from <cite>np.nan</cite>), this
defaults to <cite>nan</cite>.</p>
<div class="highlight-ipython"><div class="highlight"><pre><span class="gp">In [236]: </span><span class="n">df_mixed</span> <span class="o">=</span> <span class="n">DataFrame</span><span class="p">({</span> <span class="s">&#39;A&#39;</span> <span class="p">:</span> <span class="n">randn</span><span class="p">(</span><span class="mi">8</span><span class="p">),</span>
<span class="gp">   .....:</span>                        <span class="s">&#39;B&#39;</span> <span class="p">:</span> <span class="n">randn</span><span class="p">(</span><span class="mi">8</span><span class="p">),</span>
<span class="gp">   .....:</span>                        <span class="s">&#39;C&#39;</span> <span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">randn</span><span class="p">(</span><span class="mi">8</span><span class="p">),</span><span class="n">dtype</span><span class="o">=</span><span class="s">&#39;float32&#39;</span><span class="p">),</span>
<span class="gp">   .....:</span>                        <span class="s">&#39;string&#39;</span> <span class="p">:</span><span class="s">&#39;string&#39;</span><span class="p">,</span>
<span class="gp">   .....:</span>                        <span class="s">&#39;int&#39;</span> <span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
<span class="gp">   .....:</span>                        <span class="s">&#39;bool&#39;</span> <span class="p">:</span> <span class="bp">True</span><span class="p">,</span>
<span class="gp">   .....:</span>                        <span class="s">&#39;datetime64&#39;</span> <span class="p">:</span> <span class="n">Timestamp</span><span class="p">(</span><span class="s">&#39;20010102&#39;</span><span class="p">)},</span>
<span class="gp">   .....:</span>                      <span class="n">index</span><span class="o">=</span><span class="nb">list</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">8</span><span class="p">)))</span>
<span class="gp">   .....:</span> 

<span class="gp">In [237]: </span><span class="n">df_mixed</span><span class="o">.</span><span class="n">ix</span><span class="p">[</span><span class="mi">3</span><span class="p">:</span><span class="mi">5</span><span class="p">,[</span><span class="s">&#39;A&#39;</span><span class="p">,</span> <span class="s">&#39;B&#39;</span><span class="p">,</span> <span class="s">&#39;string&#39;</span><span class="p">,</span> <span class="s">&#39;datetime64&#39;</span><span class="p">]]</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span>

<span class="gp">In [238]: </span><span class="n">store</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s">&#39;df_mixed&#39;</span><span class="p">,</span> <span class="n">df_mixed</span><span class="p">,</span> <span class="n">min_itemsize</span> <span class="o">=</span> <span class="p">{</span><span class="s">&#39;values&#39;</span><span class="p">:</span> <span class="mi">50</span><span class="p">})</span>

<span class="gp">In [239]: </span><span class="n">df_mixed1</span> <span class="o">=</span> <span class="n">store</span><span class="o">.</span><span class="n">select</span><span class="p">(</span><span class="s">&#39;df_mixed&#39;</span><span class="p">)</span>

<span class="gp">In [240]: </span><span class="n">df_mixed1</span>

<span class="go">          A         B         C  bool          datetime64  int  string</span>
<span class="go">0  0.615855 -1.475051  0.542054  True 2001-01-02 00:00:00    1  string</span>
<span class="go">1  0.629675  0.722570 -0.688585  True 2001-01-02 00:00:00    1  string</span>
<span class="go">2 -1.425966 -0.322646 -0.352676  True 2001-01-02 00:00:00    1  string</span>
<span class="go">3       NaN       NaN -0.711411  True                 NaT    1     NaN</span>
<span class="go">4       NaN       NaN -2.122599  True                 NaT    1     NaN</span>
<span class="go">5       NaN       NaN  1.962935  True                 NaT    1     NaN</span>
<span class="go">6 -0.153931  0.233141  1.672027  True 2001-01-02 00:00:00    1  string</span>
<span class="go">7  0.520091 -0.223540 -0.880984  True 2001-01-02 00:00:00    1  string</span>

<span class="gp">In [241]: </span><span class="n">df_mixed1</span><span class="o">.</span><span class="n">get_dtype_counts</span><span class="p">()</span>

<span class="go">bool              1</span>
<span class="go">datetime64[ns]    1</span>
<span class="go">float32           1</span>
<span class="go">float64           2</span>
<span class="go">int64             1</span>
<span class="go">object            1</span>
<span class="go">dtype: int64</span>

<span class="c"># we have provided a minimum string column size</span>
<span class="gp">In [242]: </span><span class="n">store</span><span class="o">.</span><span class="n">root</span><span class="o">.</span><span class="n">df_mixed</span><span class="o">.</span><span class="n">table</span>

<span class="go">/df_mixed/table (Table(8,)) &#39;&#39;</span>
<span class="go">  description := {</span>
<span class="go">  &quot;index&quot;: Int64Col(shape=(), dflt=0, pos=0),</span>
<span class="go">  &quot;values_block_0&quot;: Float64Col(shape=(2,), dflt=0.0, pos=1),</span>
<span class="go">  &quot;values_block_1&quot;: Float32Col(shape=(1,), dflt=0.0, pos=2),</span>
<span class="go">  &quot;values_block_2&quot;: Int64Col(shape=(1,), dflt=0, pos=3),</span>
<span class="go">  &quot;values_block_3&quot;: Int64Col(shape=(1,), dflt=0, pos=4),</span>
<span class="go">  &quot;values_block_4&quot;: BoolCol(shape=(1,), dflt=False, pos=5),</span>
<span class="go">  &quot;values_block_5&quot;: StringCol(itemsize=50, shape=(1,), dflt=&#39;&#39;, pos=6)}</span>
<span class="go">  byteorder := &#39;little&#39;</span>
<span class="go">  chunkshape := (689,)</span>
<span class="go">  autoindex := True</span>
<span class="go">  colindexes := {</span>
<span class="go">    &quot;index&quot;: Index(6, medium, shuffle, zlib(1)).is_csi=False}</span>
</pre></div>
</div>
</div>
<div class="section" id="storing-multi-index-dataframes">
<h3>Storing Multi-Index DataFrames<a class="headerlink" href="#storing-multi-index-dataframes" title="Permalink to this headline">¶</a></h3>
<p>Storing multi-index dataframes as tables is very similar to
storing/selecting from homogeneous index DataFrames.</p>
<div class="highlight-ipython"><div class="highlight"><pre><span class="gp">In [243]: </span><span class="n">index</span> <span class="o">=</span> <span class="n">MultiIndex</span><span class="p">(</span><span class="n">levels</span><span class="o">=</span><span class="p">[[</span><span class="s">&#39;foo&#39;</span><span class="p">,</span> <span class="s">&#39;bar&#39;</span><span class="p">,</span> <span class="s">&#39;baz&#39;</span><span class="p">,</span> <span class="s">&#39;qux&#39;</span><span class="p">],</span>
<span class="gp">   .....:</span>                            <span class="p">[</span><span class="s">&#39;one&#39;</span><span class="p">,</span> <span class="s">&#39;two&#39;</span><span class="p">,</span> <span class="s">&#39;three&#39;</span><span class="p">]],</span>
<span class="gp">   .....:</span>                    <span class="n">labels</span><span class="o">=</span><span class="p">[[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">],</span>
<span class="gp">   .....:</span>                            <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">]],</span>
<span class="gp">   .....:</span>                    <span class="n">names</span><span class="o">=</span><span class="p">[</span><span class="s">&#39;foo&#39;</span><span class="p">,</span> <span class="s">&#39;bar&#39;</span><span class="p">])</span>
<span class="gp">   .....:</span> 

<span class="gp">In [244]: </span><span class="n">df_mi</span> <span class="o">=</span> <span class="n">DataFrame</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">randn</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">3</span><span class="p">),</span> <span class="n">index</span><span class="o">=</span><span class="n">index</span><span class="p">,</span>
<span class="gp">   .....:</span>                   <span class="n">columns</span><span class="o">=</span><span class="p">[</span><span class="s">&#39;A&#39;</span><span class="p">,</span> <span class="s">&#39;B&#39;</span><span class="p">,</span> <span class="s">&#39;C&#39;</span><span class="p">])</span>
<span class="gp">   .....:</span> 

<span class="gp">In [245]: </span><span class="n">df_mi</span>

<span class="go">                  A         B         C</span>
<span class="go">foo bar                                </span>
<span class="go">foo one    0.997289 -1.693316 -0.179129</span>
<span class="go">    two   -1.598062  0.936914  0.912560</span>
<span class="go">    three -1.003401  1.632781 -0.724626</span>
<span class="go">bar one    0.178219  0.310610 -0.108002</span>
<span class="go">    two   -0.974226 -1.147708 -2.281374</span>
<span class="go">baz two    0.760010 -0.742532  1.533318</span>
<span class="go">    three  2.495362 -0.432771 -0.068954</span>
<span class="go">qux one    0.043520  0.112246  0.871721</span>
<span class="go">    two   -0.816064 -0.784880  1.030659</span>
<span class="go">    three  0.187483 -1.933946  0.377312</span>

<span class="gp">In [246]: </span><span class="n">store</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s">&#39;df_mi&#39;</span><span class="p">,</span><span class="n">df_mi</span><span class="p">)</span>

<span class="gp">In [247]: </span><span class="n">store</span><span class="o">.</span><span class="n">select</span><span class="p">(</span><span class="s">&#39;df_mi&#39;</span><span class="p">)</span>

<span class="go">                  A         B         C</span>
<span class="go">foo bar                                </span>
<span class="go">foo one    0.997289 -1.693316 -0.179129</span>
<span class="go">    two   -1.598062  0.936914  0.912560</span>
<span class="go">    three -1.003401  1.632781 -0.724626</span>
<span class="go">bar one    0.178219  0.310610 -0.108002</span>
<span class="go">    two   -0.974226 -1.147708 -2.281374</span>
<span class="go">baz two    0.760010 -0.742532  1.533318</span>
<span class="go">    three  2.495362 -0.432771 -0.068954</span>
<span class="go">qux one    0.043520  0.112246  0.871721</span>
<span class="go">    two   -0.816064 -0.784880  1.030659</span>
<span class="go">    three  0.187483 -1.933946  0.377312</span>

<span class="c"># the levels are automatically included as data columns</span>
<span class="gp">In [248]: </span><span class="n">store</span><span class="o">.</span><span class="n">select</span><span class="p">(</span><span class="s">&#39;df_mi&#39;</span><span class="p">,</span> <span class="s">&#39;foo=bar&#39;</span><span class="p">)</span>

<span class="go">                A         B         C</span>
<span class="go">foo bar                              </span>
<span class="go">bar one  0.178219  0.310610 -0.108002</span>
<span class="go">    two -0.974226 -1.147708 -2.281374</span>
</pre></div>
</div>
</div>
<div class="section" id="querying-a-table">
<span id="io-hdf5-query"></span><h3>Querying a Table<a class="headerlink" href="#querying-a-table" title="Permalink to this headline">¶</a></h3>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">This query capabilities have changed substantially starting in <tt class="docutils literal"><span class="pre">0.13.0</span></tt>.
Queries from prior version are accepted (with a <tt class="docutils literal"><span class="pre">DeprecationWarning</span></tt>) printed
if its not string-like.</p>
</div>
<p><tt class="docutils literal"><span class="pre">select</span></tt> and <tt class="docutils literal"><span class="pre">delete</span></tt> operations have an optional criterion that can
be specified to select/delete only a subset of the data. This allows one
to have a very large on-disk table and retrieve only a portion of the
data.</p>
<p>A query is specified using the <tt class="docutils literal"><span class="pre">Term</span></tt> class under the hood, as a boolean expression.</p>
<blockquote>
<div><ul class="simple">
<li><tt class="docutils literal"><span class="pre">index</span></tt> and <tt class="docutils literal"><span class="pre">columns</span></tt> are supported indexers of a DataFrame</li>
<li><tt class="docutils literal"><span class="pre">major_axis</span></tt>, <tt class="docutils literal"><span class="pre">minor_axis</span></tt>, and <tt class="docutils literal"><span class="pre">items</span></tt> are supported indexers of
the Panel</li>
<li>if <tt class="docutils literal"><span class="pre">data_columns</span></tt> are specified, these can be used as additional indexers</li>
</ul>
</div></blockquote>
<p>Valid comparison operators are:</p>
<blockquote>
<div><ul class="simple">
<li><tt class="docutils literal"><span class="pre">=,</span> <span class="pre">==,</span> <span class="pre">!=,</span> <span class="pre">&gt;,</span> <span class="pre">&gt;=,</span> <span class="pre">&lt;,</span> <span class="pre">&lt;=</span></tt></li>
</ul>
</div></blockquote>
<p>Valid boolean expressions are combined with:</p>
<blockquote>
<div><ul class="simple">
<li><tt class="docutils literal"><span class="pre">|</span></tt> : or</li>
<li><tt class="docutils literal"><span class="pre">&amp;</span></tt> : and</li>
<li><tt class="docutils literal"><span class="pre">(</span></tt> and <tt class="docutils literal"><span class="pre">)</span></tt> : for grouping</li>
</ul>
</div></blockquote>
<p>These rules are similar to how boolean expressions are used in pandas for indexing.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<ul class="last simple">
<li><tt class="docutils literal"><span class="pre">=</span></tt> will be automatically expanded to the comparison operator <tt class="docutils literal"><span class="pre">==</span></tt></li>
<li><tt class="docutils literal"><span class="pre">~</span></tt> is the not operator, but can only be used in very limited
circumstances</li>
<li>If a list/tuple of expressions is passed they will be combined via <tt class="docutils literal"><span class="pre">&amp;</span></tt></li>
</ul>
</div>
<p>The following are valid expressions:</p>
<blockquote>
<div><ul class="simple">
<li><tt class="docutils literal"><span class="pre">'index&gt;=date'</span></tt></li>
<li><tt class="docutils literal"><span class="pre">&quot;columns=['A',</span> <span class="pre">'D']&quot;</span></tt></li>
<li><tt class="docutils literal"><span class="pre">&quot;columns</span> <span class="pre">in</span> <span class="pre">['A',</span> <span class="pre">'D']&quot;</span></tt></li>
<li><tt class="docutils literal"><span class="pre">'columns=A'</span></tt></li>
<li><tt class="docutils literal"><span class="pre">'columns==A'</span></tt></li>
<li><tt class="docutils literal"><span class="pre">&quot;~(columns=['A','B'])&quot;</span></tt></li>
<li><tt class="docutils literal"><span class="pre">'index&gt;df.index[3]</span> <span class="pre">&amp;</span> <span class="pre">string=&quot;bar&quot;'</span></tt></li>
<li><tt class="docutils literal"><span class="pre">'(index&gt;df.index[3]</span> <span class="pre">&amp;</span> <span class="pre">index&lt;=df.index[6])</span> <span class="pre">|</span> <span class="pre">string=&quot;bar&quot;'</span></tt></li>
<li><tt class="docutils literal"><span class="pre">&quot;ts&gt;=Timestamp('2012-02-01')&quot;</span></tt></li>
<li><tt class="docutils literal"><span class="pre">&quot;major_axis&gt;=20130101&quot;</span></tt></li>
</ul>
</div></blockquote>
<p>The <tt class="docutils literal"><span class="pre">indexers</span></tt> are on the left-hand side of the sub-expression:</p>
<blockquote>
<div><ul class="simple">
<li><tt class="docutils literal"><span class="pre">columns</span></tt>, <tt class="docutils literal"><span class="pre">major_axis</span></tt>, <tt class="docutils literal"><span class="pre">ts</span></tt></li>
</ul>
</div></blockquote>
<p>The right-hand side of the sub-expression (after a comparsion operator) can be:</p>
<blockquote>
<div><ul class="simple">
<li>functions that will be evaluated, e.g. <tt class="docutils literal"><span class="pre">Timestamp('2012-02-01')</span></tt></li>
<li>strings, e.g. <tt class="docutils literal"><span class="pre">&quot;bar&quot;</span></tt></li>
<li>date-like, e.g. <tt class="docutils literal"><span class="pre">20130101</span></tt>, or <tt class="docutils literal"><span class="pre">&quot;20130101&quot;</span></tt></li>
<li>lists, e.g. <tt class="docutils literal"><span class="pre">&quot;['A','B']&quot;</span></tt></li>
<li>variables that are defined in the local names space, e.g. <tt class="docutils literal"><span class="pre">date</span></tt></li>
</ul>
</div></blockquote>
<p>Here are some examples:</p>
<div class="highlight-ipython"><div class="highlight"><pre><span class="gp">In [249]: </span><span class="n">dfq</span> <span class="o">=</span> <span class="n">DataFrame</span><span class="p">(</span><span class="n">randn</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span><span class="mi">4</span><span class="p">),</span><span class="n">columns</span><span class="o">=</span><span class="nb">list</span><span class="p">(</span><span class="s">&#39;ABCD&#39;</span><span class="p">),</span><span class="n">index</span><span class="o">=</span><span class="n">date_range</span><span class="p">(</span><span class="s">&#39;20130101&#39;</span><span class="p">,</span><span class="n">periods</span><span class="o">=</span><span class="mi">10</span><span class="p">))</span>

<span class="gp">In [250]: </span><span class="n">store</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s">&#39;dfq&#39;</span><span class="p">,</span><span class="n">dfq</span><span class="p">,</span><span class="n">format</span><span class="o">=</span><span class="s">&#39;table&#39;</span><span class="p">,</span><span class="n">data_columns</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
</pre></div>
</div>
<p>Use boolean expressions, with in-line function evaluation.</p>
<div class="highlight-ipython"><div class="highlight"><pre><span class="gp">In [251]: </span><span class="n">store</span><span class="o">.</span><span class="n">select</span><span class="p">(</span><span class="s">&#39;dfq&#39;</span><span class="p">,</span><span class="s">&quot;index&gt;Timestamp(&#39;20130104&#39;) &amp; columns=[&#39;A&#39;, &#39;B&#39;]&quot;</span><span class="p">)</span>

<span class="go">                   A         B</span>
<span class="go">2013-01-05 -1.032853  1.469725</span>
<span class="go">2013-01-06  0.203109 -1.032011</span>
<span class="go">2013-01-07  1.382083 -0.938794</span>
<span class="go">2013-01-08 -0.273610  0.680433</span>
<span class="go">2013-01-09 -1.821168 -1.993606</span>
<span class="go">2013-01-10  1.624972  0.551135</span>
</pre></div>
</div>
<p>Use and inline column reference</p>
<div class="highlight-ipython"><div class="highlight"><pre><span class="gp">In [252]: </span><span class="n">store</span><span class="o">.</span><span class="n">select</span><span class="p">(</span><span class="s">&#39;dfq&#39;</span><span class="p">,</span><span class="n">where</span><span class="o">=</span><span class="s">&quot;A&gt;0 or C&gt;0&quot;</span><span class="p">)</span>

<span class="go">                   A         B         C         D</span>
<span class="go">2013-01-01  0.734122  2.141616 -0.011225  0.048869</span>
<span class="go">2013-01-03 -0.527750 -1.296337  0.150680  0.123836</span>
<span class="go">2013-01-04  0.571764  1.555563 -0.823761  0.535420</span>
<span class="go">2013-01-05 -1.032853  1.469725  1.304124  1.449735</span>
<span class="go">2013-01-06  0.203109 -1.032011  0.969818 -0.962723</span>
<span class="go">2013-01-07  1.382083 -0.938794  0.669142 -0.433567</span>
<span class="go">2013-01-10  1.624972  0.551135  3.059267  0.455264</span>
</pre></div>
</div>
<p>Works with a Panel as well.</p>
<div class="highlight-ipython"><div class="highlight"><pre><span class="gp">In [253]: </span><span class="n">store</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s">&#39;wp&#39;</span><span class="p">,</span><span class="n">wp</span><span class="p">)</span>

<span class="gp">In [254]: </span><span class="n">store</span>

<span class="go">&lt;class &#39;pandas.io.pytables.HDFStore&#39;&gt;</span>
<span class="go">File path: store.h5</span>
<span class="go">/df                     frame_table  (typ-&gt;appendable,nrows-&gt;8,ncols-&gt;3,indexers-&gt;[index])                     </span>
<span class="go">/df_mi                  frame_table  (typ-&gt;appendable_multi,nrows-&gt;10,ncols-&gt;5,indexers-&gt;[index],dc-&gt;[bar,foo])</span>
<span class="go">/df_mixed               frame_table  (typ-&gt;appendable,nrows-&gt;8,ncols-&gt;7,indexers-&gt;[index])                     </span>
<span class="go">/dfq                    frame_table  (typ-&gt;appendable,nrows-&gt;10,ncols-&gt;4,indexers-&gt;[index],dc-&gt;[A,B,C,D])      </span>
<span class="go">/wp                     wide_table   (typ-&gt;appendable,nrows-&gt;20,ncols-&gt;2,indexers-&gt;[major_axis,minor_axis])    </span>
<span class="go">/foo/bar/bah            frame        (shape-&gt;[8,3])                                                            </span>

<span class="gp">In [255]: </span><span class="n">store</span><span class="o">.</span><span class="n">select</span><span class="p">(</span><span class="s">&#39;wp&#39;</span><span class="p">,</span> <span class="s">&quot;major_axis&gt;Timestamp(&#39;20000102&#39;) &amp; minor_axis=[&#39;A&#39;, &#39;B&#39;]&quot;</span><span class="p">)</span>

<span class="go">&lt;class &#39;pandas.core.panel.Panel&#39;&gt;</span>
<span class="go">Dimensions: 2 (items) x 3 (major_axis) x 2 (minor_axis)</span>
<span class="go">Items axis: Item1 to Item2</span>
<span class="go">Major_axis axis: 2000-01-03 00:00:00 to 2000-01-05 00:00:00</span>
<span class="go">Minor_axis axis: A to B</span>
</pre></div>
</div>
<p>The <tt class="docutils literal"><span class="pre">columns</span></tt> keyword can be supplied to select a list of columns to be
returned, this is equivalent to passing a
<tt class="docutils literal"><span class="pre">'columns=list_of_columns_to_filter'</span></tt>:</p>
<div class="highlight-ipython"><div class="highlight"><pre><span class="gp">In [256]: </span><span class="n">store</span><span class="o">.</span><span class="n">select</span><span class="p">(</span><span class="s">&#39;df&#39;</span><span class="p">,</span> <span class="s">&quot;columns=[&#39;A&#39;, &#39;B&#39;]&quot;</span><span class="p">)</span>

<span class="go">                   A         B</span>
<span class="go">2000-01-01 -1.814470  1.018601</span>
<span class="go">2000-01-02  1.395433 -0.392670</span>
<span class="go">2000-01-03  1.928123 -0.055224</span>
<span class="go">2000-01-04  1.552825  0.166599</span>
<span class="go">2000-01-05 -0.136473 -0.561757</span>
<span class="go">2000-01-06  0.029399 -0.542108</span>
<span class="go">2000-01-07 -0.087302 -1.575170</span>
<span class="go">2000-01-08  0.816482  1.100230</span>
</pre></div>
</div>
<p><tt class="docutils literal"><span class="pre">start</span></tt> and <tt class="docutils literal"><span class="pre">stop</span></tt> parameters can be specified to limit the total search
space. These are in terms of the total number of rows in a table.</p>
<div class="highlight-ipython"><div class="highlight"><pre><span class="c"># this is effectively what the storage of a Panel looks like</span>
<span class="gp">In [257]: </span><span class="n">wp</span><span class="o">.</span><span class="n">to_frame</span><span class="p">()</span>

<span class="go">                     Item1     Item2</span>
<span class="go">major      minor                    </span>
<span class="go">2000-01-01 A      1.586976  1.291836</span>
<span class="go">           B      0.019234 -0.009614</span>
<span class="go">           C      0.264294  0.392149</span>
<span class="go">           D      1.074803  0.264599</span>
<span class="go">2000-01-02 A      0.173520 -0.057409</span>
<span class="go">           B      0.211027 -1.425638</span>
<span class="go">           C      1.357138  1.024098</span>
<span class="go">           D      1.418757 -0.106062</span>
<span class="go">2000-01-03 A     -1.879024  1.824375</span>
<span class="go">           B      0.536826  0.595974</span>
<span class="go">           C      1.006160  1.167115</span>
<span class="go">           D     -0.029716  0.601544</span>
<span class="go">2000-01-04 A     -1.146178 -1.237881</span>
<span class="go">           B      0.100900  0.106854</span>
<span class="go">           C     -1.035018 -1.276829</span>
<span class="go">           D      0.314665 -0.767101</span>
<span class="go">2000-01-05 A     -0.773723  0.207588</span>
<span class="go">           B     -1.170653  1.499591</span>
<span class="go">           C      0.648740  0.979542</span>
<span class="go">           D     -0.179666 -1.633678</span>

<span class="c"># limiting the search</span>
<span class="gp">In [258]: </span><span class="n">store</span><span class="o">.</span><span class="n">select</span><span class="p">(</span><span class="s">&#39;wp&#39;</span><span class="p">,</span><span class="s">&quot;major_axis&gt;20000102 &amp; minor_axis=[&#39;A&#39;,&#39;B&#39;]&quot;</span><span class="p">,</span>
<span class="gp">   .....:</span>              <span class="n">start</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">stop</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
<span class="gp">   .....:</span> 

<span class="go">&lt;class &#39;pandas.core.panel.Panel&#39;&gt;</span>
<span class="go">Dimensions: 2 (items) x 1 (major_axis) x 2 (minor_axis)</span>
<span class="go">Items axis: Item1 to Item2</span>
<span class="go">Major_axis axis: 2000-01-03 00:00:00 to 2000-01-03 00:00:00</span>
<span class="go">Minor_axis axis: A to B</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p><tt class="docutils literal"><span class="pre">select</span></tt> will raise a <tt class="docutils literal"><span class="pre">ValueError</span></tt> if the query expression has an unknown
variable reference. Usually this means that you are trying to select on a column
that is <strong>not</strong> a data_column.</p>
<p class="last"><tt class="docutils literal"><span class="pre">select</span></tt> will raise a <tt class="docutils literal"><span class="pre">SyntaxError</span></tt> if the query expression is not valid.</p>
</div>
<p id="io-hdf5-timedelta"><strong>Using timedelta64[ns]</strong></p>
<div class="versionadded">
<p><span>New in version 0.13.</span></p>
</div>
<p>Beginning in 0.13.0, you can store and query using the <tt class="docutils literal"><span class="pre">timedelta64[ns]</span></tt> type. Terms can be
specified in the format: <tt class="docutils literal"><span class="pre">&lt;float&gt;(&lt;unit&gt;)</span></tt>, where float may be signed (and fractional), and unit can be
<tt class="docutils literal"><span class="pre">D,s,ms,us,ns</span></tt> for the timedelta. Here&#8217;s an example:</p>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">This requires <tt class="docutils literal"><span class="pre">numpy</span> <span class="pre">&gt;=</span> <span class="pre">1.7</span></tt></p>
</div>
<div class="highlight-ipython"><div class="highlight"><pre><span class="gp">In [259]: </span><span class="kn">from</span> <span class="nn">datetime</span> <span class="kn">import</span> <span class="n">timedelta</span>

<span class="gp">In [260]: </span><span class="n">dftd</span> <span class="o">=</span> <span class="n">DataFrame</span><span class="p">(</span><span class="nb">dict</span><span class="p">(</span><span class="n">A</span> <span class="o">=</span> <span class="n">Timestamp</span><span class="p">(</span><span class="s">&#39;20130101&#39;</span><span class="p">),</span> <span class="n">B</span> <span class="o">=</span> <span class="p">[</span> <span class="n">Timestamp</span><span class="p">(</span><span class="s">&#39;20130101&#39;</span><span class="p">)</span> <span class="o">+</span> <span class="n">timedelta</span><span class="p">(</span><span class="n">days</span><span class="o">=</span><span class="n">i</span><span class="p">,</span><span class="n">seconds</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span> <span class="p">]))</span>

<span class="gp">In [261]: </span><span class="n">dftd</span><span class="p">[</span><span class="s">&#39;C&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">dftd</span><span class="p">[</span><span class="s">&#39;A&#39;</span><span class="p">]</span><span class="o">-</span><span class="n">dftd</span><span class="p">[</span><span class="s">&#39;B&#39;</span><span class="p">]</span>

<span class="gp">In [262]: </span><span class="n">dftd</span>

<span class="go">                    A                   B                 C</span>
<span class="go">0 2013-01-01 00:00:00 2013-01-01 00:00:10         -00:00:10</span>
<span class="go">1 2013-01-01 00:00:00 2013-01-02 00:00:10 -1 days, 00:00:10</span>
<span class="go">2 2013-01-01 00:00:00 2013-01-03 00:00:10 -2 days, 00:00:10</span>
<span class="go">3 2013-01-01 00:00:00 2013-01-04 00:00:10 -3 days, 00:00:10</span>
<span class="go">4 2013-01-01 00:00:00 2013-01-05 00:00:10 -4 days, 00:00:10</span>
<span class="go">5 2013-01-01 00:00:00 2013-01-06 00:00:10 -5 days, 00:00:10</span>
<span class="go">6 2013-01-01 00:00:00 2013-01-07 00:00:10 -6 days, 00:00:10</span>
<span class="go">7 2013-01-01 00:00:00 2013-01-08 00:00:10 -7 days, 00:00:10</span>
<span class="go">8 2013-01-01 00:00:00 2013-01-09 00:00:10 -8 days, 00:00:10</span>
<span class="go">9 2013-01-01 00:00:00 2013-01-10 00:00:10 -9 days, 00:00:10</span>

<span class="gp">In [263]: </span><span class="n">store</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s">&#39;dftd&#39;</span><span class="p">,</span><span class="n">dftd</span><span class="p">,</span><span class="n">data_columns</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>

<span class="gp">In [264]: </span><span class="n">store</span><span class="o">.</span><span class="n">select</span><span class="p">(</span><span class="s">&#39;dftd&#39;</span><span class="p">,</span><span class="s">&quot;C&lt;&#39;-3.5D&#39;&quot;</span><span class="p">)</span>

<span class="go">                    A                   B                 C</span>
<span class="go">4 2013-01-01 00:00:00 2013-01-05 00:00:10 -4 days, 00:00:10</span>
<span class="go">5 2013-01-01 00:00:00 2013-01-06 00:00:10 -5 days, 00:00:10</span>
<span class="go">6 2013-01-01 00:00:00 2013-01-07 00:00:10 -6 days, 00:00:10</span>
<span class="go">7 2013-01-01 00:00:00 2013-01-08 00:00:10 -7 days, 00:00:10</span>
<span class="go">8 2013-01-01 00:00:00 2013-01-09 00:00:10 -8 days, 00:00:10</span>
<span class="go">9 2013-01-01 00:00:00 2013-01-10 00:00:10 -9 days, 00:00:10</span>
</pre></div>
</div>
</div>
<div class="section" id="indexing">
<h3>Indexing<a class="headerlink" href="#indexing" title="Permalink to this headline">¶</a></h3>
<p>You can create/modify an index for a table with <tt class="docutils literal"><span class="pre">create_table_index</span></tt>
after data is already in the table (after and <tt class="docutils literal"><span class="pre">append/put</span></tt>
operation). Creating a table index is <strong>highly</strong> encouraged. This will
speed your queries a great deal when you use a <tt class="docutils literal"><span class="pre">select</span></tt> with the
indexed dimension as the <tt class="docutils literal"><span class="pre">where</span></tt>.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Indexes are automagically created (starting <tt class="docutils literal"><span class="pre">0.10.1</span></tt>) on the indexables
and any data columns you specify. This behavior can be turned off by passing
<tt class="docutils literal"><span class="pre">index=False</span></tt> to <tt class="docutils literal"><span class="pre">append</span></tt>.</p>
</div>
<div class="highlight-ipython"><div class="highlight"><pre><span class="c"># we have automagically already created an index (in the first section)</span>
<span class="gp">In [265]: </span><span class="n">i</span> <span class="o">=</span> <span class="n">store</span><span class="o">.</span><span class="n">root</span><span class="o">.</span><span class="n">df</span><span class="o">.</span><span class="n">table</span><span class="o">.</span><span class="n">cols</span><span class="o">.</span><span class="n">index</span><span class="o">.</span><span class="n">index</span>

<span class="gp">In [266]: </span><span class="n">i</span><span class="o">.</span><span class="n">optlevel</span><span class="p">,</span> <span class="n">i</span><span class="o">.</span><span class="n">kind</span>
<span class="go">(6, &#39;medium&#39;)</span>

<span class="c"># change an index by passing new parameters</span>
<span class="gp">In [267]: </span><span class="n">store</span><span class="o">.</span><span class="n">create_table_index</span><span class="p">(</span><span class="s">&#39;df&#39;</span><span class="p">,</span> <span class="n">optlevel</span><span class="o">=</span><span class="mi">9</span><span class="p">,</span> <span class="n">kind</span><span class="o">=</span><span class="s">&#39;full&#39;</span><span class="p">)</span>

<span class="gp">In [268]: </span><span class="n">i</span> <span class="o">=</span> <span class="n">store</span><span class="o">.</span><span class="n">root</span><span class="o">.</span><span class="n">df</span><span class="o">.</span><span class="n">table</span><span class="o">.</span><span class="n">cols</span><span class="o">.</span><span class="n">index</span><span class="o">.</span><span class="n">index</span>

<span class="gp">In [269]: </span><span class="n">i</span><span class="o">.</span><span class="n">optlevel</span><span class="p">,</span> <span class="n">i</span><span class="o">.</span><span class="n">kind</span>
<span class="go">(9, &#39;full&#39;)</span>
</pre></div>
</div>
<p>See <a class="reference external" href="http://stackoverflow.com/questions/17893370/ptrepack-sortby-needs-full-index">here</a> for how to create a completely-sorted-index (CSI) on an existing store.</p>
</div>
<div class="section" id="query-via-data-columns">
<h3>Query via Data Columns<a class="headerlink" href="#query-via-data-columns" title="Permalink to this headline">¶</a></h3>
<p>You can designate (and index) certain columns that you want to be able
to perform queries (other than the <cite>indexable</cite> columns, which you can
always query). For instance say you want to perform this common
operation, on-disk, and return just the frame that matches this
query. You can specify <tt class="docutils literal"><span class="pre">data_columns</span> <span class="pre">=</span> <span class="pre">True</span></tt> to force all columns to
be data_columns</p>
<div class="highlight-ipython"><div class="highlight"><pre><span class="gp">In [270]: </span><span class="n">df_dc</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>

<span class="gp">In [271]: </span><span class="n">df_dc</span><span class="p">[</span><span class="s">&#39;string&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s">&#39;foo&#39;</span>

<span class="gp">In [272]: </span><span class="n">df_dc</span><span class="o">.</span><span class="n">ix</span><span class="p">[</span><span class="mi">4</span><span class="p">:</span><span class="mi">6</span><span class="p">,</span><span class="s">&#39;string&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span>

<span class="gp">In [273]: </span><span class="n">df_dc</span><span class="o">.</span><span class="n">ix</span><span class="p">[</span><span class="mi">7</span><span class="p">:</span><span class="mi">9</span><span class="p">,</span><span class="s">&#39;string&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s">&#39;bar&#39;</span>

<span class="gp">In [274]: </span><span class="n">df_dc</span><span class="p">[</span><span class="s">&#39;string2&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s">&#39;cool&#39;</span>

<span class="gp">In [275]: </span><span class="n">df_dc</span>

<span class="go">                   A         B         C string string2</span>
<span class="go">2000-01-01 -1.814470  1.018601 -0.595447    foo    cool</span>
<span class="go">2000-01-02  1.395433 -0.392670  0.007207    foo    cool</span>
<span class="go">2000-01-03  1.928123 -0.055224  2.395985    foo    cool</span>
<span class="go">2000-01-04  1.552825  0.166599  0.047609    foo    cool</span>
<span class="go">2000-01-05 -0.136473 -0.561757 -1.623033    NaN    cool</span>
<span class="go">2000-01-06  0.029399 -0.542108  0.282696    NaN    cool</span>
<span class="go">2000-01-07 -0.087302 -1.575170  1.771208    foo    cool</span>
<span class="go">2000-01-08  0.816482  1.100230 -0.612665    bar    cool</span>

<span class="c"># on-disk operations</span>
<span class="gp">In [276]: </span><span class="n">store</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s">&#39;df_dc&#39;</span><span class="p">,</span> <span class="n">df_dc</span><span class="p">,</span> <span class="n">data_columns</span> <span class="o">=</span> <span class="p">[</span><span class="s">&#39;B&#39;</span><span class="p">,</span> <span class="s">&#39;C&#39;</span><span class="p">,</span> <span class="s">&#39;string&#39;</span><span class="p">,</span> <span class="s">&#39;string2&#39;</span><span class="p">])</span>

<span class="gp">In [277]: </span><span class="n">store</span><span class="o">.</span><span class="n">select</span><span class="p">(</span><span class="s">&#39;df_dc&#39;</span><span class="p">,</span> <span class="p">[</span> <span class="n">Term</span><span class="p">(</span><span class="s">&#39;B&gt;0&#39;</span><span class="p">)</span> <span class="p">])</span>

<span class="go">                   A         B         C string string2</span>
<span class="go">2000-01-01 -1.814470  1.018601 -0.595447    foo    cool</span>
<span class="go">2000-01-04  1.552825  0.166599  0.047609    foo    cool</span>
<span class="go">2000-01-08  0.816482  1.100230 -0.612665    bar    cool</span>

<span class="c"># getting creative</span>
<span class="gp">In [278]: </span><span class="n">store</span><span class="o">.</span><span class="n">select</span><span class="p">(</span><span class="s">&#39;df_dc&#39;</span><span class="p">,</span> <span class="p">[</span><span class="s">&#39;B &gt; 0&#39;</span><span class="p">,</span> <span class="s">&#39;C &gt; 0&#39;</span><span class="p">,</span> <span class="s">&#39;string == foo&#39;</span><span class="p">])</span>

<span class="go">                   A         B         C string string2</span>
<span class="go">2000-01-04  1.552825  0.166599  0.047609    foo    cool</span>

<span class="c"># this is in-memory version of this type of selection</span>
<span class="gp">In [279]: </span><span class="n">df_dc</span><span class="p">[(</span><span class="n">df_dc</span><span class="o">.</span><span class="n">B</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span> <span class="o">&amp;</span> <span class="p">(</span><span class="n">df_dc</span><span class="o">.</span><span class="n">C</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span> <span class="o">&amp;</span> <span class="p">(</span><span class="n">df_dc</span><span class="o">.</span><span class="n">string</span> <span class="o">==</span> <span class="s">&#39;foo&#39;</span><span class="p">)]</span>

<span class="go">                   A         B         C string string2</span>
<span class="go">2000-01-04  1.552825  0.166599  0.047609    foo    cool</span>

<span class="c"># we have automagically created this index and the B/C/string/string2</span>
<span class="c"># columns are stored separately as ``PyTables`` columns</span>
<span class="gp">In [280]: </span><span class="n">store</span><span class="o">.</span><span class="n">root</span><span class="o">.</span><span class="n">df_dc</span><span class="o">.</span><span class="n">table</span>

<span class="go">/df_dc/table (Table(8,)) &#39;&#39;</span>
<span class="go">  description := {</span>
<span class="go">  &quot;index&quot;: Int64Col(shape=(), dflt=0, pos=0),</span>
<span class="go">  &quot;values_block_0&quot;: Float64Col(shape=(1,), dflt=0.0, pos=1),</span>
<span class="go">  &quot;B&quot;: Float64Col(shape=(), dflt=0.0, pos=2),</span>
<span class="go">  &quot;C&quot;: Float64Col(shape=(), dflt=0.0, pos=3),</span>
<span class="go">  &quot;string&quot;: StringCol(itemsize=3, shape=(), dflt=&#39;&#39;, pos=4),</span>
<span class="go">  &quot;string2&quot;: StringCol(itemsize=4, shape=(), dflt=&#39;&#39;, pos=5)}</span>
<span class="go">  byteorder := &#39;little&#39;</span>
<span class="go">  chunkshape := (1680,)</span>
<span class="go">  autoindex := True</span>
<span class="go">  colindexes := {</span>
<span class="go">    &quot;index&quot;: Index(6, medium, shuffle, zlib(1)).is_csi=False,</span>
<span class="go">    &quot;C&quot;: Index(6, medium, shuffle, zlib(1)).is_csi=False,</span>
<span class="go">    &quot;B&quot;: Index(6, medium, shuffle, zlib(1)).is_csi=False,</span>
<span class="go">    &quot;string2&quot;: Index(6, medium, shuffle, zlib(1)).is_csi=False,</span>
<span class="go">    &quot;string&quot;: Index(6, medium, shuffle, zlib(1)).is_csi=False}</span>
</pre></div>
</div>
<p>There is some performance degredation by making lots of columns into
<cite>data columns</cite>, so it is up to the user to designate these. In addition,
you cannot change data columns (nor indexables) after the first
append/put operation (Of course you can simply read in the data and
create a new table!)</p>
</div>
<div class="section" id="iterator">
<h3>Iterator<a class="headerlink" href="#iterator" title="Permalink to this headline">¶</a></h3>
<p>Starting in <tt class="docutils literal"><span class="pre">0.11.0</span></tt>, you can pass, <tt class="docutils literal"><span class="pre">iterator=True</span></tt> or <tt class="docutils literal"><span class="pre">chunksize=number_in_a_chunk</span></tt>
to <tt class="docutils literal"><span class="pre">select</span></tt> and <tt class="docutils literal"><span class="pre">select_as_multiple</span></tt> to return an iterator on the results.
The default is 50,000 rows returned in a chunk.</p>
<div class="highlight-ipython"><div class="highlight"><pre><span class="gp">In [281]: </span><span class="k">for</span> <span class="n">df</span> <span class="ow">in</span> <span class="n">store</span><span class="o">.</span><span class="n">select</span><span class="p">(</span><span class="s">&#39;df&#39;</span><span class="p">,</span> <span class="n">chunksize</span><span class="o">=</span><span class="mi">3</span><span class="p">):</span>
<span class="gp">   .....:</span>    <span class="k">print</span><span class="p">(</span><span class="n">df</span><span class="p">)</span>
<span class="gp">   .....:</span> 
<span class="go">                   A         B         C</span>
<span class="go">2000-01-01 -1.814470  1.018601 -0.595447</span>
<span class="go">2000-01-02  1.395433 -0.392670  0.007207</span>
<span class="go">2000-01-03  1.928123 -0.055224  2.395985</span>
<span class="go">                   A         B         C</span>
<span class="go">2000-01-04  1.552825  0.166599  0.047609</span>
<span class="go">2000-01-05 -0.136473 -0.561757 -1.623033</span>
<span class="go">2000-01-06  0.029399 -0.542108  0.282696</span>
<span class="go">                   A        B         C</span>
<span class="go">2000-01-07 -0.087302 -1.57517  1.771208</span>
<span class="go">2000-01-08  0.816482  1.10023 -0.612665</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<div class="versionadded">
<p><span>New in version 0.12.</span></p>
</div>
<p>You can also use the iterator with <tt class="docutils literal"><span class="pre">read_hdf</span></tt> which will open, then
automatically close the store when finished iterating.</p>
<div class="last highlight-python"><div class="highlight"><pre><span class="k">for</span> <span class="n">df</span> <span class="ow">in</span> <span class="n">read_hdf</span><span class="p">(</span><span class="s">&#39;store.h5&#39;</span><span class="p">,</span><span class="s">&#39;df&#39;</span><span class="p">,</span> <span class="n">chunsize</span><span class="o">=</span><span class="mi">3</span><span class="p">):</span>
    <span class="k">print</span><span class="p">(</span><span class="n">df</span><span class="p">)</span>
</pre></div>
</div>
</div>
<p>Note, that the chunksize keyword applies to the <strong>returned</strong> rows. So if you
are doing a query, then that set will be subdivided and returned in the
iterator. Keep in mind that if you do not pass a <tt class="docutils literal"><span class="pre">where</span></tt> selection criteria
then the <tt class="docutils literal"><span class="pre">nrows</span></tt> of the table are considered.</p>
</div>
<div class="section" id="advanced-queries">
<h3>Advanced Queries<a class="headerlink" href="#advanced-queries" title="Permalink to this headline">¶</a></h3>
<p><strong>Select a Single Column</strong></p>
<p>To retrieve a single indexable or data column, use the
method <tt class="docutils literal"><span class="pre">select_column</span></tt>. This will, for example, enable you to get the index
very quickly. These return a <tt class="docutils literal"><span class="pre">Series</span></tt> of the result, indexed by the row number.
These do not currently accept the <tt class="docutils literal"><span class="pre">where</span></tt> selector.</p>
<div class="highlight-ipython"><div class="highlight"><pre><span class="gp">In [282]: </span><span class="n">store</span><span class="o">.</span><span class="n">select_column</span><span class="p">(</span><span class="s">&#39;df_dc&#39;</span><span class="p">,</span> <span class="s">&#39;index&#39;</span><span class="p">)</span>

<span class="go">0   2000-01-01 00:00:00</span>
<span class="go">1   2000-01-02 00:00:00</span>
<span class="go">2   2000-01-03 00:00:00</span>
<span class="go">3   2000-01-04 00:00:00</span>
<span class="go">4   2000-01-05 00:00:00</span>
<span class="go">5   2000-01-06 00:00:00</span>
<span class="go">6   2000-01-07 00:00:00</span>
<span class="go">7   2000-01-08 00:00:00</span>
<span class="go">dtype: datetime64[ns]</span>

<span class="gp">In [283]: </span><span class="n">store</span><span class="o">.</span><span class="n">select_column</span><span class="p">(</span><span class="s">&#39;df_dc&#39;</span><span class="p">,</span> <span class="s">&#39;string&#39;</span><span class="p">)</span>

<span class="go">0    foo</span>
<span class="go">1    foo</span>
<span class="go">2    foo</span>
<span class="go">3    foo</span>
<span class="go">4    NaN</span>
<span class="go">5    NaN</span>
<span class="go">6    foo</span>
<span class="go">7    bar</span>
<span class="go">dtype: object</span>
</pre></div>
</div>
<p id="io-hdf5-selecting-coordinates"><strong>Selecting coordinates</strong></p>
<p>Sometimes you want to get the coordinates (a.k.a the index locations) of your query. This returns an
<tt class="docutils literal"><span class="pre">Int64Index</span></tt> of the resulting locations. These coordinates can also be passed to subsequent
<tt class="docutils literal"><span class="pre">where</span></tt> operations.</p>
<div class="highlight-ipython"><div class="highlight"><pre><span class="gp">In [284]: </span><span class="n">df_coord</span> <span class="o">=</span> <span class="n">DataFrame</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">randn</span><span class="p">(</span><span class="mi">1000</span><span class="p">,</span><span class="mi">2</span><span class="p">),</span><span class="n">index</span><span class="o">=</span><span class="n">date_range</span><span class="p">(</span><span class="s">&#39;20000101&#39;</span><span class="p">,</span><span class="n">periods</span><span class="o">=</span><span class="mi">1000</span><span class="p">))</span>

<span class="gp">In [285]: </span><span class="n">store</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s">&#39;df_coord&#39;</span><span class="p">,</span><span class="n">df_coord</span><span class="p">)</span>

<span class="gp">In [286]: </span><span class="n">c</span> <span class="o">=</span> <span class="n">store</span><span class="o">.</span><span class="n">select_as_coordinates</span><span class="p">(</span><span class="s">&#39;df_coord&#39;</span><span class="p">,</span><span class="s">&#39;index&gt;20020101&#39;</span><span class="p">)</span>

<span class="gp">In [287]: </span><span class="n">c</span><span class="o">.</span><span class="n">summary</span><span class="p">()</span>
<span class="go">u&#39;Int64Index: 268 entries, 732 to 999&#39;</span>

<span class="gp">In [288]: </span><span class="n">store</span><span class="o">.</span><span class="n">select</span><span class="p">(</span><span class="s">&#39;df_coord&#39;</span><span class="p">,</span><span class="n">where</span><span class="o">=</span><span class="n">c</span><span class="p">)</span>

<span class="go">&lt;class &#39;pandas.core.frame.DataFrame&#39;&gt;</span>
<span class="go">DatetimeIndex: 268 entries, 2002-01-02 00:00:00 to 2002-09-26 00:00:00</span>
<span class="go">Freq: D</span>
<span class="go">Data columns (total 2 columns):</span>
<span class="go">0    268  non-null values</span>
<span class="go">1    268  non-null values</span>
<span class="go">dtypes: float64(2)</span>
</pre></div>
</div>
<p id="io-hdf5-where-mask"><strong>Selecting using a where mask</strong></p>
<p>Sometime your query can involve creating a list of rows to select. Usually this <tt class="docutils literal"><span class="pre">mask</span></tt> would
be a resulting <tt class="docutils literal"><span class="pre">index</span></tt> from an indexing operation. This example selects the months of
a datetimeindex which are 5.</p>
<div class="highlight-ipython"><div class="highlight"><pre><span class="gp">In [289]: </span><span class="n">df_mask</span> <span class="o">=</span> <span class="n">DataFrame</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">randn</span><span class="p">(</span><span class="mi">1000</span><span class="p">,</span><span class="mi">2</span><span class="p">),</span><span class="n">index</span><span class="o">=</span><span class="n">date_range</span><span class="p">(</span><span class="s">&#39;20000101&#39;</span><span class="p">,</span><span class="n">periods</span><span class="o">=</span><span class="mi">1000</span><span class="p">))</span>

<span class="gp">In [290]: </span><span class="n">store</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s">&#39;df_mask&#39;</span><span class="p">,</span><span class="n">df_mask</span><span class="p">)</span>

<span class="gp">In [291]: </span><span class="n">c</span> <span class="o">=</span> <span class="n">store</span><span class="o">.</span><span class="n">select_column</span><span class="p">(</span><span class="s">&#39;df_mask&#39;</span><span class="p">,</span><span class="s">&#39;index&#39;</span><span class="p">)</span>

<span class="gp">In [292]: </span><span class="n">where</span> <span class="o">=</span> <span class="n">c</span><span class="p">[</span><span class="n">DatetimeIndex</span><span class="p">(</span><span class="n">c</span><span class="p">)</span><span class="o">.</span><span class="n">month</span><span class="o">==</span><span class="mi">5</span><span class="p">]</span><span class="o">.</span><span class="n">index</span>

<span class="gp">In [293]: </span><span class="n">store</span><span class="o">.</span><span class="n">select</span><span class="p">(</span><span class="s">&#39;df_mask&#39;</span><span class="p">,</span><span class="n">where</span><span class="o">=</span><span class="n">where</span><span class="p">)</span>

<span class="go">&lt;class &#39;pandas.core.frame.DataFrame&#39;&gt;</span>
<span class="go">DatetimeIndex: 93 entries, 2000-05-01 00:00:00 to 2002-05-31 00:00:00</span>
<span class="go">Data columns (total 2 columns):</span>
<span class="go">0    93  non-null values</span>
<span class="go">1    93  non-null values</span>
<span class="go">dtypes: float64(2)</span>
</pre></div>
</div>
<p><strong>Replicating or</strong></p>
<p><tt class="docutils literal"><span class="pre">not</span></tt> and <tt class="docutils literal"><span class="pre">or</span></tt> conditions are unsupported at this time; however,
<tt class="docutils literal"><span class="pre">or</span></tt> operations are easy to replicate, by repeatedly applying the
criteria to the table, and then <tt class="docutils literal"><span class="pre">concat</span></tt> the results.</p>
<div class="highlight-ipython"><div class="highlight"><pre><span class="gp">In [294]: </span><span class="n">crit1</span> <span class="o">=</span> <span class="p">[</span> <span class="n">Term</span><span class="p">(</span><span class="s">&#39;B&gt;0&#39;</span><span class="p">),</span> <span class="n">Term</span><span class="p">(</span><span class="s">&#39;C&gt;0&#39;</span><span class="p">),</span> <span class="n">Term</span><span class="p">(</span><span class="s">&#39;string=foo&#39;</span><span class="p">)</span> <span class="p">]</span>

<span class="gp">In [295]: </span><span class="n">crit2</span> <span class="o">=</span> <span class="p">[</span> <span class="n">Term</span><span class="p">(</span><span class="s">&#39;B&lt;0&#39;</span><span class="p">),</span> <span class="n">Term</span><span class="p">(</span><span class="s">&#39;C&gt;0&#39;</span><span class="p">),</span> <span class="n">Term</span><span class="p">(</span><span class="s">&#39;string=foo&#39;</span><span class="p">)</span> <span class="p">]</span>

<span class="gp">In [296]: </span><span class="n">concat</span><span class="p">([</span><span class="n">store</span><span class="o">.</span><span class="n">select</span><span class="p">(</span><span class="s">&#39;df_dc&#39;</span><span class="p">,</span><span class="n">c</span><span class="p">)</span> <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="p">[</span><span class="n">crit1</span><span class="p">,</span> <span class="n">crit2</span><span class="p">]])</span>

<span class="go">                   A         B         C string string2</span>
<span class="go">2000-01-04  1.552825  0.166599  0.047609    foo    cool</span>
<span class="go">2000-01-02  1.395433 -0.392670  0.007207    foo    cool</span>
<span class="go">2000-01-03  1.928123 -0.055224  2.395985    foo    cool</span>
<span class="go">2000-01-07 -0.087302 -1.575170  1.771208    foo    cool</span>
</pre></div>
</div>
<p><strong>Storer Object</strong></p>
<p>If you want to inspect the stored object, retrieve via
<tt class="docutils literal"><span class="pre">get_storer</span></tt>. You could use this programmatically to say get the number
of rows in an object.</p>
<div class="highlight-ipython"><div class="highlight"><pre><span class="gp">In [297]: </span><span class="n">store</span><span class="o">.</span><span class="n">get_storer</span><span class="p">(</span><span class="s">&#39;df_dc&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">nrows</span>
<span class="go">8</span>
</pre></div>
</div>
</div>
<div class="section" id="multiple-table-queries">
<h3>Multiple Table Queries<a class="headerlink" href="#multiple-table-queries" title="Permalink to this headline">¶</a></h3>
<p>New in 0.10.1 are the methods <tt class="docutils literal"><span class="pre">append_to_multiple</span></tt> and
<tt class="docutils literal"><span class="pre">select_as_multiple</span></tt>, that can perform appending/selecting from
multiple tables at once. The idea is to have one table (call it the
selector table) that you index most/all of the columns, and perform your
queries. The other table(s) are data tables with an index matching the
selector table&#8217;s index. You can then perform a very fast query
on the selector table, yet get lots of data back. This method is similar to
having a very wide table, but enables more efficient queries.</p>
<p>The <tt class="docutils literal"><span class="pre">append_to_multiple</span></tt> method splits a given single DataFrame
into multiple tables according to <tt class="docutils literal"><span class="pre">d</span></tt>, a dictionary that maps the
table names to a list of &#8216;columns&#8217; you want in that table. If <cite>None</cite>
is used in place of a list, that table will have the remaining
unspecified columns of the given DataFrame. The argument <tt class="docutils literal"><span class="pre">selector</span></tt>
defines which table is the selector table (which you can make queries from).
The argument <tt class="docutils literal"><span class="pre">dropna</span></tt> will drop rows from the input DataFrame to ensure
tables are synchronized.  This means that if a row for one of the tables
being written to is entirely <tt class="docutils literal"><span class="pre">np.NaN</span></tt>, that row will be dropped from all tables.</p>
<p>If <tt class="docutils literal"><span class="pre">dropna</span></tt> is False, <strong>THE USER IS RESPONSIBLE FOR SYNCHRONIZING THE TABLES</strong>.
Remember that entirely <tt class="docutils literal"><span class="pre">np.Nan</span></tt> rows are not written to the HDFStore, so if
you choose to call <tt class="docutils literal"><span class="pre">dropna=False</span></tt>, some tables may have more rows than others,
and therefore <tt class="docutils literal"><span class="pre">select_as_multiple</span></tt> may not work or it may return unexpected
results.</p>
<div class="highlight-ipython"><div class="highlight"><pre><span class="gp">In [298]: </span><span class="n">df_mt</span> <span class="o">=</span> <span class="n">DataFrame</span><span class="p">(</span><span class="n">randn</span><span class="p">(</span><span class="mi">8</span><span class="p">,</span> <span class="mi">6</span><span class="p">),</span> <span class="n">index</span><span class="o">=</span><span class="n">date_range</span><span class="p">(</span><span class="s">&#39;1/1/2000&#39;</span><span class="p">,</span> <span class="n">periods</span><span class="o">=</span><span class="mi">8</span><span class="p">),</span>
<span class="gp">   .....:</span>                                <span class="n">columns</span><span class="o">=</span><span class="p">[</span><span class="s">&#39;A&#39;</span><span class="p">,</span> <span class="s">&#39;B&#39;</span><span class="p">,</span> <span class="s">&#39;C&#39;</span><span class="p">,</span> <span class="s">&#39;D&#39;</span><span class="p">,</span> <span class="s">&#39;E&#39;</span><span class="p">,</span> <span class="s">&#39;F&#39;</span><span class="p">])</span>
<span class="gp">   .....:</span> 

<span class="gp">In [299]: </span><span class="n">df_mt</span><span class="p">[</span><span class="s">&#39;foo&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s">&#39;bar&#39;</span>

<span class="gp">In [300]: </span><span class="n">df_mt</span><span class="o">.</span><span class="n">ix</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="p">(</span><span class="s">&#39;A&#39;</span><span class="p">,</span> <span class="s">&#39;B&#39;</span><span class="p">)]</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span>

<span class="c"># you can also create the tables individually</span>
<span class="gp">In [301]: </span><span class="n">store</span><span class="o">.</span><span class="n">append_to_multiple</span><span class="p">({</span><span class="s">&#39;df1_mt&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s">&#39;A&#39;</span><span class="p">,</span> <span class="s">&#39;B&#39;</span><span class="p">],</span> <span class="s">&#39;df2_mt&#39;</span><span class="p">:</span> <span class="bp">None</span> <span class="p">},</span>
<span class="gp">   .....:</span>                           <span class="n">df_mt</span><span class="p">,</span> <span class="n">selector</span><span class="o">=</span><span class="s">&#39;df1_mt&#39;</span><span class="p">)</span>
<span class="gp">   .....:</span> 

<span class="gp">In [302]: </span><span class="n">store</span>

<span class="go">&lt;class &#39;pandas.io.pytables.HDFStore&#39;&gt;</span>
<span class="go">File path: store.h5</span>
<span class="go">/df                     frame_table  (typ-&gt;appendable,nrows-&gt;8,ncols-&gt;3,indexers-&gt;[index])                         </span>
<span class="go">/df1_mt                 frame_table  (typ-&gt;appendable,nrows-&gt;7,ncols-&gt;2,indexers-&gt;[index],dc-&gt;[A,B])               </span>
<span class="go">/df2_mt                 frame_table  (typ-&gt;appendable,nrows-&gt;7,ncols-&gt;5,indexers-&gt;[index])                         </span>
<span class="go">/df_coord               frame_table  (typ-&gt;appendable,nrows-&gt;1000,ncols-&gt;2,indexers-&gt;[index])                      </span>
<span class="go">/df_dc                  frame_table  (typ-&gt;appendable,nrows-&gt;8,ncols-&gt;5,indexers-&gt;[index],dc-&gt;[B,C,string,string2])</span>
<span class="go">/df_mask                frame_table  (typ-&gt;appendable,nrows-&gt;1000,ncols-&gt;2,indexers-&gt;[index])                      </span>
<span class="go">/df_mi                  frame_table  (typ-&gt;appendable_multi,nrows-&gt;10,ncols-&gt;5,indexers-&gt;[index],dc-&gt;[bar,foo])    </span>
<span class="go">/df_mixed               frame_table  (typ-&gt;appendable,nrows-&gt;8,ncols-&gt;7,indexers-&gt;[index])                         </span>
<span class="go">/dfq                    frame_table  (typ-&gt;appendable,nrows-&gt;10,ncols-&gt;4,indexers-&gt;[index],dc-&gt;[A,B,C,D])          </span>
<span class="go">/dftd                   frame_table  (typ-&gt;appendable,nrows-&gt;10,ncols-&gt;3,indexers-&gt;[index],dc-&gt;[A,B,C])            </span>
<span class="go">/wp                     wide_table   (typ-&gt;appendable,nrows-&gt;20,ncols-&gt;2,indexers-&gt;[major_axis,minor_axis])        </span>
<span class="go">/foo/bar/bah            frame        (shape-&gt;[8,3])                                                                </span>

<span class="c"># individual tables were created</span>
<span class="gp">In [303]: </span><span class="n">store</span><span class="o">.</span><span class="n">select</span><span class="p">(</span><span class="s">&#39;df1_mt&#39;</span><span class="p">)</span>

<span class="go">                   A         B</span>
<span class="go">2000-01-01  0.121394  1.363542</span>
<span class="go">2000-01-03  1.032229 -0.952039</span>
<span class="go">2000-01-04 -1.194141 -1.107613</span>
<span class="go">2000-01-05 -0.610311  1.164091</span>
<span class="go">2000-01-06 -0.178287  0.871720</span>
<span class="go">2000-01-07  0.234596 -0.062204</span>
<span class="go">2000-01-08 -0.692230  0.263000</span>

<span class="gp">In [304]: </span><span class="n">store</span><span class="o">.</span><span class="n">select</span><span class="p">(</span><span class="s">&#39;df2_mt&#39;</span><span class="p">)</span>

<span class="go">                   C         D         E         F  foo</span>
<span class="go">2000-01-01 -1.698540 -1.025653 -1.110771 -0.226422  bar</span>
<span class="go">2000-01-03  1.163372  0.821268 -0.659649 -0.047990  bar</span>
<span class="go">2000-01-04  1.205088  1.391827 -0.020110 -0.677410  bar</span>
<span class="go">2000-01-05  0.279686 -1.615229  0.311898  0.150534  bar</span>
<span class="go">2000-01-06  0.358781  0.229570 -1.971129  1.438707  bar</span>
<span class="go">2000-01-07 -0.329776  2.089877  0.655818 -0.117056  bar</span>
<span class="go">2000-01-08 -0.289316  1.725066 -0.149029 -0.967613  bar</span>

<span class="c"># as a multiple</span>
<span class="gp">In [305]: </span><span class="n">store</span><span class="o">.</span><span class="n">select_as_multiple</span><span class="p">([</span><span class="s">&#39;df1_mt&#39;</span><span class="p">,</span> <span class="s">&#39;df2_mt&#39;</span><span class="p">],</span> <span class="n">where</span><span class="o">=</span><span class="p">[</span><span class="s">&#39;A&gt;0&#39;</span><span class="p">,</span> <span class="s">&#39;B&gt;0&#39;</span><span class="p">],</span>
<span class="gp">   .....:</span>                           <span class="n">selector</span> <span class="o">=</span> <span class="s">&#39;df1_mt&#39;</span><span class="p">)</span>
<span class="gp">   .....:</span> 

<span class="go">                   A         B        C         D         E         F  foo</span>
<span class="go">2000-01-01  0.121394  1.363542 -1.69854 -1.025653 -1.110771 -0.226422  bar</span>
</pre></div>
</div>
</div>
<div class="section" id="delete-from-a-table">
<h3>Delete from a Table<a class="headerlink" href="#delete-from-a-table" title="Permalink to this headline">¶</a></h3>
<p>You can delete from a table selectively by specifying a <tt class="docutils literal"><span class="pre">where</span></tt>. In
deleting rows, it is important to understand the <tt class="docutils literal"><span class="pre">PyTables</span></tt> deletes
rows by erasing the rows, then <strong>moving</strong> the following data. Thus
deleting can potentially be a very expensive operation depending on the
orientation of your data. This is especially true in higher dimensional
objects (<tt class="docutils literal"><span class="pre">Panel</span></tt> and <tt class="docutils literal"><span class="pre">Panel4D</span></tt>). To get optimal performance, it&#8217;s
worthwhile to have the dimension you are deleting be the first of the
<tt class="docutils literal"><span class="pre">indexables</span></tt>.</p>
<p>Data is ordered (on the disk) in terms of the <tt class="docutils literal"><span class="pre">indexables</span></tt>. Here&#8217;s a
simple use case. You store panel-type data, with dates in the
<tt class="docutils literal"><span class="pre">major_axis</span></tt> and ids in the <tt class="docutils literal"><span class="pre">minor_axis</span></tt>. The data is then
interleaved like this:</p>
<blockquote>
<div><ul>
<li><dl class="first docutils">
<dt>date_1</dt>
<dd><ul class="first last simple">
<li>id_1</li>
<li>id_2</li>
<li>.</li>
<li>id_n</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>date_2</dt>
<dd><ul class="first last simple">
<li>id_1</li>
<li>.</li>
<li>id_n</li>
</ul>
</dd>
</dl>
</li>
</ul>
</div></blockquote>
<p>It should be clear that a delete operation on the <tt class="docutils literal"><span class="pre">major_axis</span></tt> will be
fairly quick, as one chunk is removed, then the following data moved. On
the other hand a delete operation on the <tt class="docutils literal"><span class="pre">minor_axis</span></tt> will be very
expensive. In this case it would almost certainly be faster to rewrite
the table using a <tt class="docutils literal"><span class="pre">where</span></tt> that selects all but the missing data.</p>
<div class="highlight-ipython"><div class="highlight"><pre><span class="c"># returns the number of rows deleted</span>
<span class="gp">In [306]: </span><span class="n">store</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="s">&#39;wp&#39;</span><span class="p">,</span> <span class="s">&#39;major_axis&gt;20000102&#39;</span> <span class="p">)</span>
<span class="go">12</span>

<span class="gp">In [307]: </span><span class="n">store</span><span class="o">.</span><span class="n">select</span><span class="p">(</span><span class="s">&#39;wp&#39;</span><span class="p">)</span>

<span class="go">&lt;class &#39;pandas.core.panel.Panel&#39;&gt;</span>
<span class="go">Dimensions: 2 (items) x 2 (major_axis) x 4 (minor_axis)</span>
<span class="go">Items axis: Item1 to Item2</span>
<span class="go">Major_axis axis: 2000-01-01 00:00:00 to 2000-01-02 00:00:00</span>
<span class="go">Minor_axis axis: A to D</span>
</pre></div>
</div>
<p>Please note that HDF5 <strong>DOES NOT RECLAIM SPACE</strong> in the h5 files
automatically. Thus, repeatedly deleting (or removing nodes) and adding
again <strong>WILL TEND TO INCREASE THE FILE SIZE</strong>. To <em>clean</em> the file, use
<tt class="docutils literal"><span class="pre">ptrepack</span></tt> (see below).</p>
</div>
<div class="section" id="compression">
<h3>Compression<a class="headerlink" href="#compression" title="Permalink to this headline">¶</a></h3>
<p><tt class="docutils literal"><span class="pre">PyTables</span></tt> allows the stored data to be compressed. Tthis applies to
all kinds of stores, not just tables.</p>
<blockquote>
<div><ul class="simple">
<li>Pass <tt class="docutils literal"><span class="pre">complevel=int</span></tt> for a compression level (1-9, with 0 being no
compression, and the default)</li>
<li>Pass <tt class="docutils literal"><span class="pre">complib=lib</span></tt> where lib is any of <tt class="docutils literal"><span class="pre">zlib,</span> <span class="pre">bzip2,</span> <span class="pre">lzo,</span> <span class="pre">blosc</span></tt> for
whichever compression library you prefer.</li>
</ul>
</div></blockquote>
<p><tt class="docutils literal"><span class="pre">HDFStore</span></tt> will use the file based compression scheme if no overriding
<tt class="docutils literal"><span class="pre">complib</span></tt> or <tt class="docutils literal"><span class="pre">complevel</span></tt> options are provided. <tt class="docutils literal"><span class="pre">blosc</span></tt> offers very
fast compression, and is my most used. Note that <tt class="docutils literal"><span class="pre">lzo</span></tt> and <tt class="docutils literal"><span class="pre">bzip2</span></tt>
may not be installed (by Python) by default.</p>
<p>Compression for all objects within the file</p>
<blockquote>
<div><ul class="simple">
<li><tt class="docutils literal"><span class="pre">store_compressed</span> <span class="pre">=</span> <span class="pre">HDFStore('store_compressed.h5',</span> <span class="pre">complevel=9,</span> <span class="pre">complib='blosc')</span></tt></li>
</ul>
</div></blockquote>
<p>Or on-the-fly compression (this only applies to tables). You can turn
off file compression for a specific table by passing <tt class="docutils literal"><span class="pre">complevel=0</span></tt></p>
<blockquote>
<div><ul class="simple">
<li><tt class="docutils literal"><span class="pre">store.append('df',</span> <span class="pre">df,</span> <span class="pre">complib='zlib',</span> <span class="pre">complevel=5)</span></tt></li>
</ul>
</div></blockquote>
<p><strong>ptrepack</strong></p>
<p><tt class="docutils literal"><span class="pre">PyTables</span></tt> offers better write performance when tables are compressed after
they are written, as opposed to turning on compression at the very
beginning. You can use the supplied <tt class="docutils literal"><span class="pre">PyTables</span></tt> utility
<tt class="docutils literal"><span class="pre">ptrepack</span></tt>. In addition, <tt class="docutils literal"><span class="pre">ptrepack</span></tt> can change compression levels
after the fact.</p>
<blockquote>
<div><ul class="simple">
<li><tt class="docutils literal"><span class="pre">ptrepack</span> <span class="pre">--chunkshape=auto</span> <span class="pre">--propindexes</span> <span class="pre">--complevel=9</span> <span class="pre">--complib=blosc</span> <span class="pre">in.h5</span> <span class="pre">out.h5</span></tt></li>
</ul>
</div></blockquote>
<p>Furthermore <tt class="docutils literal"><span class="pre">ptrepack</span> <span class="pre">in.h5</span> <span class="pre">out.h5</span></tt> will <em>repack</em> the file to allow
you to reuse previously deleted space. Aalternatively, one can simply
remove the file and write again, or use the <tt class="docutils literal"><span class="pre">copy</span></tt> method.</p>
</div>
<div class="section" id="notes-caveats">
<h3>Notes &amp; Caveats<a class="headerlink" href="#notes-caveats" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><ul class="simple">
<li>Once a <tt class="docutils literal"><span class="pre">table</span></tt> is created its items (Panel) / columns (DataFrame)
are fixed; only exactly the same columns can be appended</li>
<li>If a row has <tt class="docutils literal"><span class="pre">np.nan</span></tt> for <strong>EVERY COLUMN</strong> (having a <tt class="docutils literal"><span class="pre">nan</span></tt>
in a string, or a <tt class="docutils literal"><span class="pre">NaT</span></tt> in a datetime-like column counts as having
a value), then those rows <strong>WILL BE DROPPED IMPLICITLY</strong>. This limitation
<em>may</em> be addressed in the future.</li>
<li><tt class="docutils literal"><span class="pre">HDFStore</span></tt> is <strong>not-threadsafe for writing</strong>. The underlying
<tt class="docutils literal"><span class="pre">PyTables</span></tt> only supports concurrent reads (via threading or
processes). If you need reading and writing <em>at the same time</em>, you
need to serialize these operations in a single thread in a single
process. You will corrupt your data otherwise. See the issue
(:<cite>2397</cite>) for more information.</li>
<li><tt class="docutils literal"><span class="pre">PyTables</span></tt> only supports fixed-width string columns in
<tt class="docutils literal"><span class="pre">tables</span></tt>. The sizes of a string based indexing column
(e.g. <em>columns</em> or <em>minor_axis</em>) are determined as the maximum size
of the elements in that axis or by passing the parameter</li>
</ul>
</div></blockquote>
</div>
<div class="section" id="datatypes">
<h3>DataTypes<a class="headerlink" href="#datatypes" title="Permalink to this headline">¶</a></h3>
<p><tt class="docutils literal"><span class="pre">HDFStore</span></tt> will map an object dtype to the <tt class="docutils literal"><span class="pre">PyTables</span></tt> underlying
dtype. This means the following types are known to work:</p>
<blockquote>
<div><ul class="simple">
<li>floating : <tt class="docutils literal"><span class="pre">float64,</span> <span class="pre">float32,</span> <span class="pre">float16</span></tt> <em>(using</em> <tt class="docutils literal"><span class="pre">np.nan</span></tt> <em>to
represent invalid values)</em></li>
<li>integer : <tt class="docutils literal"><span class="pre">int64,</span> <span class="pre">int32,</span> <span class="pre">int8,</span> <span class="pre">uint64,</span> <span class="pre">uint32,</span> <span class="pre">uint8</span></tt></li>
<li>bool</li>
<li>datetime64[ns] <em>(using</em> <tt class="docutils literal"><span class="pre">NaT</span></tt> <em>to represent invalid values)</em></li>
<li>object : <tt class="docutils literal"><span class="pre">strings</span></tt> <em>(using</em> <tt class="docutils literal"><span class="pre">np.nan</span></tt> <em>to represent invalid
values)</em></li>
</ul>
</div></blockquote>
<p>Currently, <tt class="docutils literal"><span class="pre">unicode</span></tt> and <tt class="docutils literal"><span class="pre">datetime</span></tt> columns (represented with a
dtype of <tt class="docutils literal"><span class="pre">object</span></tt>), <strong>WILL FAIL</strong>. In addition, even though a column
may look like a <tt class="docutils literal"><span class="pre">datetime64[ns]</span></tt>, if it contains <tt class="docutils literal"><span class="pre">np.nan</span></tt>, this
<strong>WILL FAIL</strong>. You can try to convert datetimelike columns to proper
<tt class="docutils literal"><span class="pre">datetime64[ns]</span></tt> columns, that possibily contain <tt class="docutils literal"><span class="pre">NaT</span></tt> to represent
invalid values. (Some of these issues have been addressed and these
conversion may not be necessary in future versions of pandas)</p>
<blockquote>
<div><div class="highlight-ipython"><div class="highlight"><pre><span class="gp">In [308]: </span><span class="kn">import</span> <span class="nn">datetime</span>

<span class="gp">In [309]: </span><span class="n">df</span> <span class="o">=</span> <span class="n">DataFrame</span><span class="p">(</span><span class="nb">dict</span><span class="p">(</span><span class="n">datelike</span><span class="o">=</span><span class="n">Series</span><span class="p">([</span><span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="p">(</span><span class="mi">2001</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span>
<span class="gp">   .....:</span>                                      <span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="p">(</span><span class="mi">2001</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">])))</span>
<span class="gp">   .....:</span> 

<span class="gp">In [310]: </span><span class="n">df</span>

<span class="go">              datelike</span>
<span class="go">0  2001-01-01 00:00:00</span>
<span class="go">1  2001-01-02 00:00:00</span>
<span class="go">2                  NaN</span>

<span class="gp">In [311]: </span><span class="n">df</span><span class="o">.</span><span class="n">dtypes</span>

<span class="go">datelike    object</span>
<span class="go">dtype: object</span>

<span class="c"># to convert</span>
<span class="gp">In [312]: </span><span class="n">df</span><span class="p">[</span><span class="s">&#39;datelike&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">Series</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s">&#39;datelike&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">values</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="s">&#39;M8[ns]&#39;</span><span class="p">)</span>

<span class="gp">In [313]: </span><span class="n">df</span>

<span class="go">             datelike</span>
<span class="go">0 2001-01-01 00:00:00</span>
<span class="go">1 2001-01-02 00:00:00</span>
<span class="go">2                 NaT</span>

<span class="gp">In [314]: </span><span class="n">df</span><span class="o">.</span><span class="n">dtypes</span>

<span class="go">datelike    datetime64[ns]</span>
<span class="go">dtype: object</span>
</pre></div>
</div>
</div></blockquote>
</div>
<div class="section" id="string-columns">
<h3>String Columns<a class="headerlink" href="#string-columns" title="Permalink to this headline">¶</a></h3>
<p><strong>min_itemsize</strong></p>
<p>The underlying implementation of <tt class="docutils literal"><span class="pre">HDFStore</span></tt> uses a fixed column width (itemsize) for string columns.
A string column itemsize is calculated as the maximum of the
length of data (for that column) that is passed to the <tt class="docutils literal"><span class="pre">HDFStore</span></tt>, <strong>in the first append</strong>. Subsequent appends,
may introduce a string for a column <strong>larger</strong> than the column can hold, an Exception will be raised (otherwise you
could have a silent truncation of these columns, leading to loss of information). In the future we may relax this and
allow a user-specified truncation to occur.</p>
<p>Pass <tt class="docutils literal"><span class="pre">min_itemsize</span></tt> on the first table creation to a-priori specifiy the minimum length of a particular string column.
<tt class="docutils literal"><span class="pre">min_itemsize</span></tt> can be an integer, or a dict mapping a column name to an integer. You can pass <tt class="docutils literal"><span class="pre">values</span></tt> as a key to
allow all <em>indexables</em> or <em>data_columns</em> to have this min_itemsize.</p>
<p>Starting in 0.11, passing a <tt class="docutils literal"><span class="pre">min_itemsize</span></tt> dict will cause all passed columns to be created as <em>data_columns</em> automatically.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">If you are not passing any <em>data_columns</em>, then the min_itemsize will be the maximum of the length of any string passed</p>
</div>
<div class="highlight-ipython"><div class="highlight"><pre><span class="gp">In [315]: </span><span class="n">dfs</span> <span class="o">=</span> <span class="n">DataFrame</span><span class="p">(</span><span class="nb">dict</span><span class="p">(</span><span class="n">A</span> <span class="o">=</span> <span class="s">&#39;foo&#39;</span><span class="p">,</span> <span class="n">B</span> <span class="o">=</span> <span class="s">&#39;bar&#39;</span><span class="p">),</span><span class="n">index</span><span class="o">=</span><span class="nb">list</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">5</span><span class="p">)))</span>

<span class="gp">In [316]: </span><span class="n">dfs</span>

<span class="go">     A    B</span>
<span class="go">0  foo  bar</span>
<span class="go">1  foo  bar</span>
<span class="go">2  foo  bar</span>
<span class="go">3  foo  bar</span>
<span class="go">4  foo  bar</span>

<span class="c"># A and B have a size of 30</span>
<span class="gp">In [317]: </span><span class="n">store</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s">&#39;dfs&#39;</span><span class="p">,</span> <span class="n">dfs</span><span class="p">,</span> <span class="n">min_itemsize</span> <span class="o">=</span> <span class="mi">30</span><span class="p">)</span>

<span class="gp">In [318]: </span><span class="n">store</span><span class="o">.</span><span class="n">get_storer</span><span class="p">(</span><span class="s">&#39;dfs&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">table</span>

<span class="go">/dfs/table (Table(5,)) &#39;&#39;</span>
<span class="go">  description := {</span>
<span class="go">  &quot;index&quot;: Int64Col(shape=(), dflt=0, pos=0),</span>
<span class="go">  &quot;values_block_0&quot;: StringCol(itemsize=30, shape=(2,), dflt=&#39;&#39;, pos=1)}</span>
<span class="go">  byteorder := &#39;little&#39;</span>
<span class="go">  chunkshape := (963,)</span>
<span class="go">  autoindex := True</span>
<span class="go">  colindexes := {</span>
<span class="go">    &quot;index&quot;: Index(6, medium, shuffle, zlib(1)).is_csi=False}</span>

<span class="c"># A is created as a data_column with a size of 30</span>
<span class="c"># B is size is calculated</span>
<span class="gp">In [319]: </span><span class="n">store</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s">&#39;dfs2&#39;</span><span class="p">,</span> <span class="n">dfs</span><span class="p">,</span> <span class="n">min_itemsize</span> <span class="o">=</span> <span class="p">{</span> <span class="s">&#39;A&#39;</span> <span class="p">:</span> <span class="mi">30</span> <span class="p">})</span>

<span class="gp">In [320]: </span><span class="n">store</span><span class="o">.</span><span class="n">get_storer</span><span class="p">(</span><span class="s">&#39;dfs2&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">table</span>

<span class="go">/dfs2/table (Table(5,)) &#39;&#39;</span>
<span class="go">  description := {</span>
<span class="go">  &quot;index&quot;: Int64Col(shape=(), dflt=0, pos=0),</span>
<span class="go">  &quot;values_block_0&quot;: StringCol(itemsize=3, shape=(1,), dflt=&#39;&#39;, pos=1),</span>
<span class="go">  &quot;A&quot;: StringCol(itemsize=30, shape=(), dflt=&#39;&#39;, pos=2)}</span>
<span class="go">  byteorder := &#39;little&#39;</span>
<span class="go">  chunkshape := (1598,)</span>
<span class="go">  autoindex := True</span>
<span class="go">  colindexes := {</span>
<span class="go">    &quot;A&quot;: Index(6, medium, shuffle, zlib(1)).is_csi=False,</span>
<span class="go">    &quot;index&quot;: Index(6, medium, shuffle, zlib(1)).is_csi=False}</span>
</pre></div>
</div>
<p><strong>nan_rep</strong></p>
<p>String columns will serialize a <tt class="docutils literal"><span class="pre">np.nan</span></tt> (a missing value) with the <tt class="docutils literal"><span class="pre">nan_rep</span></tt> string representation. This defaults to the string value <tt class="docutils literal"><span class="pre">nan</span></tt>.
You could inadvertently turn an actual <tt class="docutils literal"><span class="pre">nan</span></tt> value into a missing value.</p>
<div class="highlight-ipython"><div class="highlight"><pre><span class="gp">In [321]: </span><span class="n">dfss</span> <span class="o">=</span> <span class="n">DataFrame</span><span class="p">(</span><span class="nb">dict</span><span class="p">(</span><span class="n">A</span> <span class="o">=</span> <span class="p">[</span><span class="s">&#39;foo&#39;</span><span class="p">,</span><span class="s">&#39;bar&#39;</span><span class="p">,</span><span class="s">&#39;nan&#39;</span><span class="p">]))</span>

<span class="gp">In [322]: </span><span class="n">dfss</span>

<span class="go">     A</span>
<span class="go">0  foo</span>
<span class="go">1  bar</span>
<span class="go">2  nan</span>

<span class="gp">In [323]: </span><span class="n">store</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s">&#39;dfss&#39;</span><span class="p">,</span> <span class="n">dfss</span><span class="p">)</span>

<span class="gp">In [324]: </span><span class="n">store</span><span class="o">.</span><span class="n">select</span><span class="p">(</span><span class="s">&#39;dfss&#39;</span><span class="p">)</span>

<span class="go">     A</span>
<span class="go">0  foo</span>
<span class="go">1  bar</span>
<span class="go">2  NaN</span>

<span class="c"># here you need to specify a different nan rep</span>
<span class="gp">In [325]: </span><span class="n">store</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s">&#39;dfss2&#39;</span><span class="p">,</span> <span class="n">dfss</span><span class="p">,</span> <span class="n">nan_rep</span><span class="o">=</span><span class="s">&#39;_nan_&#39;</span><span class="p">)</span>

<span class="gp">In [326]: </span><span class="n">store</span><span class="o">.</span><span class="n">select</span><span class="p">(</span><span class="s">&#39;dfss2&#39;</span><span class="p">)</span>

<span class="go">     A</span>
<span class="go">0  foo</span>
<span class="go">1  bar</span>
<span class="go">2  nan</span>
</pre></div>
</div>
</div>
<div class="section" id="external-compatibility">
<h3>External Compatibility<a class="headerlink" href="#external-compatibility" title="Permalink to this headline">¶</a></h3>
<p><tt class="docutils literal"><span class="pre">HDFStore</span></tt> write <tt class="docutils literal"><span class="pre">table</span></tt> format objects in specific formats suitable for
producing loss-less roundtrips to pandas objects. For external
compatibility, <tt class="docutils literal"><span class="pre">HDFStore</span></tt> can read native <tt class="docutils literal"><span class="pre">PyTables</span></tt> format
tables. It is possible to write an <tt class="docutils literal"><span class="pre">HDFStore</span></tt> object that can easily
be imported into <tt class="docutils literal"><span class="pre">R</span></tt> using the <tt class="docutils literal"><span class="pre">rhdf5</span></tt> library. Create a table
format store like this:</p>
<blockquote>
<div><div class="highlight-ipython"><div class="highlight"><pre><span class="gp">In [327]: </span><span class="n">store_export</span> <span class="o">=</span> <span class="n">HDFStore</span><span class="p">(</span><span class="s">&#39;export.h5&#39;</span><span class="p">)</span>

<span class="gp">In [328]: </span><span class="n">store_export</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s">&#39;df_dc&#39;</span><span class="p">,</span> <span class="n">df_dc</span><span class="p">,</span> <span class="n">data_columns</span><span class="o">=</span><span class="n">df_dc</span><span class="o">.</span><span class="n">columns</span><span class="p">)</span>

<span class="gp">In [329]: </span><span class="n">store_export</span>

<span class="go">&lt;class &#39;pandas.io.pytables.HDFStore&#39;&gt;</span>
<span class="go">File path: export.h5</span>
<span class="go">/df_dc            frame_table  (typ-&gt;appendable,nrows-&gt;8,ncols-&gt;5,indexers-&gt;[index],dc-&gt;[A,B,C,string,string2])</span>
</pre></div>
</div>
</div></blockquote>
</div>
<div class="section" id="backwards-compatibility">
<h3>Backwards Compatibility<a class="headerlink" href="#backwards-compatibility" title="Permalink to this headline">¶</a></h3>
<p>0.10.1 of <tt class="docutils literal"><span class="pre">HDFStore</span></tt> can read tables created in a prior version of pandas,
however query terms using the
prior (undocumented) methodology are unsupported. <tt class="docutils literal"><span class="pre">HDFStore</span></tt> will
issue a warning if you try to use a legacy-format file. You must
read in the entire file and write it out using the new format, using the
method <tt class="docutils literal"><span class="pre">copy</span></tt> to take advantage of the updates. The group attribute
<tt class="docutils literal"><span class="pre">pandas_version</span></tt> contains the version information. <tt class="docutils literal"><span class="pre">copy</span></tt> takes a
number of options, please see the docstring.</p>
<blockquote>
<div><div class="highlight-ipython"><div class="highlight"><pre><span class="c"># a legacy store</span>
<span class="gp">In [330]: </span><span class="n">legacy_store</span> <span class="o">=</span> <span class="n">HDFStore</span><span class="p">(</span><span class="n">legacy_file_path</span><span class="p">,</span><span class="s">&#39;r&#39;</span><span class="p">)</span>

<span class="gp">In [331]: </span><span class="n">legacy_store</span>

<span class="go">&lt;class &#39;pandas.io.pytables.HDFStore&#39;&gt;</span>
<span class="go">File path: /Users/jtratner/projects/python/pandas/doc/source/_static/legacy_0.10.h5</span>
<span class="go">/a                    series       (shape-&gt;[30])                                                                        </span>
<span class="go">/b                    frame        (shape-&gt;[30,4])                                                                      </span>
<span class="go">/df1_mixed            frame_table [0.10.0] (typ-&gt;appendable,nrows-&gt;30,ncols-&gt;11,indexers-&gt;[index])                      </span>
<span class="go">/p1_mixed             wide_table  [0.10.0] (typ-&gt;appendable,nrows-&gt;120,ncols-&gt;9,indexers-&gt;[major_axis,minor_axis])      </span>
<span class="go">/p4d_mixed            ndim_table  [0.10.0] (typ-&gt;appendable,nrows-&gt;360,ncols-&gt;9,indexers-&gt;[items,major_axis,minor_axis])</span>
<span class="go">/foo/bar              wide         (shape-&gt;[3,30,4])                                                                    </span>

<span class="c"># copy (and return the new handle)</span>
<span class="gp">In [332]: </span><span class="n">new_store</span> <span class="o">=</span> <span class="n">legacy_store</span><span class="o">.</span><span class="n">copy</span><span class="p">(</span><span class="s">&#39;store_new.h5&#39;</span><span class="p">)</span>

<span class="gp">In [333]: </span><span class="n">new_store</span>

<span class="go">&lt;class &#39;pandas.io.pytables.HDFStore&#39;&gt;</span>
<span class="go">File path: store_new.h5</span>
<span class="go">/a                    series       (shape-&gt;[30])                                                                </span>
<span class="go">/b                    frame        (shape-&gt;[30,4])                                                              </span>
<span class="go">/df1_mixed            frame_table  (typ-&gt;appendable,nrows-&gt;30,ncols-&gt;11,indexers-&gt;[index])                      </span>
<span class="go">/p1_mixed             wide_table   (typ-&gt;appendable,nrows-&gt;120,ncols-&gt;9,indexers-&gt;[major_axis,minor_axis])      </span>
<span class="go">/p4d_mixed            wide_table   (typ-&gt;appendable,nrows-&gt;360,ncols-&gt;9,indexers-&gt;[items,major_axis,minor_axis])</span>
<span class="go">/foo/bar              wide         (shape-&gt;[3,30,4])                                                            </span>

<span class="gp">In [334]: </span><span class="n">new_store</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</pre></div>
</div>
</div></blockquote>
</div>
<div class="section" id="performance">
<h3>Performance<a class="headerlink" href="#performance" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><ul class="simple">
<li><tt class="docutils literal"><span class="pre">Tables</span></tt> come with a writing performance penalty as compared to
regular stores. The benefit is the ability to append/delete and
query (potentially very large amounts of data).  Write times are
generally longer as compared with regular stores. Query times can
be quite fast, especially on an indexed axis.</li>
<li>You can pass <tt class="docutils literal"><span class="pre">chunksize=&lt;int&gt;</span></tt> to <tt class="docutils literal"><span class="pre">append</span></tt>, specifying the
write chunksize (default is 50000). This will signficantly lower
your memory usage on writing.</li>
<li>You can pass <tt class="docutils literal"><span class="pre">expectedrows=&lt;int&gt;</span></tt> to the first <tt class="docutils literal"><span class="pre">append</span></tt>,
to set the TOTAL number of expected rows that <tt class="docutils literal"><span class="pre">PyTables</span></tt> will
expected. This will optimize read/write performance.</li>
<li>Duplicate rows can be written to tables, but are filtered out in
selection (with the last items being selected; thus a table is
unique on major, minor pairs)</li>
<li>A <tt class="docutils literal"><span class="pre">PerformanceWarning</span></tt> will be raised if you are attempting to
store types that will be pickled by PyTables (rather than stored as
endemic types). See
<a class="reference external" href="http://stackoverflow.com/questions/14355151/how-to-make-pandas-hdfstore-put-operation-faster/14370190#14370190">Here</a>
for more information and some solutions.</li>
</ul>
</div></blockquote>
</div>
<div class="section" id="experimental">
<h3>Experimental<a class="headerlink" href="#experimental" title="Permalink to this headline">¶</a></h3>
<p>HDFStore supports <tt class="docutils literal"><span class="pre">Panel4D</span></tt> storage.</p>
<div class="highlight-ipython"><div class="highlight"><pre><span class="gp">In [335]: </span><span class="n">p4d</span> <span class="o">=</span> <span class="n">Panel4D</span><span class="p">({</span> <span class="s">&#39;l1&#39;</span> <span class="p">:</span> <span class="n">wp</span> <span class="p">})</span>

<span class="gp">In [336]: </span><span class="n">p4d</span>

<span class="go">&lt;class &#39;pandas.core.panelnd.Panel4D&#39;&gt;</span>
<span class="go">Dimensions: 1 (labels) x 2 (items) x 5 (major_axis) x 4 (minor_axis)</span>
<span class="go">Labels axis: l1 to l1</span>
<span class="go">Items axis: Item1 to Item2</span>
<span class="go">Major_axis axis: 2000-01-01 00:00:00 to 2000-01-05 00:00:00</span>
<span class="go">Minor_axis axis: A to D</span>

<span class="gp">In [337]: </span><span class="n">store</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s">&#39;p4d&#39;</span><span class="p">,</span> <span class="n">p4d</span><span class="p">)</span>

<span class="gp">In [338]: </span><span class="n">store</span>

<span class="go">&lt;class &#39;pandas.io.pytables.HDFStore&#39;&gt;</span>
<span class="go">File path: store.h5</span>
<span class="go">/df                     frame_table  (typ-&gt;appendable,nrows-&gt;8,ncols-&gt;3,indexers-&gt;[index])                         </span>
<span class="go">/df1_mt                 frame_table  (typ-&gt;appendable,nrows-&gt;7,ncols-&gt;2,indexers-&gt;[index],dc-&gt;[A,B])               </span>
<span class="go">/df2_mt                 frame_table  (typ-&gt;appendable,nrows-&gt;7,ncols-&gt;5,indexers-&gt;[index])                         </span>
<span class="go">/df_coord               frame_table  (typ-&gt;appendable,nrows-&gt;1000,ncols-&gt;2,indexers-&gt;[index])                      </span>
<span class="go">/df_dc                  frame_table  (typ-&gt;appendable,nrows-&gt;8,ncols-&gt;5,indexers-&gt;[index],dc-&gt;[B,C,string,string2])</span>
<span class="go">/df_mask                frame_table  (typ-&gt;appendable,nrows-&gt;1000,ncols-&gt;2,indexers-&gt;[index])                      </span>
<span class="go">/df_mi                  frame_table  (typ-&gt;appendable_multi,nrows-&gt;10,ncols-&gt;5,indexers-&gt;[index],dc-&gt;[bar,foo])    </span>
<span class="go">/df_mixed               frame_table  (typ-&gt;appendable,nrows-&gt;8,ncols-&gt;7,indexers-&gt;[index])                         </span>
<span class="go">/dfq                    frame_table  (typ-&gt;appendable,nrows-&gt;10,ncols-&gt;4,indexers-&gt;[index],dc-&gt;[A,B,C,D])          </span>
<span class="go">/dfs                    frame_table  (typ-&gt;appendable,nrows-&gt;5,ncols-&gt;2,indexers-&gt;[index])                         </span>
<span class="go">/dfs2                   frame_table  (typ-&gt;appendable,nrows-&gt;5,ncols-&gt;2,indexers-&gt;[index],dc-&gt;[A])                 </span>
<span class="go">/dfss                   frame_table  (typ-&gt;appendable,nrows-&gt;3,ncols-&gt;1,indexers-&gt;[index])                         </span>
<span class="go">/dfss2                  frame_table  (typ-&gt;appendable,nrows-&gt;3,ncols-&gt;1,indexers-&gt;[index])                         </span>
<span class="go">/dftd                   frame_table  (typ-&gt;appendable,nrows-&gt;10,ncols-&gt;3,indexers-&gt;[index],dc-&gt;[A,B,C])            </span>
<span class="go">/p4d                    wide_table   (typ-&gt;appendable,nrows-&gt;40,ncols-&gt;1,indexers-&gt;[items,major_axis,minor_axis])  </span>
<span class="go">/wp                     wide_table   (typ-&gt;appendable,nrows-&gt;8,ncols-&gt;2,indexers-&gt;[major_axis,minor_axis])         </span>
<span class="go">/foo/bar/bah            frame        (shape-&gt;[8,3])                                                                </span>
</pre></div>
</div>
<p>These, by default, index the three axes <tt class="docutils literal"><span class="pre">items,</span> <span class="pre">major_axis,</span>
<span class="pre">minor_axis</span></tt>. On an <tt class="docutils literal"><span class="pre">AppendableTable</span></tt> it is possible to setup with the
first append a different indexing scheme, depending on how you want to
store your data. Pass the <tt class="docutils literal"><span class="pre">axes</span></tt> keyword with a list of dimensions
(currently must by exactly 1 less than the total dimensions of the
object). This cannot be changed after table creation.</p>
<div class="highlight-ipython"><div class="highlight"><pre><span class="gp">In [339]: </span><span class="n">store</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s">&#39;p4d2&#39;</span><span class="p">,</span> <span class="n">p4d</span><span class="p">,</span> <span class="n">axes</span><span class="o">=</span><span class="p">[</span><span class="s">&#39;labels&#39;</span><span class="p">,</span> <span class="s">&#39;major_axis&#39;</span><span class="p">,</span> <span class="s">&#39;minor_axis&#39;</span><span class="p">])</span>

<span class="gp">In [340]: </span><span class="n">store</span>

<span class="go">&lt;class &#39;pandas.io.pytables.HDFStore&#39;&gt;</span>
<span class="go">File path: store.h5</span>
<span class="go">/df                     frame_table  (typ-&gt;appendable,nrows-&gt;8,ncols-&gt;3,indexers-&gt;[index])                         </span>
<span class="go">/df1_mt                 frame_table  (typ-&gt;appendable,nrows-&gt;7,ncols-&gt;2,indexers-&gt;[index],dc-&gt;[A,B])               </span>
<span class="go">/df2_mt                 frame_table  (typ-&gt;appendable,nrows-&gt;7,ncols-&gt;5,indexers-&gt;[index])                         </span>
<span class="go">/df_coord               frame_table  (typ-&gt;appendable,nrows-&gt;1000,ncols-&gt;2,indexers-&gt;[index])                      </span>
<span class="go">/df_dc                  frame_table  (typ-&gt;appendable,nrows-&gt;8,ncols-&gt;5,indexers-&gt;[index],dc-&gt;[B,C,string,string2])</span>
<span class="go">/df_mask                frame_table  (typ-&gt;appendable,nrows-&gt;1000,ncols-&gt;2,indexers-&gt;[index])                      </span>
<span class="go">/df_mi                  frame_table  (typ-&gt;appendable_multi,nrows-&gt;10,ncols-&gt;5,indexers-&gt;[index],dc-&gt;[bar,foo])    </span>
<span class="go">/df_mixed               frame_table  (typ-&gt;appendable,nrows-&gt;8,ncols-&gt;7,indexers-&gt;[index])                         </span>
<span class="go">/dfq                    frame_table  (typ-&gt;appendable,nrows-&gt;10,ncols-&gt;4,indexers-&gt;[index],dc-&gt;[A,B,C,D])          </span>
<span class="go">/dfs                    frame_table  (typ-&gt;appendable,nrows-&gt;5,ncols-&gt;2,indexers-&gt;[index])                         </span>
<span class="go">/dfs2                   frame_table  (typ-&gt;appendable,nrows-&gt;5,ncols-&gt;2,indexers-&gt;[index],dc-&gt;[A])                 </span>
<span class="go">/dfss                   frame_table  (typ-&gt;appendable,nrows-&gt;3,ncols-&gt;1,indexers-&gt;[index])                         </span>
<span class="go">/dfss2                  frame_table  (typ-&gt;appendable,nrows-&gt;3,ncols-&gt;1,indexers-&gt;[index])                         </span>
<span class="go">/dftd                   frame_table  (typ-&gt;appendable,nrows-&gt;10,ncols-&gt;3,indexers-&gt;[index],dc-&gt;[A,B,C])            </span>
<span class="go">/p4d                    wide_table   (typ-&gt;appendable,nrows-&gt;40,ncols-&gt;1,indexers-&gt;[items,major_axis,minor_axis])  </span>
<span class="go">/p4d2                   wide_table   (typ-&gt;appendable,nrows-&gt;20,ncols-&gt;2,indexers-&gt;[labels,major_axis,minor_axis]) </span>
<span class="go">/wp                     wide_table   (typ-&gt;appendable,nrows-&gt;8,ncols-&gt;2,indexers-&gt;[major_axis,minor_axis])         </span>
<span class="go">/foo/bar/bah            frame        (shape-&gt;[8,3])                                                                </span>

<span class="gp">In [341]: </span><span class="n">store</span><span class="o">.</span><span class="n">select</span><span class="p">(</span><span class="s">&#39;p4d2&#39;</span><span class="p">,</span> <span class="p">[</span> <span class="n">Term</span><span class="p">(</span><span class="s">&#39;labels=l1&#39;</span><span class="p">),</span> <span class="n">Term</span><span class="p">(</span><span class="s">&#39;items=Item1&#39;</span><span class="p">),</span> <span class="n">Term</span><span class="p">(</span><span class="s">&#39;minor_axis=A_big_strings&#39;</span><span class="p">)</span> <span class="p">])</span>

<span class="go">&lt;class &#39;pandas.core.panelnd.Panel4D&#39;&gt;</span>
<span class="go">Dimensions: 0 (labels) x 1 (items) x 0 (major_axis) x 0 (minor_axis)</span>
<span class="go">Labels axis: None</span>
<span class="go">Items axis: Item1 to Item1</span>
<span class="go">Major_axis axis: None</span>
<span class="go">Minor_axis axis: None</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="sql-queries">
<span id="io-sql"></span><h2>SQL Queries<a class="headerlink" href="#sql-queries" title="Permalink to this headline">¶</a></h2>
<p>The <tt class="xref py py-mod docutils literal"><span class="pre">pandas.io.sql</span></tt> module provides a collection of query wrappers to both
facilitate data retrieval and to reduce dependency on DB-specific API. These
wrappers only support the Python database adapters which respect the <a class="reference external" href="http://www.python.org/dev/peps/pep-0249/">Python
DB-API</a>. See some
<a class="reference internal" href="cookbook.html#cookbook-sql"><em>cookbook examples</em></a> for some advanced strategies</p>
<p>For example, suppose you want to query some data with different types from a
table such as:</p>
<table border="1" class="docutils">
<colgroup>
<col width="13%" />
<col width="32%" />
<col width="18%" />
<col width="18%" />
<col width="18%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">id</th>
<th class="head">Date</th>
<th class="head">Col_1</th>
<th class="head">Col_2</th>
<th class="head">Col_3</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>26</td>
<td>2012-10-18</td>
<td>X</td>
<td>25.7</td>
<td>True</td>
</tr>
<tr class="row-odd"><td>42</td>
<td>2012-10-19</td>
<td>Y</td>
<td>-12.4</td>
<td>False</td>
</tr>
<tr class="row-even"><td>63</td>
<td>2012-10-20</td>
<td>Z</td>
<td>5.73</td>
<td>True</td>
</tr>
</tbody>
</table>
<p>Functions from <tt class="xref py py-mod docutils literal"><span class="pre">pandas.io.sql</span></tt> can extract some data into a DataFrame. In
the following example, we use the <a class="reference external" href="http://www.sqlite.org/">SQlite</a> SQL database
engine. You can use a temporary SQLite database where data are stored in
&#8220;memory&#8221;. Just do:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">import</span> <span class="nn">sqlite3</span>
<span class="kn">from</span> <span class="nn">pandas.io</span> <span class="kn">import</span> <span class="n">sql</span>
<span class="c"># Create your connection.</span>
<span class="n">cnx</span> <span class="o">=</span> <span class="n">sqlite3</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s">&#39;:memory:&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>Let <tt class="docutils literal"><span class="pre">data</span></tt> be the name of your SQL table. With a query and your database
connection, just use the <a class="reference internal" href="generated/pandas.io.sql.read_frame.html#pandas.io.sql.read_frame" title="pandas.io.sql.read_frame"><tt class="xref py py-func docutils literal"><span class="pre">read_frame()</span></tt></a> function to get the
query results into a DataFrame:</p>
<div class="highlight-ipython"><div class="highlight"><pre><span class="gp">In [342]: </span><span class="n">sql</span><span class="o">.</span><span class="n">read_frame</span><span class="p">(</span><span class="s">&quot;SELECT * FROM data;&quot;</span><span class="p">,</span> <span class="n">cnx</span><span class="p">)</span>

<span class="go">   id                 date Col_1  Col_2  Col_3</span>
<span class="go">0  26  2010-10-18 00:00:00     X  27.50      1</span>
<span class="go">1  42  2010-10-19 00:00:00     Y -12.50      0</span>
<span class="go">2  63  2010-10-20 00:00:00     Z   5.73      1</span>
</pre></div>
</div>
<p>You can also specify the name of the column as the DataFrame index:</p>
<div class="highlight-ipython"><div class="highlight"><pre><span class="gp">In [343]: </span><span class="n">sql</span><span class="o">.</span><span class="n">read_frame</span><span class="p">(</span><span class="s">&quot;SELECT * FROM data;&quot;</span><span class="p">,</span> <span class="n">cnx</span><span class="p">,</span> <span class="n">index_col</span><span class="o">=</span><span class="s">&#39;id&#39;</span><span class="p">)</span>

<span class="go">                   date Col_1  Col_2  Col_3</span>
<span class="go">id                                         </span>
<span class="go">26  2010-10-18 00:00:00     X  27.50      1</span>
<span class="go">42  2010-10-19 00:00:00     Y -12.50      0</span>
<span class="go">63  2010-10-20 00:00:00     Z   5.73      1</span>

<span class="gp">In [344]: </span><span class="n">sql</span><span class="o">.</span><span class="n">read_frame</span><span class="p">(</span><span class="s">&quot;SELECT * FROM data;&quot;</span><span class="p">,</span> <span class="n">cnx</span><span class="p">,</span> <span class="n">index_col</span><span class="o">=</span><span class="s">&#39;date&#39;</span><span class="p">)</span>

<span class="go">                     id Col_1  Col_2  Col_3</span>
<span class="go">date                                       </span>
<span class="go">2010-10-18 00:00:00  26     X  27.50      1</span>
<span class="go">2010-10-19 00:00:00  42     Y -12.50      0</span>
<span class="go">2010-10-20 00:00:00  63     Z   5.73      1</span>
</pre></div>
</div>
<p>Of course, you can specify a more &#8220;complex&#8221; query.</p>
<div class="highlight-ipython"><div class="highlight"><pre><span class="gp">In [345]: </span><span class="n">sql</span><span class="o">.</span><span class="n">read_frame</span><span class="p">(</span><span class="s">&quot;SELECT id, Col_1, Col_2 FROM data WHERE id = 42;&quot;</span><span class="p">,</span> <span class="n">cnx</span><span class="p">)</span>

<span class="go">   id Col_1  Col_2</span>
<span class="go">0  42     Y  -12.5</span>
</pre></div>
</div>
<p>There are a few other available functions:</p>
<blockquote>
<div><ul class="simple">
<li><tt class="docutils literal"><span class="pre">tquery</span></tt> returns a list of tuples corresponding to each row.</li>
<li><tt class="docutils literal"><span class="pre">uquery</span></tt> does the same thing as tquery, but instead of returning results
it returns the number of related rows.</li>
<li><tt class="docutils literal"><span class="pre">write_frame</span></tt> writes records stored in a DataFrame into the SQL table.</li>
<li><tt class="docutils literal"><span class="pre">has_table</span></tt> checks if a given SQLite table exists.</li>
</ul>
</div></blockquote>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">For now, writing your DataFrame into a database works only with
<strong>SQLite</strong>. Moreover, the <strong>index</strong> will currently be <strong>dropped</strong>.</p>
</div>
</div>
<div class="section" id="stata-format">
<h2>STATA Format<a class="headerlink" href="#stata-format" title="Permalink to this headline">¶</a></h2>
<div class="section" id="writing-to-stata-format">
<span id="io-stata"></span><h3>Writing to STATA format<a class="headerlink" href="#writing-to-stata-format" title="Permalink to this headline">¶</a></h3>
<p id="io-stata-writer">The method <tt class="xref py py-func docutils literal"><span class="pre">to_stata()</span></tt> will write a DataFrame
into a .dta file. The format version of this file is always 115 (Stata 12).</p>
<div class="highlight-ipython"><div class="highlight"><pre><span class="gp">In [346]: </span><span class="n">df</span> <span class="o">=</span> <span class="n">DataFrame</span><span class="p">(</span><span class="n">randn</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span> <span class="n">columns</span><span class="o">=</span><span class="nb">list</span><span class="p">(</span><span class="s">&#39;AB&#39;</span><span class="p">))</span>

<span class="gp">In [347]: </span><span class="n">df</span><span class="o">.</span><span class="n">to_stata</span><span class="p">(</span><span class="s">&#39;stata.dta&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="reading-from-stata-format">
<h3>Reading from STATA format<a class="headerlink" href="#reading-from-stata-format" title="Permalink to this headline">¶</a></h3>
<div class="versionadded" id="io-stata-reader">
<p><span>New in version 0.12.</span></p>
</div>
<p>The top-level function <tt class="docutils literal"><span class="pre">read_stata</span></tt> will read a dta format file
and return a DataFrame:
The class <tt class="xref py py-class docutils literal"><span class="pre">StataReader</span></tt> will read the header of the
given dta file at initialization. Its method
<a class="reference internal" href="generated/pandas.io.stata.StataReader.data.html#pandas.io.stata.StataReader.data" title="pandas.io.stata.StataReader.data"><tt class="xref py py-func docutils literal"><span class="pre">data()</span></tt></a> will read the observations,
converting them to a DataFrame which is returned:</p>
<div class="highlight-ipython"><div class="highlight"><pre><span class="gp">In [348]: </span><span class="n">pd</span><span class="o">.</span><span class="n">read_stata</span><span class="p">(</span><span class="s">&#39;stata.dta&#39;</span><span class="p">)</span>

<span class="go">   index         A         B</span>
<span class="go">0      0 -0.204493  1.102553</span>
<span class="go">1      1 -0.429981  0.597576</span>
<span class="go">2      2  0.404369 -1.012985</span>
<span class="go">3      3  0.250405  0.369785</span>
<span class="go">4      4  0.109628 -0.479265</span>
<span class="go">5      5 -0.790855  0.144817</span>
<span class="go">6      6  1.726395 -0.464535</span>
<span class="go">7      7 -0.821906  1.597605</span>
<span class="go">8      8  0.187307 -0.128342</span>
<span class="go">9      9 -1.511638 -0.289858</span>
</pre></div>
</div>
<p>Currently the <tt class="docutils literal"><span class="pre">index</span></tt> is retrieved as a column on read back.</p>
<p>The parameter <tt class="docutils literal"><span class="pre">convert_categoricals</span></tt> indicates wheter value labels should be
read and used to create a <tt class="docutils literal"><span class="pre">Categorical</span></tt> variable from them. Value labels can
also be retrieved by the function <tt class="docutils literal"><span class="pre">variable_labels</span></tt>, which requires data to be
called before (see <tt class="docutils literal"><span class="pre">pandas.io.stata.StataReader</span></tt>).</p>
<p>The StataReader supports .dta Formats 104, 105, 108, 113-115 and 117.
Alternatively, the function <a class="reference internal" href="generated/pandas.io.stata.read_stata.html#pandas.io.stata.read_stata" title="pandas.io.stata.read_stata"><tt class="xref py py-func docutils literal"><span class="pre">read_stata()</span></tt></a> can be used</p>
</div>
</div>
</div>


                    </div>
                </div>
            </div>

            
            <div class="clearer"></div>
        </div>
    </div>
</div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="np-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="remote_data.html" title="Remote Data Access"
             >next</a> |</li>
        <li class="right" >
          <a href="rplot.html" title="Trellis plotting interface"
             >previous</a> |</li>
        <li><a href="index.html">pandas 0.12.0-746-g126c100 documentation</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2008-2012, the pandas development team.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.2b2.
    </div>
  </body>
</html>